var ivideos;(()=>{var e={497:e=>{(()=>{var t={9742:(e,t)=>{"use strict";t.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,o=u(e),s=o[0],a=o[1],c=new i(function(e,t,r){return 3*(t+r)/4-r}(0,s,a)),l=0,f=a>0?s-4:s;for(r=0;r<f;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;return 2===a&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[l++]=255&t),1===a&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=16383,a=0,u=n-i;a<u;a+=s)o.push(c(e,a,a+s>u?u:a+s));return 1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)r[s]=o[s],n[o.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,n){for(var i,o,s=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},8764:(e,t,r)=>{"use strict";const n=r(9742),i=r(645),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=function(e){return+e!=e&&(e=0),u.alloc(+e)},t.INSPECT_MAX_BYTES=50;const s=2147483647;function a(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return f(e)}return c(e,t,r)}function c(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|y(e,t);let n=a(r);const i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Y(e,Uint8Array)){const t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return h(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Y(e,ArrayBuffer)||e&&Y(e.buffer,ArrayBuffer))return p(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(Y(e,SharedArrayBuffer)||e&&Y(e.buffer,SharedArrayBuffer)))return p(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return u.from(n,t,r);const i=function(e){if(u.isBuffer(e)){const t=0|d(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||Q(e.length)?a(0):h(e):"Buffer"===e.type&&Array.isArray(e.data)?h(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function f(e){return l(e),a(e<0?0:0|d(e))}function h(e){const t=e.length<0?0:0|d(e.length),r=a(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function p(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,u.prototype),n}function d(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function y(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Y(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return G(e).length;default:if(i)return n?-1:V(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,r);case"utf8":case"utf-8":return O(this,t,r);case"ascii":return B(this,t,r);case"latin1":case"binary":return A(this,t,r);case"base64":return T(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function _(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function m(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Q(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:b(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):b(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,r,n,i){let o,s=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){let n=-1;for(o=r;o<a;o++)if(c(e,o)===c(t,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===u)return n*s}else-1!==n&&(o-=o-n),n=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){let r=!0;for(let n=0;n<u;n++)if(c(e,o+n)!==c(t,n)){r=!1;break}if(r)return o}return-1}function v(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;const o=t.length;let s;for(n>o/2&&(n=o/2),s=0;s<n;++s){const n=parseInt(t.substr(2*s,2),16);if(Q(n))return s;e[r+s]=n}return s}function w(e,t,r,n){return K(V(t,e.length-r),e,r,n)}function k(e,t,r,n){return K(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function S(e,t,r,n){return K(G(t),e,r,n)}function E(e,t,r,n){return K(function(e,t){let r,n,i;const o=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function T(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function O(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;for(;i<r;){const t=e[i];let o=null,s=t>239?4:t>223?3:t>191?2:1;if(i+s<=r){let r,n,a,u;switch(s){case 1:t<128&&(o=t);break;case 2:r=e[i+1],128==(192&r)&&(u=(31&t)<<6|63&r,u>127&&(o=u));break;case 3:r=e[i+1],n=e[i+2],128==(192&r)&&128==(192&n)&&(u=(15&t)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(u=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return function(e){const t=e.length;if(t<=x)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=x));return r}(n)}t.kMaxLength=s,u.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return function(e,t,r){return l(e),e<=0?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)}(e,t,r)},u.allocUnsafe=function(e){return f(e)},u.allocUnsafeSlow=function(e){return f(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(Y(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),Y(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=u.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(Y(t,Uint8Array))i+t.length>n.length?(u.isBuffer(t)||(t=u.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!u.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},u.byteLength=y,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)_(this,t,t+1);return this},u.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)_(this,t,t+3),_(this,t+1,t+2);return this},u.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)_(this,t,t+7),_(this,t+1,t+6),_(this,t+2,t+5),_(this,t+3,t+4);return this},u.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?O(this,0,e):g.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(e,t,r,n,i){if(Y(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0);const a=Math.min(o,s),c=this.slice(n,i),l=e.slice(t,r);for(let e=0;e<a;++e)if(c[e]!==l[e]){o=c[e],s=l[e];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return v(this,e,t,r);case"utf8":case"utf-8":return w(this,e,t,r);case"ascii":case"latin1":case"binary":return k(this,e,t,r);case"base64":return S(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const x=4096;function B(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function A(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function M(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=J[e[n]];return i}function I(e,t,r){const n=e.slice(t,r);let i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}function P(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function C(e,t,r,n,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function R(e,t,r,n,i){F(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,r}function j(e,t,r,n,i){F(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s>>=8,e[r+2]=s,s>>=8,e[r+1]=s,s>>=8,e[r]=s,r+8}function L(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function D(e,t,r,n,o){return t=+t,r>>>=0,o||L(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function U(e,t,r,n,o){return t=+t,r>>>=0,o||L(e,0,r,8),i.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readBigUInt64LE=X((function(e){W(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||z(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),u.prototype.readBigUInt64BE=X((function(e){W(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||z(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=t,i=1,o=this[e+--n];for(;n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||P(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||P(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readBigInt64LE=X((function(e){W(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||z(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),u.prototype.readBigInt64BE=X((function(e){W(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||z(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),u.prototype.readFloatLE=function(e,t){return e>>>=0,t||P(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||P(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||P(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||P(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||C(this,e,t,r,Math.pow(2,8*r)-1,0);let i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||C(this,e,t,r,Math.pow(2,8*r)-1,0);let i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigUInt64LE=X((function(e,t=0){return R(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=X((function(e,t=0){return j(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);C(this,e,t,r,n-1,-n)}let i=0,o=1,s=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);C(this,e,t,r,n-1,-n)}let i=r-1,o=1,s=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigInt64LE=X((function(e,t=0){return R(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=X((function(e,t=0){return j(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(e,t,r){return D(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return D(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return U(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return U(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{const o=u.isBuffer(e)?e:u.from(e,n),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%s]}return this};const $={};function N(e,t,r){$[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function q(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function F(e,t,r,n,i,o){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new $.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){W(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||z(t,e.length-(r+1))}(n,i,o)}function W(e,t){if("number"!=typeof e)throw new $.ERR_INVALID_ARG_TYPE(t,"number",e)}function z(e,t,r){if(Math.floor(e)!==e)throw W(e,r),new $.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new $.ERR_BUFFER_OUT_OF_BOUNDS;throw new $.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}N("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),N("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),N("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=q(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=q(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const H=/[^+/0-9A-Za-z-_]/g;function V(e,t){let r;t=t||1/0;const n=e.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function G(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function K(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function Y(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Q(e){return e!=e}const J=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function X(e){return"undefined"==typeof BigInt?Z:e}function Z(){throw new Error("BigInt not supported")}},487:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};e.exports=t},1012:e=>{var t,r;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var r=[],n=0;n<e.length;n+=3)for(var i=e[n]<<16|e[n+1]<<8|e[n+2],o=0;o<4;o++)8*n+6*o<=8*e.length?r.push(t.charAt(i>>>6*(3-o)&63)):r.push("=");return r.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],n=0,i=0;n<e.length;i=++n%4)0!=i&&r.push((t.indexOf(e.charAt(n-1))&Math.pow(2,-2*i+8)-1)<<2*i|t.indexOf(e.charAt(n))>>>6-2*i);return r}},e.exports=r},6729:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(e,t,n,o,s){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new i(n,o||e,s),u=r?r+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],a]:e._events[u].push(a):(e._events[u]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,i,o,s){var a=r?r+e:e;if(!this._events[a])return!1;var u,c,l=this._events[a],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,o),!0;case 6:return l.fn.call(l.context,t,n,i,o,s),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var h,p=l.length;for(c=0;c<p;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;case 4:l[c].fn.call(l[c].context,t,n,i);break;default:if(!u)for(h=1,u=new Array(f-1);h<f;h++)u[h-1]=arguments[h];l[c].fn.apply(l[c].context,u)}}return!0},a.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return o(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,i){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||i&&!a.once||n&&a.context!==n||s(this,o);else{for(var u=0,c=[],l=a.length;u<l;u++)(a[u].fn!==t||i&&!a[u].once||n&&a[u].context!==n)&&c.push(a[u]);c.length?this._events[o]=1===c.length?c[0]:c:s(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a},645:(e,t)=>{t.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,l=-7,f=r?i-1:0,h=r?-1:1,p=e[t+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+e[t+f],f+=h,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+e[t+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=c}return(p?-1:1)*s*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(s++,u/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(t*u-1)*Math.pow(2,i),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;e[r+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[r+p]=255&s,p+=d,s/=256,c-=8);e[r+p-d]|=128*y}},8738:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},2568:(e,t,r)=>{var n,i,o,s,a;n=r(1012),i=r(487).utf8,o=r(8738),s=r(487).bin,(a=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?s.stringToBytes(e):i.stringToBytes(e):o(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var r=n.bytesToWords(e),u=8*e.length,c=1732584193,l=-271733879,f=-1732584194,h=271733878,p=0;p<r.length;p++)r[p]=16711935&(r[p]<<8|r[p]>>>24)|4278255360&(r[p]<<24|r[p]>>>8);r[u>>>5]|=128<<u%32,r[14+(u+64>>>9<<4)]=u;var d=a._ff,y=a._gg,g=a._hh,_=a._ii;for(p=0;p<r.length;p+=16){var m=c,b=l,v=f,w=h;c=d(c,l,f,h,r[p+0],7,-680876936),h=d(h,c,l,f,r[p+1],12,-389564586),f=d(f,h,c,l,r[p+2],17,606105819),l=d(l,f,h,c,r[p+3],22,-1044525330),c=d(c,l,f,h,r[p+4],7,-176418897),h=d(h,c,l,f,r[p+5],12,1200080426),f=d(f,h,c,l,r[p+6],17,-1473231341),l=d(l,f,h,c,r[p+7],22,-45705983),c=d(c,l,f,h,r[p+8],7,1770035416),h=d(h,c,l,f,r[p+9],12,-1958414417),f=d(f,h,c,l,r[p+10],17,-42063),l=d(l,f,h,c,r[p+11],22,-1990404162),c=d(c,l,f,h,r[p+12],7,1804603682),h=d(h,c,l,f,r[p+13],12,-40341101),f=d(f,h,c,l,r[p+14],17,-1502002290),c=y(c,l=d(l,f,h,c,r[p+15],22,1236535329),f,h,r[p+1],5,-165796510),h=y(h,c,l,f,r[p+6],9,-1069501632),f=y(f,h,c,l,r[p+11],14,643717713),l=y(l,f,h,c,r[p+0],20,-373897302),c=y(c,l,f,h,r[p+5],5,-701558691),h=y(h,c,l,f,r[p+10],9,38016083),f=y(f,h,c,l,r[p+15],14,-660478335),l=y(l,f,h,c,r[p+4],20,-405537848),c=y(c,l,f,h,r[p+9],5,568446438),h=y(h,c,l,f,r[p+14],9,-1019803690),f=y(f,h,c,l,r[p+3],14,-187363961),l=y(l,f,h,c,r[p+8],20,1163531501),c=y(c,l,f,h,r[p+13],5,-1444681467),h=y(h,c,l,f,r[p+2],9,-51403784),f=y(f,h,c,l,r[p+7],14,1735328473),c=g(c,l=y(l,f,h,c,r[p+12],20,-1926607734),f,h,r[p+5],4,-378558),h=g(h,c,l,f,r[p+8],11,-2022574463),f=g(f,h,c,l,r[p+11],16,1839030562),l=g(l,f,h,c,r[p+14],23,-35309556),c=g(c,l,f,h,r[p+1],4,-1530992060),h=g(h,c,l,f,r[p+4],11,1272893353),f=g(f,h,c,l,r[p+7],16,-155497632),l=g(l,f,h,c,r[p+10],23,-1094730640),c=g(c,l,f,h,r[p+13],4,681279174),h=g(h,c,l,f,r[p+0],11,-358537222),f=g(f,h,c,l,r[p+3],16,-722521979),l=g(l,f,h,c,r[p+6],23,76029189),c=g(c,l,f,h,r[p+9],4,-640364487),h=g(h,c,l,f,r[p+12],11,-421815835),f=g(f,h,c,l,r[p+15],16,530742520),c=_(c,l=g(l,f,h,c,r[p+2],23,-995338651),f,h,r[p+0],6,-198630844),h=_(h,c,l,f,r[p+7],10,1126891415),f=_(f,h,c,l,r[p+14],15,-1416354905),l=_(l,f,h,c,r[p+5],21,-57434055),c=_(c,l,f,h,r[p+12],6,1700485571),h=_(h,c,l,f,r[p+3],10,-1894986606),f=_(f,h,c,l,r[p+10],15,-1051523),l=_(l,f,h,c,r[p+1],21,-2054922799),c=_(c,l,f,h,r[p+8],6,1873313359),h=_(h,c,l,f,r[p+15],10,-30611744),f=_(f,h,c,l,r[p+6],15,-1560198380),l=_(l,f,h,c,r[p+13],21,1309151649),c=_(c,l,f,h,r[p+4],6,-145523070),h=_(h,c,l,f,r[p+11],10,-1120210379),f=_(f,h,c,l,r[p+2],15,718787259),l=_(l,f,h,c,r[p+9],21,-343485551),c=c+m>>>0,l=l+b>>>0,f=f+v>>>0,h=h+w>>>0}return n.endian([c,l,f,h])})._ff=function(e,t,r,n,i,o,s){var a=e+(t&r|~t&n)+(i>>>0)+s;return(a<<o|a>>>32-o)+t},a._gg=function(e,t,r,n,i,o,s){var a=e+(t&n|r&~n)+(i>>>0)+s;return(a<<o|a>>>32-o)+t},a._hh=function(e,t,r,n,i,o,s){var a=e+(t^r^n)+(i>>>0)+s;return(a<<o|a>>>32-o)+t},a._ii=function(e,t,r,n,i,o,s){var a=e+(r^(t|~n))+(i>>>0)+s;return(a<<o|a>>>32-o)+t},a._blocksize=16,a._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var r=n.wordsToBytes(a(e,t));return t&&t.asBytes?r:t&&t.asString?s.bytesToString(r):n.bytesToHex(r)}},1991:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(3607));i(r(3607),t),t.default=s.default},8376:function(e,t,r){"use strict";var n,i,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deviceId=t.buildSN=void 0;const s=o(r(2568)),a=(0,r(4296).customAlphabet)("abcdefghijklmnopqrstwuvxyz0123456789ABCDEFGHIJKLMNOPQRSTWUVXYZ",32);function u(e=8){return a(e)}t.buildSN=u;const c=globalThis.navigator||{};function l(){var e,t;let r=[c.platform,c.appName,c.appVersion,c.userAgent,c.product,c.productSub,c.vendor,c.vendorSub,c.appCodeName,c.deviceMemory||0,c.language,c.languages.join("-")];for(let t=0;t<(null===(e=c.plugins)||void 0===e?void 0:e.length);t++){let e=c.plugins[t];r.push(e.name+"-"+e.filename)}for(let e=0;e<(null===(t=c.mimeTypes)||void 0===t?void 0:t.length);e++){let t=c.mimeTypes[e];r.push(t.suffixes+"-"+t.type)}return(0,s.default)(r.join("\r\n")).toLowerCase()+"-"+u(8)}let f="";try{f=(null===(n=globalThis.localStorage)||void 0===n?void 0:n.getItem("did"))||l(),null===(i=globalThis.localStorage)||void 0===i||i.setItem("did",f)}catch(e){f=l()}function h(){return f}t.deviceId=h,t.default=h},4452:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetch=void 0;const r=globalThis.fetch;async function n(e,t){let n=new AbortController,i=n.signal,o=e instanceof Request?e.url:e;if(t=t||{},e instanceof Request)for(let r in e)t[r]=e[r];delete t.url;let s=t.timeout||15e3;t.signal=i;let a=!0,u=Date.now(),c=setTimeout((()=>{a&&n.abort()}),s||15e3),l=await r(o,t).then((e=>(a=!1,c&&clearTimeout(c),e)));return l.abort=()=>{null==n||n.abort()},l.ttl=Date.now()-u,l}globalThis.Response,t.fetch=n,e.exports=n,t.default=n},2517:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defineProperty=t.Response=void 0;class r extends globalThis.Response{constructor(e,t){super(e,t),this._controller=null==t?void 0:t.controller,this._init=t,t&&this.setProperty(t,this);let r=(null==t?void 0:t.headers)||new Headers;if(r instanceof Headers)r.forEach(((e,t)=>this.headers.set(t,e)));else for(let e in r)this.headers.set(e,r[e])}clone(){let e=super.clone();return this.setProperty(this,e),new r(e.body,this._init)}abort(){var e;null===(e=this._controller)||void 0===e||e.abort()}setProperty(e,t){try{!t.url&&e.url&&n(t,"url",e.url),e.ttl&&(t.ttl=e.ttl),t._controller=e._controller}catch(e){}}}function n(e,t,r){try{Object.defineProperty(e,t,{value:r})}catch(e){}}t.Response=r,t.defineProperty=n,e.exports=r,t.default=r},5237:function(e,t,r){"use strict";var n=r(8764).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Socket=void 0;const o=i(r(6390));class s extends o.default{constructor(){super()}connect(e,t){return this}async write(e){return this}async end(e){return this}async read(e){return n.alloc(0)}destroy(e){this.emit("close")}}t.Socket=s,t.default=s,e.exports=s},5257:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(5237)),a=o(r(4452));i(r(4452),t);const u=o(r(2517)),c=r(8376),l={File:globalThis.File,Blob:globalThis.Blob,FormData:globalThis.FormData,fetch:a.default,deviceId:c.deviceId,AbortController:globalThis.AbortController,Request:globalThis.Request,Response:u.default,RequestInit:globalThis.RequestInit,Headers:globalThis.Headers,ReadableStream:globalThis.ReadableStream,TransformStream:globalThis.TransformStream,WritableStreamDefaultWriter:globalThis.WritableStreamDefaultWriter,ReadableStreamDefaultReader:globalThis.ReadableStreamDefaultReader,Socket:s.default,WebSocket:globalThis.WebSocket};e.exports=l,t.default=l},2868:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={RTCPeerConnection:globalThis.RTCPeerConnection,RTCDataChannel:globalThis.RTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate,RTCOfferOptions:globalThis.RTCOfferOptions};e.exports=r,t.default=r},1719:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=globalThis.WebSocket;e.exports=r,t.default=r},6789:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(2793),t),i(r(1890),t);const o=r(8764);i(r(5257),t),globalThis==globalThis.window&&(globalThis.Buffer=o.Buffer)},2793:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RTCOfferOptions=t.RTCIceCandidate=t.RTCSessionDescription=t.RTCDataChannel=t.RTCPeerConnection=void 0;const i=n(r(2868));t.RTCPeerConnection=i.default.RTCPeerConnection,t.RTCDataChannel=i.default.RTCDataChannel,t.RTCSessionDescription=i.default.RTCSessionDescription,t.RTCIceCandidate=i.default.RTCIceCandidate,t.RTCOfferOptions=i.default.RTCOfferOptions},1890:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocket=t.inNode=t.inBrowser=void 0;const i=n(r(1719)),o=n(r(6729));function s(){return globalThis===globalThis.window}t.inBrowser=s,t.inNode=function(){return!s};class a extends o.default{constructor(e){super(),this.websocket=new i.default(e),this.websocket.addEventListener("message",(e=>this.emit("data",e.data))),this.websocket.addEventListener("close",(()=>this.emit("close"))),this.websocket.addEventListener("error",(e=>this.emit("error",new Error(e.data)))),this.websocket.addEventListener("open",(()=>this.emit("open")))}send(e){this.websocket.send(e)}close(){try{if(!this.websocket)return;this.websocket.removeAllListeners("data"),this.websocket.removeAllListeners("open"),this.websocket.removeAllListeners("error"),this.websocket.removeAllListeners("close"),this.websocket.close()}catch(e){}}get readyState(){return this.websocket.readyState}get binaryType(){return this.websocket.binaryType}get bufferedAmount(){return this.websocket.bufferedAmount}get extensions(){return this.websocket.extensions}get protocol(){return this.websocket.protocol}get url(){return this.websocket.url}get OPEN(){return this.websocket.OPEN}}t.WebSocket=a,t.default=a},8913:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=globalThis.process,n=!!(r&&r.platform&&r.version&&globalThis.Buffer&&r.pid);t.default={peerVersion:"1.4.6",mtu:16300,inBrowser:!n&&globalThis===globalThis.window&&!!globalThis.navigator}},9872:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Accept=t.CMD=void 0;const i=n(r(6729));!function(e){e[e.HEARTBEAT=0]="HEARTBEAT",e[e.CLOSE=1]="CLOSE",e[e.RESET=2]="RESET",e[e.RESPONSE=11]="RESPONSE"}(t.CMD||(t.CMD={}));class o extends i.default{constructor(e){super(),this.options=Object.assign({},e)}get acceptAuth(){return this.options.auth}async connect(e,t,r,n,i){}splitPasswodArgs(e){let t=e.split("_");return{password:t[0]||"",args:t.slice(1)||[]}}}t.Accept=o,t.default=o},651:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseHeader=t.Connect=void 0;const i=n(r(8913));class o{constructor(){}static get(e){if("string"==typeof e&&["ws","xhr"].includes(e))return o.connects.get(e);if(e.length<1)return;let t=o.getProtocol(e.toString());return t?o.connects.get(t):void 0}static has(e){return o.connects.has(e)}static register(e){o.connects.set(e.protocol,e)}static removeAll(){o.connects.clear()}static getProtocol(e){if(i.default.inBrowser){let t=s(e);if(function(e,t){return/^(GET)/i.test(e)&&"websocket"==t.upgrade&&"Upgrade"==t.connection}(e,t))return"ws";if(function(e,t){return/^(GET|POST|HEAD|OPTIONS|PUT|DELETE|TRACE)/i.test(e)&&"websocket"!=t.upgrade&&"Upgrade"!=t.connection}(e,t))return"xhr";throw new Error("no support")}return"direct"}}function s(e){let t=e.split("\r\n"),r={};return t.forEach((e=>{let t=e.split(": ");if(t.length<2)return;let n=t[0]||"",i=t[1]||"";r[n.trim().toLowerCase()]=i.trim()})),r}t.Connect=o,o.connects=new Map,t.parseHeader=s,t.default=o},5650:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AcceptFactor=t.Accept=void 0;const i=n(r(6729)),o=r(2689),s=r(9872);Object.defineProperty(t,"Accept",{enumerable:!0,get:function(){return s.Accept}});const a=n(r(651)),u=r(2052),c=r(1890),l=r(2488),f=r(1497);class h extends i.default{constructor(e){super(),this.ipeer=e,this.accepts=new Map;let t=new o.WrtcAccept({timeout:e.options.acceptTimeout||3e5,auth:async({username:t,password:r})=>!e.username||e.username==t&&e.password==r});this.register(t),(0,c.inBrowser)()?(a.default.has("ws")||a.default.register(new l.WSConnect),a.default.has("xhr")||a.default.register(new f.XHRConnect)):a.default.register(new u.DirectConnect)}register(e){if(this.accepts.has(e.protocol)){let t=this.accepts.get(e.protocol);null==t||t.removeAllListeners("read"),null==t||t.removeAllListeners("write")}else e.options=Object.assign({},e.options);return this.accepts.set(e.protocol,e),this}remove(e){this.accepts.delete(e)}registerConnect(e){a.default.register(e)}async accept(e){let t=await e.read(1e4),r=this.accepts.values(),n=!1;for(let i of r)if(n=await i.isAccept(e,t),n)return this.emit("accept",{handle:!0,peer:e.peer,socket:e}),void i.handle(e,t);n||this.emit("accept",{handle:!1,peer:e.peer,socket:e})}}t.AcceptFactor=h,h.WrtcAccept=o.WrtcAccept,t.default=h},2052:function(e,t,r){"use strict";var n=r(8764).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DirectSocket=t.DirectConnect=void 0;const o=i(r(651)),s=i(r(6390)),a=r(6789);class u extends o.default{constructor(){super(),this.protocol="direct"}connect(e,t){let r=new c;r.connect(e,(()=>{t&&t(r)}))}}t.DirectConnect=u;class c extends s.default{constructor(){super(),this.socket=new a.Socket,this.protocol="direct"}connect(e,t){let r=!1,n=setTimeout((()=>!r&&this.socket.emit("timeout")),5e3);return this.socket.connect(e.port,e.host,(()=>{clearTimeout(n),r=!0,t&&t(this),this.emit("open")})),this.socket.on("data",(e=>{1!=e.byteLength&&(this.emit("read",{size:e.byteLength}),this.emit("data",e))})),this.socket.once("close",(()=>this.emit("close"))),this.socket.once("error",(e=>this.emit("error",e))),this.socket.once("timeout",(()=>this.emit("error",new Error("timeout")))),this}async write(e){return this.socket.write(e),this.emit("write",{size:e.byteLength}),this}async end(e){return e&&this.socket.end(e),this.socket.destroy(),this}async read(e=0){return new Promise((t=>{let r,i=!1;function o(e){r&&clearTimeout(r),i||(i=!0,t(e))}e>0&&(r=setTimeout((()=>{this.removeListener("data",o),i||(i=!0,t(n.alloc(0)))}),e)),this.once("data",o)}))}destroy(e){return this.socket.destroy(e),this.removeAllListeners(),this}}t.DirectSocket=c},2689:function(e,t,r){"use strict";var n=r(8764).Buffer,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.buildConnectChunk=t.buildHttpProxyAuth=t.parseHttpUser=t.WrtcAccept=void 0;const a=s(r(9872)),u=s(r(651));class c extends a.default{constructor(e){super(e),this.acceptList=[],this.protocol="wrtc"}on(e,t){return"reset"==e?(this.onReset=t,this):(super.on(e,t),this)}once(e,t){return"reset"==e?(this.onReset=t,this):(super.once(e,t),this)}addAcceptSocket(e){this.acceptList.findIndex((t=>t==e))<0&&this.acceptList.push(e),e.once("close",(()=>{let t=this.acceptList.findIndex((t=>t==e));this.acceptList.splice(t,1)}))}async isAccept(e,t){return this.isSupport(t.toString())}async handle(e,t){var r;e.setTimeout(this.options.timeout||3e5),this.addAcceptSocket(e.socket);let i=t.toString(),o=(0,u.parseHeader)(i),s=null===(r=o.host)||void 0===r?void 0:r.split(":"),c=s[0],f=parseInt(s[1])||80;if(!c)return void e.write(n.from("WRTC-WEB/1.0 500 badheader"),!0);let h=l(o["proxy-authorization"]);if(!await this.acceptAuth({username:h.username,password:h.password,protocol:this.protocol}))return void e.write("WRTC/1.0 407 authfail",!0);await e.write(n.from("WRTC-WEB/1.0 200 Connection Established\r\n\r\n"));let p=Date.now(),d=await e.read(5e3);this.emit("accept",{chunk:d,ttl:Date.now()-p,id:e.peer});let y=u.default.get(d);if(!y)return e.destroy(new Error("nosupport protocol"));const g=t=>{e.once("close",(()=>t.end())),e.once("error",(()=>e.destroy())),t.once("close",(()=>{e.write(n.from([a.CMD.CLOSE]))})),t.once("error",(e=>t.destroy(e))),e.on("data",(async r=>{if(1!=r.byteLength)try{t.write(r)}catch(t){e.emit("error",t)}else switch(r[0]){case a.CMD.CLOSE:return t.removeAllListeners(),void t.destroy();case a.CMD.RESET:return t.removeAllListeners(),t.destroy(),e.removeAllListeners(),await e.write(n.from([a.CMD.RESPONSE])),void(this.onReset&&this.onReset(e.clone()))}})),t.on("data",(t=>{e.write(t).catch((e=>{}))}))};if(/^(ws|xhr)$/i.test(y.protocol)){let e=(0,u.parseHeader)(d.toString()),t=d.toString().split("\r\n")[0].split(" "),r=t[0],i=t[1];t[2],y.connect({url:i,host:c,port:f,init:{method:r,headers:e}},(e=>{if(g(e),/^(POST|PUT)$/i.test(r)){let t=d.toString().split("\r\n\r\n")[1];t&&t.length>0&&e.write(n.from(t))}}))}else y.connect({host:c,port:f},(e=>{g(e),e.write(d)}));this.on("reset",(async e=>{let t=await e.read(3e3);t.byteLength<=1?e.destroy():(this.removeListener("reset"),this.handle(e,t))}))}isSupport(e){return/^WRTC\//i.test(e)}}function l(e){try{let t=(e=e||"").trim().split(" ")[1]||"",r=n.from(t,"base64").toString().split(":"),i=r[0]||"",o=function(e){let t=e.split("_");return{password:t[0]||"",args:t.slice(1)||[]}}(r[1]||"");return{username:i||"",password:o.password||"",args:o.args||[]}}catch(e){return{username:"",password:"",args:[]}}}function f(e){let t=e.password||"";return e.username+":"+t}t.WrtcAccept=c,t.parseHttpUser=l,t.buildHttpProxyAuth=f,t.buildConnectChunk=function(e){let t=!!e.username,r=n.from(f({username:e.username||"",password:e.password||""})).toString("base64");return n.concat([n.from(`CONNECT ${e.host}:${e.port} HTTP/1.1\r\n`),n.from(`Host: ${e.host}:${e.port}\r\n`),n.from("Proxy-Connection: keep-alive\r\n"),n.from(t?`Proxy-Authorization: Basic ${r}\r\n`:""),n.from("\r\n")])}},2488:function(e,t,r){"use strict";var n=r(8764).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WSSocket=t.WSConnect=void 0;const o=i(r(651)),s=i(r(6390)),a=r(6789);class u extends o.default{constructor(){super(),this.protocol="ws"}connect(e,t){let r=new c;r.connect(e,(()=>{t&&t(r)}))}}t.WSConnect=u;class c extends s.default{constructor(){super(),this.protocol="ws"}connect(e,t){let r=e.url||"",n=!1;this.socket=new a.WebSocket(r);let i=setTimeout((()=>!n&&this.socket.emit("error",new Error("timeout"))),5e3);return this.socket.once("open",(()=>{clearTimeout(i),n=!0,t&&t(this),this.emit("open")})),this.socket.on("data",(e=>{1!=e.byteLength&&(this.emit("read",{size:e.byteLength}),this.emit("data",e))})),this.socket.once("close",(()=>this.emit("close"))),this.socket.once("error",(e=>this.emit("error",e))),this}async write(e){return this.socket.send(e),this.emit("write",{size:e.byteLength}),this}async end(e){return e&&this.socket.send(e),this.socket.close(),this}async read(e=0){return new Promise((t=>{let r,i=!1;function o(e){r&&clearTimeout(r),i||(i=!0,t(e))}e>0&&(r=setTimeout((()=>{this.removeListener("data",o),i||(i=!0,t(n.alloc(0)))}),e)),this.once("data",o)}))}destroy(e){return e&&this.end(n.from(e.message||"")),this.socket.close(),this.removeAllListeners(),this}}t.WSSocket=c},1497:function(e,t,r){"use strict";var n=r(8764).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.XHRSocket=t.XHRConnect=void 0;const o=i(r(651)),s=r(6789),a=i(r(6390)),u=r(1228);class c extends o.default{constructor(){super(),this.protocol="xhr"}connect(e,t){let r=new l;r.connect(e,(()=>{t&&t(r)}))}}t.XHRConnect=c;class l extends a.default{constructor(){super(),this.protocol="xhr"}connect(e,t){let r=e.url||"";const{readable:i,writable:o}=new s.TransformStream,a=o.getWriter(),c=i.getReader();let l,f=Object.assign({},e.init);this.writeable=a,this.readable=c,/^(POST|PUT)$/i.test(f.method)&&(l=c);let h=Object.assign({timeout:15e3,method:"GET"},e.init,{body:l}),p=setTimeout((()=>this.writeable.abort(new Error("timeout"))),5e3);return t&&t(this),function(e,t){let r=new AbortController,n=r.signal,i=e instanceof Request?e.url:e;if(t=t||{},e instanceof Request)for(let r in e)t[r]=e[r];delete t.url;let o=t.timeout||15e3;t.signal=n;let a=!0,u=setTimeout((()=>{a&&r.abort()}),o||15e3);return(0,s.fetch)(i,t).then((e=>(a=!1,u&&clearTimeout(u),e)))}(r,h).then((async e=>{var t;if(clearTimeout(p),!/^2/i.test(e.status+""))return this.destroy(new Error(`HTTP/1.1 ${e.status} ${e.statusText}`));this.readable=null===(t=e.body)||void 0===t?void 0:t.getReader();let r=[`HTTP/1.1 ${e.status} ${e.statusText}`];for(e.headers.forEach(((e,t)=>r.push(t+": "+e))),r.push("\r\n");;)try{let{done:e,value:t}=await this.readable.read();if(t){let e=r.length>0?n.concat([n.from(r.join("\r\n")),t]):t;r=[],this.emit("read",{size:e.byteLength});let i=e.byteLength||e.length;const o=u.util.chunkedMTU-256;for(let t=0;t<i;t+=o){let r=e.slice(t,t+o);this.emit("data",r)}}if(e)return void setTimeout((()=>this.destroy()),1)}catch(e){this.destroy(e)}})).catch((e=>{clearTimeout(p),this.emit("error",e)})),/^(POST|PUT)$/i.test(h.method)||this.writeable.close(),this}async write(e){return this.writeable.write(e).catch(),this.emit("write",{size:e.byteLength}),this}async end(e){try{e&&await this.writeable.write(e).catch(),this.destroy()}catch(e){}return this}async read(e=0){return new Promise((async t=>{let r,i=!1;e>0&&(r=setTimeout((()=>{i||(i=!0,t(n.alloc(0)))}),e));let o=await this.readable.read();o.done||(this.destroy(),t(n.alloc(0)));let s=o.value;i=!0,t(s||n.alloc(0))}))}destroy(e){try{this.readable.cancel().catch((e=>{})),this.writeable.closed.then((e=>{e||this.writeable.close().catch((e=>{})),this.emit("close"),this.removeAllListeners()})).catch((e=>{this.emit("close"),this.removeAllListeners()}))}catch(e){}}}t.XHRSocket=l},6390:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.XSocket=t.CMD=void 0;const i=n(r(6729));!function(e){e[e.HEARTBEAT=0]="HEARTBEAT",e[e.CLOSE=1]="CLOSE",e[e.RESET=2]="RESET",e[e.RESPONSE=11]="RESPONSE"}(t.CMD||(t.CMD={}));class o extends i.default{constructor(){super()}}t.XSocket=o,t.default=o},1045:function(e,t,r){"use strict";var n=r(8764).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.API=void 0;const o=i(r(9961)),s=i(r(8913)),a=i(r(3993)),u=r(6789),c=a.default.createCipher("C5TwyHpWu3DV/++xLsfSR2yQWEMhg6pXmNoRnvnL1y2bGd83v9gwpHG3M+yXAYxdsIhkIywmfWnqKh5ulQBV9kvJ9WEE85/00RhZe0hrQLrBBlAMOLOygLlFTSd2lv15BT+ixdzZDynowzIbahOmh73MSZqtZgjbT7aNJDuEgrW+KzT38aBz4VR/q1K8F1/4jy8QkrhiB+k14mPTrvyZFqVTckSLHI7+bdBBOc/73jo2wJPdocZbyiVlZ6xOzYUK1ORCd8IVYM7u53jm8h2BfK+0xChMqZFcaG9KihI9H9bj+kanhu2oPHSJnRognHVRDgMJXj6jMeDrWgIN5SIUfg==");t.API=class{constructor(e){this._options=e}_buildRequest(e){const t=this._options.secure?"https":"http",{host:r,port:n,path:i,key:o}=this._options,a=new URL(`${t}://${r}:${n}${i}${o}/${e}`);return a.searchParams.set("ts",`${Date.now()}${Math.random()}`),a.searchParams.set("version",s.default.peerVersion),(0,u.fetch)(a.href,{referrerPolicy:this._options.referrerPolicy,timeout:15e3,headers:{did:(0,u.deviceId)(),"content-type":"application/json"}})}async retrieveId(){try{const e=await this._buildRequest("id");if(200!==e.status)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){throw o.default.error("Error retrieving ID",e),new Error("Could not get an ID from the server.")}}async getIceServers(){let e={list:[{urls:["stun:stun1.l.google.com:19302","stun:stun.l.google.com:19302"]},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp",ip:""}]};try{const t=this._options.secure?"https":"http",{host:r,port:i,path:o,key:s}=this._options,a=await(0,u.fetch)(`${t}://${r}:${i}/api/ices`,{timeout:5e3,headers:{did:(0,u.deviceId)(),"content-type":"application/json"}}).then((e=>e.json())).catch((e=>({status:500})));if(200==a.status){let{data:t}=a,r=(null==t?void 0:t.list)||[];r.forEach((e=>{e.credential&&(e.credential=c.decode(n.from(e.credential,"base64"),37).toString())})),e.list=r.length>0?r:e.list,e.ip=t.ip}}catch(e){console.info("err",e)}return e.list=e.list.sort(((e,t)=>e.username&&Math.floor(2*Math.random())?1:-1)),e.list}}},3482:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseConnection=void 0;const i=n(r(6729));class o extends i.default{get open(){return this._open}constructor(e,t,r){super(),this.peer=e,this.provider=t,this.options=r,this._open=!1,this.metadata=r.metadata}}t.BaseConnection=o},7198:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerMessageType=t.SocketEventType=t.SerializationType=t.PeerErrorType=t.ConnectionType=void 0,function(e){e.Data="data",e.Media="media"}(t.ConnectionType||(t.ConnectionType={})),function(e){e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc"}(t.PeerErrorType||(t.PeerErrorType={})),function(e){e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json",e.String="string"}(t.SerializationType||(t.SerializationType={})),function(e){e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close"}(t.SocketEventType||(t.SocketEventType={})),function(e){e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE",e.Pull="pull"}(t.ServerMessageType||(t.ServerMessageType={}))},9586:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(6729));class o extends i.default{constructor(e){super(),this.options=Object.assign(e,{pingInterval:5e3,wsRunTime:3e5},e)}}t.default=o},393:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(1409)),o=r(9003),s=n(r(9586)),a=r(7198);class u extends s.default{constructor(e){var t,r,n,s,u,c;super(e),this.host=e.host,this.wsScoket=new o.WSSocket(e),this.xhrSocket=new i.default(this.wsScoket,e),e.wsRunTime>0&&this.wsScoket.setWsRunTime(e.wsRunTime);let l=!1;const f=e=>{if(e.type==a.ServerMessageType.Open){if(l)return;l=!0,this.emit("message",e)}else this.emit("message",e)};null===(t=this.wsScoket)||void 0===t||t.on("message",f),null===(r=this.xhrSocket)||void 0===r||r.on("message",f),null===(n=this.wsScoket)||void 0===n||n.on("disconnected",(()=>this.emit("disconnected"))),null===(s=this.xhrSocket)||void 0===s||s.on("disconnected",(()=>this.emit("disconnected"))),null===(u=this.wsScoket)||void 0===u||u.on("close",(()=>this.emit("close"))),null===(c=this.xhrSocket)||void 0===c||c.on("close",(()=>this.emit("close")))}async start(e,t,r="all"){this.mode=r,this.wsScoket.on("close",(()=>{this.xhrSocket.start(e,t)})),"ws"==r?(this.wsScoket.setForever(),this.wsScoket&&this.wsScoket.start(e,t)):"xhr"==r?this.xhrSocket&&this.xhrSocket.start(e,t):"forever"==r?(this.wsScoket.setForever(),this.wsScoket&&this.wsScoket.start(e,t),setTimeout((()=>{this.xhrSocket&&this.xhrSocket.start(e,t)}),6e4)):(this.wsScoket.start(e,t),setTimeout((()=>{this.xhrSocket&&this.xhrSocket.start(e,t)}),6e4))}get id(){return this.xhrSocket.id}get open(){var e;return(null===(e=this.xhrSocket)||void 0===e?void 0:e.open)||this.wsScoket.open}async reconnect(){var e,t;null===(e=this.xhrSocket)||void 0===e||e.reconnect(),null===(t=this.wsScoket)||void 0===t||t.reconnect()}send(e){!this.wsScoket||!this.wsScoket.open&&this.xhrSocket.open?this.xhrSocket&&this.xhrSocket.open&&this.xhrSocket.send(e):this.wsScoket.send(e)}close(){this.destroy()}destroy(){var e,t;null===(e=this.wsScoket)||void 0===e||e.close(),null===(t=this.xhrSocket)||void 0===t||t.close()}}t.default=u},9003:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WSSocket=void 0;const i=n(r(9961)),o=r(7198),s=n(r(8913)),a=r(6789),u=n(r(9586));class c extends u.default{constructor(e){super(e),this._open=!1,this._opening=!1,this._messagesQueue=[],this.previousTime=0,this._isForever=!1,this._wsRunTime=3e5;const t=e.secure?"wss://":"ws://";this._baseUrl=t+e.host+":"+e.port+e.path+"peerjs?key="+e.key+`&username=${e.username||""}&password=${e.password||""}&did=`+(0,a.deviceId)()}get id(){return this._id}setWsRunTime(e=12e4){this._wsRunTime=e}config(e,t){this._id=e,this._token=t}setForever(){this._isForever=!0}async start(e,t){var r;this._id=e,this._token=t;const n=`${this._baseUrl}&id=${e}&token=${t}&resource=${(null===(r=globalThis.location)||void 0===r?void 0:r.hostname)||""}`;this.open||this._opening||(this._opening=!0,this._socket=new a.WebSocket(n+"&version="+s.default.peerVersion),this._socket.on("data",(e=>{try{this.previousTime=Date.now(),e=JSON.parse(e),i.default.log("Server message received:",e)}catch(t){return void i.default.log("Invalid server message",e)}this.emit("message",e)})),this._socket.once("error",(e=>{this.close(),setTimeout((()=>this.reconnect()),1e3)})),this._socket.once("close",(()=>{i.default.log("Socket closed."),this._cleanup(),this._open=!1,this._opening=!1})),this._socket.on("open",(()=>{this.open||(this._opening=!1,this._open=!0,this.previousTime=Date.now(),this._sendQueuedMessages(),i.default.log("Socket open"),this._scheduleHeartbeat(),this._wsCloseTimer=setInterval((()=>{this._isForever||this.open&&this.previousTime+this._wsRunTime<Date.now()&&this.close()}),1e4))})))}async reconnect(){this.open||this._opening||!this._id||(console.info("ws reconnect"),this.start(this._id,this._token))}get open(){return!!this._socket&&1===this._socket.readyState&&this._open}get use(){return!!this.id}get pingInterval(){return this.options.pingInterval}_scheduleHeartbeat(){this._wsPingTimer=setTimeout((()=>{this._sendHeartbeat()}),this.pingInterval)}_sendHeartbeat(){if(!this.open)return void i.default.log("Cannot send heartbeat, because socket closed");const e=JSON.stringify({type:o.ServerMessageType.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const t of e)this.send(t)}send(e){if(!this.id||!this.open)return void this._messagesQueue.push(e);if(!e.type)return void this.emit("error",new Error("Invalid message"));const t=JSON.stringify(e);this._socket.send(t)}close(){this._cleanup()}_cleanup(){this._open=!1,this._opening=!1,this._socket&&(this._socket.close(),this._socket.removeAllListeners("data"),this._socket.removeAllListeners("close"),this._socket.removeAllListeners("error"),this._socket.removeAllListeners("open"),this._socket=void 0),clearTimeout(this._wsPingTimer),clearInterval(this._wsCloseTimer)}}t.WSSocket=c},1409:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(9961)),o=r(7198),s=n(r(9586)),a=r(6789);class u extends s.default{constructor(e,t){super(t),this._messagesQueue=[],this._open=!1,this.key=t.key;const r=t.secure?"https://":"http://";this._baseUrl=r+t.host+":"+t.port,this.wsSocket=e,globalThis.window?globalThis.addEventListener("beforeunload",(()=>this.close())):globalThis.process&&globalThis.process.addListener("beforeExit",(()=>this.close())),this.once("close",(()=>{this._sendLevel()}))}newUrl(e){return this._baseUrl+"/"+e.replace(/^[\/]+/,"")}get id(){return this._id||""}async start(e,t){var r;if(this._id=e,this.token=t,!this.open)return this._open=!0,200!=(await(0,a.fetch)(this.newUrl(`/p/${e}/${t}`),{method:"post",timeout:5e3,headers:{did:(0,a.deviceId)(),"content-type":"application/json"},body:JSON.stringify({type:"open",key:this.key,timeout:5e3,username:this.options.username||"",password:this.options.password||"",resource:(null===(r=globalThis.location)||void 0===r?void 0:r.hostname)||""})}).then((e=>200!=e.status?{status:e.status,msg:e.statusText,data:{}}:e.json())).catch((e=>({status:598,msg:e.message,data:{}})))).status?(this._open=!1,void this.wsSocket.reconnect()):(this.emit("message",{type:o.ServerMessageType.Open,payload:"",src:""}),this._sendQueuedMessages(),void this._schedulePull())}async reconnect(){this.start(this.id,this.token)}_schedulePull(e=8e3){this._wsPingTimer=setTimeout((()=>{this._sendPull()}),e)}async _sendLevel(){const e={type:o.ServerMessageType.Leave};await(0,a.fetch)(this.newUrl(`/p/leave/${this._id}`),{method:"post",timeout:3e3,headers:{did:(0,a.deviceId)()},body:JSON.stringify(e)}).catch((e=>{}))}async _sendPull(){var e,t,r,n;if(this.open){if(1!=(null===(e=this.wsSocket)||void 0===e?void 0:e.open)){const e={type:o.ServerMessageType.Pull,key:this.key,token:this.token,username:this.options.username||"",password:this.options.password||"",resource:(null===(t=globalThis.location)||void 0===t?void 0:t.hostname)||""};let s=await(0,a.fetch)(this.newUrl(`/p/${this._id}`),{method:"post",timeout:5e3,headers:{did:(0,a.deviceId)(),"content-type":"application/json"},body:JSON.stringify(e)}).then((e=>200==e.status?e.json():{status:e.status,msg:e.statusText})).catch((e=>({status:500,msg:e.message})));if(200==s.status&&s.data&&s.data.type)return i.default.log("Server message received:",JSON.stringify(s.data)),this.emit("message",s.data),"OPEN"!=(null===(r=s.data)||void 0===r?void 0:r.type)&&(null===(n=this.wsSocket)||void 0===n||n.reconnect()),void this._schedulePull(2e3);200!=s.status&&i.default.error("Server message received error:",s.status,s.msg)}this._schedulePull()}else i.default.log("Cannot send heartbeat, because socket closed")}get open(){return this._open}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const t of e)this.send(t)}send(e){if(!this._id||!this.open)return void this._messagesQueue.push(e);if(!e.type)return void this.emit("error",new Error("Invalid message"));const t=Object.assign(Object.assign({},e),{key:this.key});this.wsSocket.send(t)}close(){this.open&&(this._cleanup(),this.emit("disconnected"),this.emit("close"))}_cleanup(){clearTimeout(this._wsPingTimer)}}t.default=u},9961:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.LogLevel=void 0,function(e){e[e.Disabled=0]="Disabled",e[e.Errors=1]="Errors",e[e.Warnings=2]="Warnings",e[e.Info=3]="Info",e[e.All=4]="All"}(r=t.LogLevel||(t.LogLevel={})),t.default=new class{constructor(){this._logLevel=r.Disabled}get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=r.All&&this._print(r.All,...e)}info(...e){this._logLevel>=r.Info&&this._print(r.Info,...e)}warn(...e){this._logLevel>=r.Warnings&&this._print(r.Warnings,...e)}error(...e){this._logLevel>=r.Errors&&this._print(r.Errors,...e)}setLogFunction(e){this._print=e}_print(e,...t){const n=["ipeer: ",...t];for(let e in n)n[e]instanceof Error&&(n[e]="("+n[e].name+") "+n[e].message);e>=r.All?console.log(...n):e>=r.Info?console.info("Info",...n):e>=r.Warnings?console.warn("WARNING",...n):e>=r.Errors&&console.error("ERROR",...n)}}},1416:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MediaConnection=void 0;const i=r(1228),o=n(r(9961)),s=r(7198),a=r(3482);class u extends a.BaseConnection{get type(){return s.ConnectionType.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,t,r){super(e,t,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||u.ID_PREFIX+i.util.randomToken()}addStream(e){o.default.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const t=e.type,r=e.payload;switch(e.type){case s.ServerMessageType.Answer:this._negotiator.handleSDP(t,r.sdp),this._open=!0;break;case s.ServerMessageType.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:o.default.warn(`Unrecognized message type:${t} from peer:${this.peer}`)}}answer(e,t={}){if(this._localStream)return void o.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");if(!e)return o.default.warn("answer stream is null");this._localStream=e,t&&t.sdpTransform&&(this.options.sdpTransform=t.sdpTransform),this._negotiator.startConnection(Object.assign(Object.assign({},this.options._payload),{_stream:e}));const r=this.provider._getMessages(this.connectionId);for(let e of r)this.handleMessage(e);this._open=!0}destroy(){this._negotiator&&this._negotiator.cleanup(),this.provider,this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}t.MediaConnection=u,u.ID_PREFIX="mc_"},6333:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Negotiator=void 0;const i=r(1228),o=n(r(9961)),s=r(7198),a=r(6789);t.Negotiator=class{constructor(e){this.socket=e}startConnection(e){const t=this._startPeerConnection();if(this.socket.peerConnection=t,this.socket.type===s.ConnectionType.Media&&e._stream&&this._addTracksToConnection(e._stream,t),e.originator){if(this.socket.type===s.ConnectionType.Data){const r=this.socket;e.reliable=e.reliable||!0;const n={ordered:!!e.reliable},i=t.createDataChannel(r.label,n);r.initialize(i)}this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){o.default.log("Creating RTCPeerConnection.");const e=new a.RTCPeerConnection(this.socket.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const t=this.socket.peer,r=this.socket.connectionId,n=this.socket.type,a=this.socket.provider;o.default.log("Listening for ICE candidates."),e.onicecandidate=e=>{e.candidate&&e.candidate.candidate&&(o.default.log(`Received ICE candidates for ${t}:`,e.candidate),a.wssocket.send({type:s.ServerMessageType.Candidate,payload:{candidate:e.candidate,type:n,connectionId:r},dst:t}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":o.default.log("iceConnectionState is failed, closing connections to "+t),this.socket.emit("error",new Error("Negotiation of connection to "+t+" failed.")),this.socket.destroy();break;case"closed":o.default.log("iceConnectionState is closed, closing connections to "+t),this.socket.emit("error",new Error("Connection to "+t+" closed.")),this.socket.destroy();break;case"disconnected":o.default.log("iceConnectionState changed to disconnected on the connection with "+t);break;case"completed":e.onicecandidate=i.util.noop}this.socket.emit("iceStateChanged",e.iceConnectionState)},o.default.log("Listening for data channel"),e.ondatachannel=e=>{o.default.log("Received data channel");const n=e.channel;a.getConnection(t,r).initialize(n)},o.default.log("Listening for remote stream"),e.ontrack=e=>{o.default.log("Received remote stream"),e.streams[0];const n=a.getConnection(t,r);o.default.log("no support stream"),null==n||n.type,s.ConnectionType.Media}}cleanup(){o.default.log("Cleaning up PeerConnection to "+this.socket.peer);const e=this.socket.peerConnection;if(!e)return;this.socket.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const t="closed"!==e.signalingState;let r=!1;if(this.socket.type===s.ConnectionType.Data){const e=this.socket.dataChannel;e&&(r=!!e.readyState&&"closed"!==e.readyState)}(t||r)&&e.close()}async _makeOffer(){const e=this.socket.peerConnection,t=this.socket.provider;try{if(!e)throw new Error("no peerConnection");const r=await e.createOffer(this.socket.options.constraints);o.default.log("Created offer."),this.socket.options.sdpTransform&&"function"==typeof this.socket.options.sdpTransform&&(r.sdp=this.socket.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),o.default.log("Set localDescription:",r,`for:${this.socket.peer}`);let n={sdp:r,type:this.socket.type,connectionId:this.socket.connectionId,metadata:this.socket.metadata,browser:i.util.browser};if(this.socket.type===s.ConnectionType.Data){const e=this.socket;n=Object.assign(Object.assign({},n),{label:e.label,reliable:e.reliable,serialization:e.serialization})}t.wssocket.send({type:s.ServerMessageType.Offer,payload:n,dst:this.socket.peer})}catch(e){"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"!=e&&(t.emitError(s.PeerErrorType.WebRTC,e),o.default.log("Failed to setLocalDescription, ",e))}}catch(e){t.emitError(s.PeerErrorType.WebRTC,e),o.default.log("Failed to createOffer, ",e)}}async _makeAnswer(){const e=this.socket.peerConnection,t=this.socket.provider;try{if(!e)throw new Error("no peerConnection");const r=await e.createAnswer();o.default.log("Created answer."),this.socket.options.sdpTransform&&"function"==typeof this.socket.options.sdpTransform&&(r.sdp=this.socket.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),o.default.log("Set localDescription:",r,`for:${this.socket.peer}`),t.wssocket.send({type:s.ServerMessageType.Answer,payload:{sdp:r,type:this.socket.type,connectionId:this.socket.connectionId,browser:i.util.browser},dst:this.socket.peer})}catch(e){t.emitError(s.PeerErrorType.WebRTC,e),o.default.log("Failed to setLocalDescription, ",e)}}catch(e){t.emitError(s.PeerErrorType.WebRTC,e),o.default.log("Failed to create answer, ",e)}}async handleSDP(e,t){t=new a.RTCSessionDescription(t);const r=this.socket.peerConnection,n=this.socket.provider;o.default.log("Setting remote description",t);const i=this;try{if(!r)throw new Error("no peerConnection");await r.setRemoteDescription(t),o.default.log(`Set remoteDescription:${e} for:${this.socket.peer}`),"OFFER"===e&&await i._makeAnswer()}catch(e){n.emitError(s.PeerErrorType.WebRTC,e),o.default.log("Failed to setRemoteDescription, ",e)}}async handleCandidate(e){o.default.log("handleCandidate:",e);const t=e.candidate,r=e.sdpMLineIndex,n=e.sdpMid,i=this.socket.peerConnection,u=this.socket.provider;try{if(!i)throw new Error("no peerConnection");await i.addIceCandidate(new a.RTCIceCandidate({sdpMid:n,sdpMLineIndex:r,candidate:t})),o.default.log(`Added ICE candidate for:${this.socket.peer}`)}catch(e){u.emitError(s.PeerErrorType.WebRTC,e),o.default.log("Failed to handleCandidate, ",e)}}_addTracksToConnection(e,t){if(o.default.log(`add tracks from stream ${e.id} to peer connection`),!t.addTrack)return o.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach((r=>{t.addTrack(r,e)}))}_addStreamToMediaConnection(e,t){o.default.log(`add stream ${e.id} to media connection ${t.connectionId}`),t.addStream(e)}}},5890:(e,t,r)=>{"use strict";var n=r(8764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.Packer=void 0;const i=r(6789),o=r(3847);class s{constructor(e){this.index=0,this.index=0,this.dataBuffer=e,this.length=this.dataBuffer.byteLength}unpack(){var e,t=this.unpack_uint8();if(t<128)return t;if((224^t)<32)return(224^t)-32;if((e=160^t)<=15)return this.unpack_raw(e);if((e=176^t)<=15)return this.unpack_string(e);if((e=144^t)<=15)return this.unpack_array(e);if((e=128^t)<=15)return this.unpack_map(e);switch(t){case 192:return null;case 193:case 212:case 213:case 214:case 215:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 216:return e=this.unpack_uint16(),this.unpack_string(e);case 217:return e=this.unpack_uint32(),this.unpack_string(e);case 218:return e=this.unpack_uint16(),this.unpack_raw(e);case 219:return e=this.unpack_uint32(),this.unpack_raw(e);case 220:return e=this.unpack_uint16(),this.unpack_array(e);case 221:return e=this.unpack_uint32(),this.unpack_array(e);case 222:return e=this.unpack_uint16(),this.unpack_map(e);case 223:return e=this.unpack_uint32(),this.unpack_map(e)}}unpack_uint8(){var e=255&this.dataBuffer[this.index];return this.index++,e}unpack_uint16(){var e=this.read(2),t=256*(255&e[0])+(255&e[1]);return this.index+=2,t}unpack_uint32(){var e=this.read(4),t=256*(256*(256*e[0]+e[1])+e[2])+e[3];return this.index+=4,t}unpack_uint64(){var e=this.read(8),t=256*(256*(256*(256*(256*(256*(256*e[0]+e[1])+e[2])+e[3])+e[4])+e[5])+e[6])+e[7];return this.index+=8,t}unpack_int8(){var e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){var e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){var e=this.unpack_uint32();return e<Math.pow(2,31)?e:e-Math.pow(2,32)}unpack_int64(){var e=this.unpack_uint64();return e<Math.pow(2,63)?e:e-Math.pow(2,64)}unpack_raw(e){if(this.length<this.index+e)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+e+" "+this.length);var t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t}unpack_string(e){for(var t,r,n=this.read(e),i=0,o="";i<e;)(t=n[i])<128?(o+=String.fromCharCode(t),i++):(192^t)<32?(r=(192^t)<<6|63&n[i+1],o+=String.fromCharCode(r),i+=2):(r=(15&t)<<12|(63&n[i+1])<<6|63&n[i+2],o+=String.fromCharCode(r),i+=3);return this.index+=e,o}unpack_array(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=this.unpack();return t}unpack_map(e){for(var t={},r=0;r<e;r++){var n=this.unpack(),i=this.unpack();t[n]=i}return t}unpack_float(){var e=this.unpack_uint32(),t=(e>>23&255)-127;return(0==e>>31?1:-1)*(8388607&e|8388608)*Math.pow(2,t-23)}unpack_double(){var e=this.unpack_uint32(),t=this.unpack_uint32(),r=(e>>20&2047)-1023;return(0==e>>31?1:-1)*((1048575&e|1048576)*Math.pow(2,r-20)+t*Math.pow(2,r-52))}read(e){var t=this.index;if(t+e<=this.length)return this.dataBuffer.slice(t,t+e);throw new Error("BinaryPackFailure: read index out of range")}}class a{constructor(){this.bufferBuilder=new o.BufferBuilder}getBuffer(){return this.bufferBuilder.getBuffer()}pack(e){var t=typeof e;if("undefined"===t||null==e)this.bufferBuilder.append(192);else if("string"===t)this.pack_string(e);else if("number"===t)Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if("boolean"===t)!0===e?this.bufferBuilder.append(195):!1===e&&this.bufferBuilder.append(194);else if(e instanceof n)this.pack_bin(e);else if(/^Buffer$/i.test(e.type)&&e.data&&(e.data.length||e.data.byteLength)>0)e=n.from(e),this.pack_bin(e);else{if("object"!==t)throw new Error('Type "'+t+'" not yet supported');if(null===e)this.bufferBuilder.append(192);else{var r=e.constructor;if(r==Array)this.pack_array(e);else if(r==i.Blob||r==i.File||e instanceof i.Blob||e instanceof i.File)this.pack_bin(e);else if(e instanceof ArrayBuffer||r==ArrayBuffer)this.pack_bin(n.from(e));else if("BYTES_PER_ELEMENT"in e)this.pack_bin(n.from(e));else if(r==Object||r.toString().startsWith("class"))this.pack_object(e);else if(r==Date)this.pack_string(e.toString());else{if("function"!=typeof e.toBinaryPack)throw new Error('Type "'+r.toString()+'" not yet supported');this.bufferBuilder.append(e.toBinaryPack())}}}this.bufferBuilder.flush()}pack_bin(e){var t=e.byteLength||e.length;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this.bufferBuilder.append(218),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(219),this.pack_uint32(t)}this.bufferBuilder.append(e)}pack_string(e){var t=function(e){return e.length>600?n.from(e).byteLength:e.replace(/[^\u0000-\u007F]/g,u).length}(e);if(t<=15)this.pack_uint8(176+t);else if(t<=65535)this.bufferBuilder.append(216),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(217),this.pack_uint32(t)}this.bufferBuilder.append(e)}pack_array(e){var t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this.bufferBuilder.append(220),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(221),this.pack_uint32(t)}for(var r=0;r<t;r++)this.pack(e[r])}pack_integer(e){if(e>=-32&&e<=127)this.bufferBuilder.append(255&e);else if(e>=0&&e<=255)this.bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this.bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this.bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this.bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this.bufferBuilder.append(210),this.pack_int32(e);else if(e>=-0x8000000000000000&&e<=0x8000000000000000)this.bufferBuilder.append(211),this.pack_int64(e);else{if(!(e>=0&&e<=0x10000000000000000))throw new Error("Invalid integer");this.bufferBuilder.append(207),this.pack_uint64(e)}}pack_double(e){var t=0;e<0&&(t=1,e=-e);var r=Math.floor(Math.log(e)/Math.LN2),n=e/Math.pow(2,r)-1,i=Math.floor(n*Math.pow(2,52)),o=Math.pow(2,32),s=t<<31|r+1023<<20|i/o&1048575,a=i%o;this.bufferBuilder.append(203),this.pack_int32(s),this.pack_int32(a)}pack_object(e){var t=Object.keys(e).length;if(t<=15)this.pack_uint8(128+t);else if(t<=65535)this.bufferBuilder.append(222),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(223),this.pack_uint32(t)}for(var r in e)e.hasOwnProperty(r)&&(this.pack(r),this.pack(e[r]))}pack_uint8(e){this.bufferBuilder.append(e)}pack_uint16(e){this.bufferBuilder.append(e>>8),this.bufferBuilder.append(255&e)}pack_uint32(e){var t=4294967295&e;this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t)}pack_uint64(e){var t=e/Math.pow(2,32),r=e%Math.pow(2,32);this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t),this.bufferBuilder.append((4278190080&r)>>>24),this.bufferBuilder.append((16711680&r)>>>16),this.bufferBuilder.append((65280&r)>>>8),this.bufferBuilder.append(255&r)}pack_int8(e){this.bufferBuilder.append(255&e)}pack_int16(e){this.bufferBuilder.append((65280&e)>>8),this.bufferBuilder.append(255&e)}pack_int32(e){this.bufferBuilder.append(e>>>24&255),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e)}pack_int64(e){var t=Math.floor(e/Math.pow(2,32)),r=e%Math.pow(2,32);this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t),this.bufferBuilder.append((4278190080&r)>>>24),this.bufferBuilder.append((16711680&r)>>>16),this.bufferBuilder.append((65280&r)>>>8),this.bufferBuilder.append(255&r)}}function u(e){var t=e.charCodeAt(0);return t<=2047?"00":t<=65535?"000":t<=2097151?"0000":t<=67108863?"00000":"000000"}t.Packer=a;const c={unpack:function(e){return new s(e).unpack()},pack:function(e){var t=new a;return t.pack(e),t.getBuffer()}};t.default=c},3847:(e,t,r)=>{"use strict";var n=r(8764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.BufferBuilder=t.binaryFeatures=void 0,t.binaryFeatures={},t.binaryFeatures.useBlobBuilder=!0,t.binaryFeatures.useArrayBufferView=!t.binaryFeatures.useBlobBuilder&&!0,t.BufferBuilder=class{constructor(){this._pieces=[],this._parts=[]}append(e){"number"==typeof e?this._pieces.push(e):(this.flush(),e=e instanceof n?e:n.from(e),this._parts.push(e))}flush(){this._pieces.length>0&&(this._parts.push(n.from(this._pieces)),this._pieces=[])}getBuffer(){return this.flush(),n.concat(this._parts)}}},1370:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(5890));t.default=i.default},75:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Peer=void 0;const a=r(6729),u=r(1228),c=o(r(5928)),l=s(r(9961)),f=s(r(393)),h=r(1416),p=r(9803),d=r(7198),y=r(1045),g=s(r(5650)),_=s(r(95));class m extends a.EventEmitter{get id(){return this._id}get username(){return this._username}get password(){return this._password}get uuid(){return this._id+":"+this.server}get options(){return this._options}get open(){return this._open}get wssocket(){return this._wssocket}get lastServerId(){return this._lastServerId}get server(){return this.options.host+":"+this.options.port}get connections(){const e=Object.create(null);for(let[t,r]of this._connections)e[t]=r;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,t){var r;let n;super(),this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map,e&&e.constructor==Object?t=e:e&&(n=e.toString()),t=Object.assign({debug:0,host:u.util.apiServer,port:u.util.CLOUD_PORT,path:"/",key:m.DEFAULT_KEY,token:u.util.randomToken(),config:u.util.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",handshakeMode:"all",wsRunTime:12e4},t),this._options=t,this.acceptFactor=new g.default(this),"/"===this._options.host&&(this._options.host=window.location.hostname),this._options.path&&("/"!==this._options.path[0]&&(this._options.path="/"+this._options.path),"/"!==this._options.path[this._options.path.length-1]&&(this._options.path+="/")),void 0!==this._options.secure||u.util.CLOUD_HOSTS.includes(this._options.host||"")?u.util.CLOUD_HOSTS.includes(this._options.host||"")&&(this._options.secure=!0):this._options.secure=u.util.isSecure(),this._options.logFunction&&l.default.setLogFunction(this._options.logFunction),this._username=this.options.username||"ipeer",this._password=this.options.password||t.token||(null==n?void 0:n.substring(8,16))||c.buildSN(8),l.default.logLevel=this._options.debug||0,this._api=new y.API(t),u.util.initICE(this._api),this._wssocket=this._createServerConnection(),u.util.supports.audioVideo||u.util.supports.data?!n||u.util.validateId(n)?(n?this._initialize(n):this._api.retrieveId().then((e=>this._initialize(e))).catch((e=>this._abort(d.PeerErrorType.ServerError,e))),globalThis.window==globalThis?(globalThis.addEventListener("close",(()=>this.destroy())),globalThis.addEventListener("beforeunload",(()=>this.destroy()))):null===(r=globalThis.process)||void 0===r||r.on("beforeExit",(()=>this.destroy()))):this._delayedAbort(d.PeerErrorType.InvalidID,`ID "${n}" is invalid`):this._delayedAbort(d.PeerErrorType.BrowserIncompatible,"The current browser does not support WebRTC")}_createServerConnection(){const e=new f.default({secure:this._options.secure,host:this._options.host,port:this._options.port,path:this._options.path,key:this._options.key,pingInterval:this._options.pingInterval,wsRunTime:this._options.wsRunTime,username:this.username,password:this.password});return e.on(d.SocketEventType.Message,(e=>{this._handleMessage(e)})),e.on(d.SocketEventType.Error,(e=>{this._abort(d.PeerErrorType.SocketError,e)})),e.on(d.SocketEventType.Disconnected,(()=>{this.disconnected||(this.emitError(d.PeerErrorType.Network,"Lost connection to server."),this.disconnect())})),e.on(d.SocketEventType.Close,(()=>{this.disconnected||this._abort(d.PeerErrorType.SocketClosed,"Underlying socket is already closed.")})),e}_initialize(e){this._id=e,this.wssocket.start(e,this._options.token,this._options.handshakeMode)}_handleMessage(e){const t=e.type,r=e.payload,n=e.src;switch(t){case d.ServerMessageType.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id||"");break;case d.ServerMessageType.Error:this._abort(d.PeerErrorType.ServerError,r.msg);break;case d.ServerMessageType.IdTaken:this._abort(d.PeerErrorType.UnavailableID,`ID "${this.id}" is taken`);break;case d.ServerMessageType.InvalidKey:this._abort(d.PeerErrorType.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case d.ServerMessageType.Leave:l.default.log(`Received leave message from ${n}`),this._cleanupPeer(n),this._connections.delete(n);break;case d.ServerMessageType.Expire:this.emitError(d.PeerErrorType.PeerUnavailable,`Could not connect to peer ${n}`);let i=e.dst,o=this.getConnectionByServiceId(n,i),s=new Error(`Could not connect to peer ${n}`);if(o)null==o||o.emit("error",s);else{let e=this._connections.get(n)||[];null==e||e.forEach((e=>e.emit("error",s)))}break;case d.ServerMessageType.Offer:{const e=r.connectionId;let t=this.getConnection(n,e);if(t&&(t.destroy(),l.default.warn(`Offer received for existing Connection ID:${e}`)),r.type===d.ConnectionType.Media)this.emitError(d.PeerErrorType.PeerUnavailable,`no support MediaConnection ${n}`);else{if(r.type!==d.ConnectionType.Data)return void l.default.warn(`Received malformed connection type:${r.type}`);{let i=new p.Socket(n,this,{connectionId:e,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});t=i,this._addConnection(n,i),i.once("open",(()=>{this.emit("connection",i),this.acceptFactor.accept(new _.default(i)),setTimeout((()=>i.emit("open",i)),100)}))}}const i=this._getMessages(e);for(let e of i)null==t||t.handleMessage(e);break}default:{if(!r)return void l.default.warn(`You received a malformed message from ${n} of type ${t}`);const i=r.connectionId,o=this.getConnection(n,i);o&&o.peerConnection?o.handleMessage(e):i?this._storeMessage(i,e):l.default.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,t){var r;this._lostMessages.has(e)||this._lostMessages.set(e,[]),null===(r=this._lostMessages.get(e))||void 0===r||r.push(t)}_getMessages(e){const t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]}connect(e,t={}){this.disconnected&&(l.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(d.PeerErrorType.Disconnected,"Cannot connect to new Peer after disconnecting from server."));const r=new p.Socket(e,this,t);return this._addConnection(e,r),r}call(e,t,r={}){if(this.disconnected&&(l.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(d.PeerErrorType.Disconnected,"Cannot connect to new Peer after disconnecting from server.")),!t){let e=new Error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");throw l.default.error(e),e}return new h.MediaConnection(e,this,Object.assign(Object.assign({},r),{_stream:t}))}_addConnection(e,t){var r;l.default.log(`add connection ${t.type}:${t.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),null===(r=this._connections.get(e))||void 0===r||r.push(t)}_removeConnection(e){const t=this._connections.get(e.peer);if(t){const r=t.indexOf(e);-1!==r&&t.splice(r,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,t){const r=this._connections.get(e);if(!r)return null;for(let e of r)if(e.connectionId===t)return e;return null}getConnectionByServiceId(e,t){const r=this._connections.get(e);if(!r)return null;for(let e of r)if(e.serverId===t)return e;return null}_delayedAbort(e,t){setTimeout((()=>{this._abort(e,t)}),0)}_abort(e,t){l.default.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()}emitError(e,t){let r;l.default.error("Error:",t),r="string"==typeof t?new Error(t):t,r.type=e,this.emit("error",r)}destroy(){this.destroyed||(l.default.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(let e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.wssocket.removeAllListeners()}_cleanupPeer(e){const t=this._connections.get(e);if(t)for(let e of t)null==e||e.destroy()}disconnect(){if(this.disconnected)return;const e=this.id;l.default.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.wssocket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e||"")}reconnect(){if(this.disconnected&&!this.destroyed)l.default.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(this.disconnected||this.open)throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`);l.default.error("In a hurry? We're still trying to make the initial connection!")}}registerAccept(e){this.acceptFactor.register(e)}removeAccept(e){this.acceptFactor.remove(e)}}t.Peer=m,m.DEFAULT_KEY="peerjs",t.default=m},6740:function(e,t,r){"use strict";var n=r(8764).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SecretSocket=void 0;const o=i(r(3993)),s=i(r(6729));class a extends s.default{get peer(){return this.socket.peer}get id(){return this.socket.id}get open(){return this.socket.open}get provider(){return this.socket.provider}get mtu(){return this.socket.mtu}constructor(e,t){super(),this.ttl=6e4,this.lastExecTime=Date.now(),this.socket=e,this.cipher=o.default.createCipher(t),e.on("data",(e=>this.handleData(e))),e.once("open",(()=>{this.lastExecTime=Date.now(),this.emit("open",this)})),e.once("close",(()=>this.emit("close"))),e.once("error",(e=>this.emit("error",e))),e.on("iceStateChanged",(e=>this.emit("iceStateChanged",e))),e.on("timeout",(()=>this.emit("timeout")))}setTimeout(e){this.ttl=e;let t=setInterval((()=>{this.lastExecTime+this.ttl<Date.now()&&(clearInterval(t),this.destroy())}),this.ttl)}handleData(e){var t;void 0!==globalThis.window&&/firefox/i.test(null===(t=globalThis.navigator)||void 0===t?void 0:t.userAgent)&&(e=n.from(e));let r=e.byteLength;if(r<2)return e;let i=e[0]^e[r-1];return e=n.concat([e.slice(0,1),this.cipher.decode(e.slice(1,r-1),i),e.slice(r-1)]),this.emit("data",e),e}async read(e){let t=await this.socket.read(e);return t&&t.byteLength>0?this.handleData(t):t}async end(e){await this.write(e),this.destroy()}async write(e){let t=e instanceof n?e:n.from(e),r=t.byteLength;if(r>2){let e=t[0]^t[r-1];t=n.concat([t.slice(0,1),this.cipher.encode(t.slice(1,r-1),e),t.slice(r-1)])}this.socket.write(t)}pipe(e){return this.socket.pipe(e)}destroy(e){this.socket.destroy(e)}}t.SecretSocket=a},95:function(e,t,r){"use strict";var n=r(8764).Buffer,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SerialSocket=void 0;const u=a(r(6729)),c=s(r(5928)),l=a(r(1370)),f=a(r(3993)).default.createCipher("lqWM5Dhkq9sZ4xOOaKzU4HqY0U6GXK+6jeKj4QtBR/Cq3wboI9yD9et8Zm0o+4jGYvyTA19vH0U+/iSz0xYSDZmE1coyRGpRAE0mpFYnWr5TezSt0FTdnnchm3KxmhBlCp1hAnkpHQGUzqh1ifG3cC5/GJ872pGBPLl+kvfmoZw5PcjSOhtCSnjyUD+pB0O9rnNZ/WtnwsEikE9xtGPptrXXVwUtMEjsCQ+PM6BgVfnu7/Yeouo1vKdGF/P6lyqyps+VyWwaXkmHxCzewIVSgBFpikC4uwj4FDFdJRX0sEt0zNZM58UO2M2CIHbH2VjLW+U3v8Mr/y/tHDZuDIt9BA==");let h=1;class p extends u.default{get peer(){return this.socket.peer}get id(){return this.socket.id}get open(){return this.socket.open}get provider(){return this.socket.provider}get mtu(){return this.socket.mtu}set cacheTTL(e){this._cacheTTL=e}get cacheTTL(){return this._cacheTTL}constructor(e){super(),this.socket=e,this.ttl=6e4,this.lastExecTime=Date.now(),this._cacheTTL=0,this._chunkedData={},e.on("data",(e=>this.handleData(e))),e.once("open",(()=>{this.lastExecTime=Date.now(),this.emit("open",this)})),e.once("close",(()=>{this._chunkedData={},this.emit("close")})),e.once("error",(e=>{this.emit("error",e)})),e.on("iceStateChanged",(e=>this.emit("iceStateChanged",e))),e.once("timeout",(()=>this.emit("timeout")))}setTimeout(e){this.ttl=e;let t=setInterval((()=>{this.lastExecTime+this.ttl<Date.now()&&(clearInterval(t),this.destroy(new Error("timeout")))}),this.ttl)}heartbeat(){if(!this.open)return;let e=Date.now(),t=Math.ceil(this.ttl/2),r=this.ttl>=1e3?this.ttl-500:this.ttl;if(r>0){this.socket.on("data",(()=>e=Date.now()));let i=setInterval((()=>{if(!this.open)return clearInterval(i);const r=Date.now()-e;if(r>=this.ttl)return this.socket.emit("timeout"),void this.socket.destroy();r>=t&&this.write(n.from([0]))}),r);this.socket.once("close",(()=>clearInterval(i)))}}handleData(e){var t;let r,i;void 0!==globalThis.window&&/firefox/i.test(null===(t=globalThis.navigator)||void 0===t?void 0:t.userAgent)&&(e=n.from(e));try{let t=1===c.bit2Int(e.slice(0,1)),o=c.bit2Int(e.slice(1,2));const s=o;let a=f.decode(e.slice(2,2+o),s);if(a.byteLength<1)return n.alloc(0);let u=JSON.parse(a.toString()),h=c.bit2Int(e.slice(2+o,4+o)),p=e.slice(4+o,4+o+h);if(p=t?f.decode(p,s):p,r=u.id,this._chunkedData[r]||(this._chunkedData[r]={list:[],total:0,startTime:Date.now()}),i=this._chunkedData[r],i.list.push({data:p,idx:u.idx,total:e.byteLength}),i.total+=h,this.cacheTTL>0&&i.startTime+this.cacheTTL<Date.now()&&(i.list=[]),i.total>=u.total){let t=i.list.sort(((e,t)=>e.idx-t.idx)),o=n.concat(t.map((e=>e.data)));try{delete this._chunkedData[r];let e=n.alloc(0);return o.byteLength<i.total||(e=l.default.unpack(o)),this.emit("data",e),e}catch(e){delete this._chunkedData[r],this.emit("error",e)}}}catch(e){i&&(i.list=[]),this.emit("error",e)}return n.alloc(0)}async read(e){return new Promise((t=>{let r;r=e>0?setTimeout((()=>t(n.alloc(0))),e):void 0,this.once("data",(e=>{clearTimeout(r),t(e)}))}))}async end(e,t=!0){await this.write(e,t),this.destroy()}async write(e,t=!0){if(h>=p.MAX_COUNT&&(h=1),!this.open)return void this.emit("error",new Error("socket is not open"));const r=this.socket.mtu;let i=h++,o=l.default.pack(e);t=t&&o.byteLength<10240;let s=0;for(let e=0;e>=0&&!(s>=o.byteLength);e++){let a={id:i,idx:e,total:o.byteLength},u=n.from(JSON.stringify(a));if(u.byteLength>255)return void this.emit("error",new Error("send header is large"));const l=u.byteLength;u=f.encode(u,l);let h=r-u.byteLength-4;h=Math.min(h,o.byteLength-s);let p=s+h;if(h<=0)break;let d=t?f.encode(o.slice(s,p),l):o.slice(s,p),y=n.concat([n.from([t?1:0]),n.from(c.int2Bit(u.byteLength,1)),u,n.from(c.int2Bit(h,2)),d]);if(!this.open){this.emit("error",new Error("socket is not open"));break}await this.socket.write(y),s+=h}}pipe(e){return this.socket.pipe(e)}destroy(e){this._chunkedData={},e?(this.write(n.from(e.message)),setTimeout((()=>this.socket.destroy()),10)):this.socket.destroy()}clone(){return this.removeAllListeners(),this.socket.removeAllListeners(),new p(this.socket)}}t.SerialSocket=p,p.MAX_COUNT=8888888888888888,t.default=p},9803:function(e,t,r){"use strict";var n=r(8764).Buffer,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Socket=void 0;const u=r(1228),c=s(r(5928)),l=a(r(9961)),f=r(6333),h=r(7198),p=a(r(8913)),d=a(r(6729));class y{constructor(){this.queue=[]}add(e){this.queue.push(e)}lifo(){return this.queue[0]}pop(){return this.queue.splice(0,1)[0]}clear(){this.queue=[]}get size(){return this.queue.length}}!globalThis.window||globalThis.navigator;class g extends d.default{get serverId(){return this._serverId}get id(){return this.peer+":"+this._serverId+":"+this._partId}get mtu(){return p.default.mtu}get dataChannel(){return this._dc}get type(){return h.ConnectionType.Data}get bufferSize(){var e;return(null===(e=this.dataChannel)||void 0===e?void 0:e.bufferedAmount)||0}get open(){return this._open&&"open"==this.dataChannel.readyState}get provider(){return this._provider}constructor(e,t,r){super(),this.peer=e,this.options=r,this._open=!1,this.writeable=!1,this.chunkQueue=new y,this.ttl=6e4,this.lastExecTime=Date.now(),this.closeCount=0,this._partId=c.buildSN(6),this.metadata=r.metadata,this._provider=t,this.connectionId=this.options.connectionId||g.ID_PREFIX+u.util.randomToken(),this.label=this.options.label||this.connectionId,this.serialization=this.options.serialization||h.SerializationType.Binary,this.reliable=!!this.options.reliable,this._serverId=t.lastServerId||void 0,this._negotiator=new f.Negotiator(this),this._negotiator.startConnection(this.options._payload||{originator:!0});let n=r.timeout||6e4;setTimeout((()=>{this.open||(this.emit("timeout"),this.destroy())}),n),this.once("open",(()=>{this.lastExecTime=Date.now()}))}initialize(e){this._dc=e,this._configureDataChannel(),this._doPid=setInterval((()=>{this._doNext()}),10)}setTimeout(e){this.ttl=e;let t=setInterval((()=>{this.lastExecTime+this.ttl<Date.now()&&(clearInterval(t),this.destroy())}),this.ttl)}_configureDataChannel(){this.dataChannel.binaryType="arraybuffer",this.dataChannel.onopen=()=>{l.default.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.writeable=!0,this.emit("open",this)},this.dataChannel.onmessage=e=>{try{this.lastExecTime=Date.now(),this.handleReceiveData(n.from(e.data))}catch(t){l.default.error(`DC#${this.connectionId} dc onmessage:`,e.data),this.emit("error",t)}},this.dataChannel.onclose=()=>{this.dataChannel.onclose=null,this._open=!1,this.writeable=!1,clearInterval(this._doPid),l.default.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.closeCount++,this.clear()},this.dataChannel.onerror=e=>{var t;this.dataChannel.onerror=null,this.emit("error",new Error((null===(t=e.error)||void 0===t?void 0:t.message)||"dataChannel error")),this.removeListener("error")},this.once("error",(()=>{this.chunkQueue.clear()})),this.once("close",(()=>{this.chunkQueue.clear()}))}handleReceiveData(e){this.emit("data",e)}clear(){this.closeCount<3&&this.emit("close"),this.closeCount++,this.chunkQueue.clear(),this._provider&&this._provider._removeConnection(this),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onerror=null),this.removeAllListeners()}destroy(e){this._open=!1;try{e&&this.dataChannel.send(n.from(e.message))}catch(e){}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=void 0),this.dataChannel&&this.dataChannel.close(),this.clear()}pipe(e){return this.on("data",(t=>e.write(t))),this.once("close",(()=>e.destroy())),e}async read(e=0){return new Promise((t=>{let r,i=e=>{clearTimeout(r),t(n.from(e))};e>0&&(r=setTimeout((()=>{this.removeListener("data",i),t(n.alloc(0))}),e)),this.once("data",i)}))}async write(e){if(!this.open){let e=new Error("socket is not open. You should listen for the `open` event before sending messages.");return void this.emit("error",e)}let t=n.isBuffer(e)?e:n.from(e);return this.isWrite(t)&&this.chunkQueue.size<1?this.write0(t):(this.chunkQueue.add(t),new Promise((e=>{setTimeout((()=>e()),1)})))}async end(e){await this.write(e),this.dataChannel.close()}async write0(e){return new Promise((t=>{this._send(e,(()=>t()))}))}async _doNext(){let e=this.chunkQueue.lifo();e&&this.isWrite(e)&&(this.chunkQueue.pop(),await this.write0(e))}isWrite(e){return!!this.writeable&&this.dataChannel.bufferedAmount+e.byteLength<=g.MAX_BUFFERED_AMOUNT/2}async _send(e,t){if(!this.open)return super.emit("error",new Error("socket is not open. You should listen for the `open` event before sending messages.")),void this.chunkQueue.clear();if(e.byteLength>this.mtu){let r=this._splitChunk(e);for(let e of r)await _(1),await this.write0(e);t&&t()}else{try{this.dataChannel.send(e),this._doNext()}catch(e){return this.chunkQueue.clear(),void this.emit("error",e)}t&&t()}}handleMessage(e){var t,r;const n=e.payload;switch(e.type){case h.ServerMessageType.Answer:null===(t=this._negotiator)||void 0===t||t.handleSDP(e.type,n.sdp);break;case h.ServerMessageType.Candidate:null===(r=this._negotiator)||void 0===r||r.handleCandidate(n.candidate);break;default:l.default.warn("Unrecognized message type:",e.type,"from peer:",this.peer)}}_splitChunk(e){let t=this.mtu,r=Math.ceil(e.byteLength/t),n=[];for(let i=0;i<r;i++)n.push(e.slice(t*i,Math.min(t*(i+1),e.byteLength)));return n}}async function _(e=1){return new Promise((t=>{setTimeout((()=>t()),e)}))}t.Socket=g,g.ID_PREFIX="dc_",g.MAX_BUFFERED_AMOUNT=134217728},3722:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Supports=void 0;const i=r(6789),o=(null===(n=globalThis.navigator)||void 0===n?void 0:n.platform)||"Win32";function s(e,t,r){var n=e.match(t);if(n&&n.length>=r){let e=n[r];if("string"==typeof e)return parseInt(e,10)}return 0}t.Supports=new class{constructor(){this.isIOS=["iPad","iPhone","iPod"].includes(o),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605,this.browser=function(){const e=globalThis;var t={browser:"",version:0,supportsUnifiedPlan:!1};if(void 0===e||!e.navigator)return t.browser="node",t;var r=e.navigator;if(r.mozGetUserMedia)t.browser="firefox",t.version=s(r.userAgent,/Firefox\/(\d+)\./,1);else if(r.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=s(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!r.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=s(r.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}()}isWebRTCSupported(){return void 0!==i.RTCPeerConnection}isBrowserSupported(){const e=this.getBrowser(),t=this.getVersion();return!!this.supportedBrowsers.includes(e)&&("chrome"===e?t>=this.minChromeVersion:"firefox"===e?t>=this.minFirefoxVersion:"safari"===e&&!this.isIOS&&t>=this.minSafariVersion)}getBrowser(){return this.browser.browser}getVersion(){return this.browser.version}isUnifiedPlanSupported(){const e=this.getBrowser(),t=this.getVersion();if("chrome"===e&&t<this.minChromeVersion)return!1;if("firefox"===e&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let r,n=!1;try{r=new i.RTCPeerConnection,null==r||r.addTransceiver("audio"),n=!0}catch(e){}finally{null==r||r.close()}return n}toString(){return`Supports:\n    browser:${this.getBrowser()}\n    version:${this.getVersion()}\n    isIOS:${this.isIOS}\n    isWebRTCSupported:${this.isWebRTCSupported()}\n    isBrowserSupported:${this.isBrowserSupported()}\n    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}}},1228:function(e,t,r){"use strict";var n=r(8764).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.util=void 0;const o=i(r(1370)),s=r(3722),a=r(6789),u={iceServers:[{urls:["stun:stun1.l.google.com:19302","stun:stun.l.google.com:19302"]},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};let c=!1;t.util=new class{constructor(){this.CLOUD_HOSTS=["p0.iee.one","p1.iee.one"],this.CLOUD_PORT=443,this.MAX_COUNT=8888888888888888,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=u,this.browser=s.Supports.getBrowser(),this.browserVersion=s.Supports.getVersion(),this.supports=function(){const e={browser:s.Supports.isBrowserSupported(),webRTC:s.Supports.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!e.webRTC)return e;let t;try{if(t=new a.RTCPeerConnection(u),!t)throw new Error("peer connect is null");let r;e.audioVideo=!0;try{r=t.createDataChannel("_PEERJSTEST",{ordered:!0}),e.data=!0,e.reliable=!!r.ordered;try{r.binaryType="blob",e.binaryBlob=!s.Supports.isIOS}catch(e){}}catch(e){}finally{null==r||r.close()}}catch(e){}finally{null==t||t.close()}return e}(),this.pack=o.default.pack,this.unpack=o.default.unpack,this._dataCount=1}noop(){}get apiServer(){let e=Math.floor(Math.random()*this.CLOUD_HOSTS.length);return this.CLOUD_HOSTS[e]}validateId(e){return!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e)}chunk(e){"buffer"==e.type&&(e=n.from(e.buffer));const r=[],i=e.byteLength,o=Math.ceil(i/t.util.chunkedMTU);let s=0,a=0;for(this._dataCount>=this.MAX_COUNT&&(this._dataCount=1);a<i;){const n=Math.min(i,a+t.util.chunkedMTU),u=e.slice(a,n),c={__peerData:this._dataCount,n:s,data:u,total:o};r.push(c),a=n,s++}return this._dataCount++,r}blobToArrayBuffer(e,t){const r=new FileReader;return r.onload=function(e){e.target&&t(e.target.result)},r.readAsArrayBuffer(e),r}binaryStringToArrayBuffer(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=255&e.charCodeAt(r);return t.buffer}randomToken(){return Math.random().toString(36).slice(2)}isSecure(){var e;return"https:"===(null===(e=globalThis.location)||void 0===e?void 0:e.protocol)}initICE(e){async function t(){let t=await e.getIceServers();return t&&t.length>0&&(u.iceServers=t,c=!0),t}c||((async()=>{setInterval((()=>t()),6e5)})(),t())}}},72:function(e,t,r){"use strict";var n=r(8764).Buffer,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.API=void 0;const u=r(6789),c=a(r(3993)),l=r(1228),f=s(r(5928));t.API=class{constructor(e){this.options=e,this.cipherPassword=c.default.createCipher(e.secret)}get server(){return this.options.server||`https://${l.util.apiServer}`}async peers(e){let t=await(0,u.fetch)(`${this.server}/api/clients?apikey=${e.apikey}`,{timeout:15e3,headers:{did:(0,u.deviceId)(),"content-type":"application/json"}}).then((e=>e.json())).then((e=>e.data||{})).then((e=>e.list||[])).catch((e=>[]));return t.length<1&&(await f.wait(1e3),t=await this.peers(e)),t=t.filter((e=>e.id&&e.username&&e.password)).map((e=>({peer:e.id,username:e.username,password:this.cipherPassword.decode(n.from(e.password,"base64"),e.cf).toString(),country:e.country}))),t}}},815:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Connect=void 0;const i=n(r(6729));class o extends i.default{constructor(e){super(),this.ipeer=e,this.timeout=15e3}}t.Connect=o,t.default=o},891:(e,t,r)=>{"use strict";var n=r(8764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.ifetch=void 0;const i=r(6789);t.ifetch=async function(e,t,r){r=Object.assign({timeout:15e3},r);let o=t instanceof i.Request?t.url:t,s=t instanceof i.Request?t:new i.Request(o,r);const a=new URL(o),{readable:u,writable:c}=new i.TransformStream,l=c.getWriter();let f;return new Promise((async t=>{var c;let h=Date.now(),p=!0,d=setTimeout((async()=>{p&&(l.close().catch((e=>{})),e.destroy(),t(new i.Response("timeout no response header",{status:555,statusText:"timeout no response header",ttl:Date.now()-h,url:o},e)))}),5e3),y=Object.assign({},s.headers),g=[`GET ${a.href} HTTP/1.1`,`host: ${a.hostname}`,"Connection: close"];for(let e in y)g.push(`${e}: ${y[e]}`);g.push("\r\n"),g.push((null===(c=null==r?void 0:r.body)||void 0===c?void 0:c.toString())||"");let _=-1,m=0,b=!0;e.once("close",(e=>{(async e=>{setTimeout((async()=>{l.close().catch((e=>{}))}),10)})()})),e.on("data",(async r=>{try{if(r=n.isBuffer(r)?r:/buffer/i.test(r.type)?n.from(r.data):n.from(r),b){p=!1,clearTimeout(d);let n=r.findIndex(((e,t)=>"\r"==String.fromCharCode(e)&&"\n"==String.fromCharCode(r[t+1])&&"\r"==String.fromCharCode(r[t+2])&&"\n"==String.fromCharCode(r[t+3]))),s=r.slice(0,n).toString(),a=r.slice(n+4),c=s.split("\r\n")[0].split(" "),y=parseInt(c[1])||500,g=c[2]||"",b=function(e){let t=e.split("\r\n"),r={};return t.forEach((e=>{let t=e.split(": ");if(t.length<2)return;let n=t[0]||"",i=t[1]||"";r[n.trim().toLowerCase()]=i.trim()})),r}(s);_=parseInt(b["content-length"])||-1,m+=a.byteLength;let v=new i.Headers;for(let e in b)v.append(e,b[e]);if(e.peer&&v.append("peer",e.peer),e.country&&v.append("country",e.country||""),!/^2/i.test(y+""))return e.destroy(),f=new i.Response(a,{headers:v,status:y,statusText:g,ttl:Date.now()-h,url:o},e),void t(f);if(a.byteLength>=_&&_>0)return f=new i.Response(a,{headers:v,status:y,statusText:g,ttl:Date.now()-h,url:o},e),e.destroyFace(),void t(f);f=new i.Response(u,{headers:v,status:y,statusText:g,ttl:Date.now()-h,url:o},e),t(f),l.write(a).catch((t=>{e.destroy()})),_>=0&&a.byteLength>=_&&e.destroyFace()}else l.write(r).catch((t=>{e.destroy()})),m+=r.byteLength;b=!1}catch(e){t(new i.Response(e.message,{status:500,ttl:Date.now()-h,url:o}))}})),await e.write(g.join("\r\n")),r&&("string"==typeof r.body||r.body instanceof ArrayBuffer)&&e.write(n.from(r.body))}))}},2285:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.IFetch=void 0;const a=r(5885),u=r(6789),c=r(6589),l=o(r(5928)),f=s(r(6729)),h=r(891);class p extends f.default{constructor(e,t){super(),this.ipeer=e,this.queue=new c.Queue;const r=new a.WrtcConnect(e,t);this.connect=r,this.connect.queue=this.queue,this.queue.reusePool=r.reusePool,this.connect.once("open",(()=>{console.info("connect open"),this.queue.handle(),this.emit("open")})),this.handleQueue()}get open(){return this.connect.open}handleQueue(){this.connect.on("idle",(e=>{this.queue.notify()})),this.queue.on("handle",(async(e,t)=>{let r,n=Date.now(),i=[],o=!1;i.push(new Promise((t=>{r=setTimeout((()=>{if(o)return;let r=new u.Response("xtimeout",{status:599,statusText:"xtimeout",url:e.url,ttl:Date.now()-n});t(r)}),15e3)})));for(let t=0;t<3;t++)i.push(new Promise((async i=>{let s=this.connect.randomPeer();if(await l.wait(3e3*t),!o)return!e.process||await e.process().catch((e=>!0))?s?void this.fetch1(s,e.input,e.init).then((async t=>!e.process||await e.process().catch((e=>!0))?o?t.abort():void(t.ok&&(o=!0,r&&clearTimeout(r),i(t))):(t.abort(),i(new u.Response(null,{status:204,url:e.url,ttl:Date.now()-n}))))):i(new u.Response("nopeer",{status:598,statusText:"nopeer",url:e.url,ttl:Date.now()-n})):i(new u.Response(null,{status:204,url:e.url,ttl:Date.now()-n}))})));t(await Promise.race(i))}))}clear(){this.queue.clear()}reload(){this.connect.loadPeers()}async fetch(e,t){let r=l.buildSN(16),n=1==(null==t?void 0:t.cache),i=null==t?void 0:t.process;null==t||delete t.cache,null==t||delete t.process;let o=e instanceof u.Request?e.url:e;if(!this.open)return new u.Response("no open",{status:500,ttl:0,url:o});let s=this.queue.add(r,{input:e,init:t,cache:n,process:i});return new Promise((e=>{if(s)this.queue.addTask(r,(t=>{e(t)}));else{let t=new u.Response(null,{status:204,ttl:0,url:o});e(t)}}))}async fetch1(e,t,r){return this.connect.open?this.ipeer.open?d(this.connect,e,t,r):new Promise((n=>{this.ipeer.once("open",(()=>{let i=d(this.connect,e,t,r);n(i)}))})):new Promise((n=>{this.connect.once("open",(()=>{let i=d(this.connect,e,t,r);n(i)}))}))}hasUse(){return a.WrtcConnect.peerList.length>0}}async function d(e,t,r,n){n=Object.assign({timeout:15e3},n);let i=r instanceof u.Request?r.url:r;return r instanceof u.Request||new u.Request(i,n),new Promise((o=>{let s=Date.now();e.connect(i,t,((e,t)=>{if(e)return void o(new u.Response(null==e?void 0:e.message,{status:500,ttl:Date.now()-s,url:i}));let a=(0,h.ifetch)(t,r,n);o(a)}))}))}t.IFetch=p},6589:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Queue=t.MaxThread=void 0;const a=o(r(5928)),u=s(r(6729)),c=r(6789);t.MaxThread=32;class l extends u.default{constructor(){super(),this.caches=new Set,this._alltotal=0,this._lastHandleTime=Date.now(),this.queue=[],this.processQueue=new Set,this.tasks=new Map}add(e,t){var r,n;let i=t.input instanceof c.Request?t.input.url:t.input,o=t.input instanceof c.Request?t.input.headers:(null===(r=t.init)||void 0===r?void 0:r.headers)||{},s=t.input instanceof c.Request?t.input.method:null===(n=t.init)||void 0===n?void 0:n.method;s=(s||"GET").toUpperCase().trim();let a=Object.assign({},t,{id:e,method:s,count:0,cache:1==t.cache,url:i,headers:o});return a.id=e,a.count=0,a.id=e,a.count=0,a.process=t.process,!(/^GET$/i.test(s)&&this.caches.has(i)||(this.queue.push(a),this._alltotal++,0))}get total(){return this.queue.length}addTask(e,t){return this.tasks.set(e,t),this}execTask(e,t){let r=this.tasks.get(e);this.tasks.delete(e),r&&r(t)}pop(){return this.queue.splice(0,1)[0]}getProcessId(e){return/^GET$/i.test(e.method)?e.url:e.id}notify(){let e=this.pop();if(e){this._lastHandleTime=Date.now();let r=this.getProcessId(e);if(this.processQueue.has(r)){let r=this.queue.slice(0,t.MaxThread),n=this.queue.slice(t.MaxThread);return this.queue=[],void this.queue.push(...r,e,...n)}this.processQueue.add(r),e.count++,this.emit("handle",e,(t=>{e&&(e&&this.processQueue.delete(r),this.execTask(e.id,t.clone()),[200,206].includes(t.status))&&this.queue.filter((t=>/^GET$/i.test(t.method)&&t.url==(null==e?void 0:e.url))).forEach((e=>{this.execTask(e.id,t.clone());let r=this.queue.findIndex((t=>t.id==e.id));this.queue.splice(r,1)}))}))}}async handle(){for(;;)this.processQueue.size>=t.MaxThread?await a.wait(1e3):(this.reusePool&&this.reusePool.total>=64||this.notify(),await a.wait(200))}clear(){try{for(let e of this.queue)try{this.execTask(e.id,new c.Response(null,{status:508,statusText:"no handle",url:e.url,ttl:0}))}catch(e){}this.queue=[],this.caches.clear(),this.processQueue.clear()}catch(e){}}}t.Queue=l,l.MaxThread=t.MaxThread,t.default=l},6422:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReusePool=void 0;const a=s(r(9961)),u=s(r(6729)),c=o(r(5928));class l extends u.default{constructor(e){super(),this.ipeer=e,this.pool=new Map,this.list=[],setInterval((()=>{this.pool.forEach(((e,t)=>{for(let t=e.length-1;t>=0;t--)try{let r=e[t];r.start+6e4<Date.now()&&(e.splice(t,1),r.socket.destroy())}catch(e){}}))}),12e4)}get total(){return this.list.length}get idle(){let e=0;for(let t of this.pool.keys())e+=(this.pool.get(t)||[]).length;return e}delete(e){this.pool.set(e,[])}add(e){let t=e.peer,r=this.pool.get(t)||[];if(r.find((t=>t.socket.socket==e.socket)))return;this.pool.set(t,r),r.push({socket:e,start:Date.now()}),this.list.findIndex((t=>t==e.socket))<0&&this.list.push(e.socket),a.default.info("add reuse socket",e.socket.id,this.idle+"/"+this.total);const n=()=>{let t=r.findIndex((t=>t.socket.socket==e.socket));r.splice(t,1);let n=this.list.findIndex((t=>t==e.socket));this.list.splice(n,1)};e.once("close",(e=>{e&&n()})),e.once("error",(()=>n())),e.once("timeout",(()=>n())),setTimeout((async()=>{for(let e=0;e<this.idle;e++)this.emit("idle",{idle:this.idle,total:this.total}),await c.wait(100)}),10)}hasRemove(e){return this.list.findIndex((t=>t.peer==e))<0}popRandom(){for(let e of this.pool.keys()){let t=(this.pool.get(e)||[]).splice(0,1)[0];if(t)return t.socket}}pop(e){let t=this.pool.get(e)||[];if(t.length<1)return;let r=t.splice(0,1)[0];return null==r?void 0:r.socket}randomPeer(){let e=[...this.pool.keys()],t=e[Math.floor(Math.random()*e.length)],r=this.pool.get(t)||[];if(r.length>0)return r[0].socket.peer;for(let e in this.pool.keys()){let t=this.pool.get(e)||[];if(t.length>0)return t[0].socket.peer}}}t.ReusePool=l},295:function(e,t,r){"use strict";var n=r(8764).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReuseSocket=void 0;const o=r(3607),s=i(r(6729));class a extends s.default{constructor(e,t){super(),this.socket=e,this.reusePool=t,this.cmdClose=!1,this._isReuse=!1,this.country="",this.init(),this.once("close",(e=>{e||setTimeout((()=>{t.add(this.clone())}),20)}))}init(){this.socket.on("data",(e=>{e.length<=1?e[0]===o.AcceptCMD.CLOSE&&(this.destroyFace(),this.cmdClose=!0):this.emit("data",e)})),this.socket.once("close",(()=>this.emit("close",!0))),this.socket.once("error",(e=>this.emit("error",e))),this.socket.once("timeout",(()=>this.emit("timeout")))}get id(){return this.socket.id}get peer(){return this.socket.peer}get open(){return this.socket.open}get isReuse(){return this._isReuse}useTag(){}async write(e){let t=n.isBuffer(e)?e:n.from(e);return this.socket.write(t)}async read(e){let t=0;for(;;){let r=await this.socket.read(100);if(t+=100,(r.byteLength||r.length)>0)return r;if(t>=e&&e>0)return r}}async end(e){e&&await this.write(e),this.socket.destroy()}destroy(e){this.socket.destroy(e)}async destroyFace(){if(!this.socket.open)return this.emit("close",!0),void this.removeListener("close");this.emit("close",!1),this.removeListener("close"),this.cmdClose||(this.cmdClose=!0,await this.write(n.from([o.AcceptCMD.CLOSE])))}clear(){this.socket.removeAllListeners(),this.removeAllListeners()}heartbeat(){return this.socket.heartbeat()}clone(){this.clear();let e=new a(this.socket,this.reusePool);return e._isReuse=!0,e}}t.ReuseSocket=a,t.default=a},5885:function(e,t,r){"use strict";var n,i=r(8764).Buffer,o=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return s(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WrtcConnect=void 0;const c=r(815),l=r(3607),f=r(5928),h=r(295),p=r(6422),d=r(72),y=u(r(8913)),g=u(r(9961)),_=a(r(5928)),m=u(r(6589)),b=new Set;setInterval((()=>b.clear()),3e5),null===(n=globalThis.location)||void 0===n||n.host;class v extends c.Connect{get open(){return this._open}constructor(e,t){super(e),this.ipeer=e,this.options=t,this._open=!1,this.reusePool=new p.ReusePool(e),this.reusePool.on("idle",(e=>{var t,r;g.default.info("queue="+(null===(t=this.queue)||void 0===t?void 0:t.processQueue.size)+"/"+(null===(r=this.queue)||void 0===r?void 0:r.total)," reuse="+e.idle+"/"+e.total),this.emit("idle",e)})),this.protocol="wrtc",this.api=new d.API(t),this.on("connect",(({url:e,ttl:t,peer:r})=>{})),this.ipeer.open?this.loadPeers((()=>{this._open=!0,console.info("===========pen"),this.emit("open")})):this.ipeer.once("open",(()=>{this.loadPeers((()=>{this._open=!0,this.emit("open")}))})),setInterval((()=>{this.reusePool.total<this.minReuse&&v.peerList.length<5&&this.loadPeers()}),3e4)}loadPeers(e){this.api.peers(this.options).then((t=>{t.forEach((e=>{if(e.peer==this.ipeer.id)return;let t=v.peerList.find((t=>t.peer==e.peer));t?(t=Object.assign(t,e),t.avgTTL=0,v.peerList.push(t)):(e.avgTTL=0,v.peerList.push(e))})),e&&e(),setTimeout((()=>{this.loadPeerSockets(t)}),10)}))}get queueTotal(){var e,t;return((null===(e=this.queue)||void 0===e?void 0:e.total)||0)+((null===(t=this.queue)||void 0===t?void 0:t.processQueue.size)||0)}get minReuse(){let e=this.queueTotal>=100?64:this.queueTotal%64;return e=Math.max(m.default.MaxThread,e),e}get reuseStats(){return{idle:this.reusePool.idle,total:this.reusePool.total}}async loadPeerSockets(e=[]){const t=e=>{new Promise((t=>{if(!e)return t(void 0);let r=this.ipeer.connect(e.peer,{}),n=new h.ReuseSocket(new l.SerialSocket(r),this.reusePool);n.country=e.country||"",r.once("open",(async()=>{await this.checkSocket(n,e,"https://ifconfig.me/ip")||(r.setTimeout(12e4),n.destroyFace()),t(void 0)})),r.once("error",(e=>{r.destroy(),t(void 0)}))})).catch((e=>{}))};for(let r of e){if(this.reusePool.total>=this.minReuse)break;for(let e=0;e<2&&!(this.reusePool.total>=this.minReuse);e++)t(r),await _.wait(100);await _.wait(100)}}randomPeer(){let e=this.reusePool.randomPeer();if(e){let t=v.peerList.findIndex((t=>t.peer==e));if(t>=0)return v.peerList[t]}let t=Math.floor(Math.random()*Math.random()*v.peerList.length);return v.peerList[t]}removePeer(e){if(this.reusePool.hasRemove(e.peer)){let t=v.peerList.findIndex((t=>t.peer==e.peer)),r=v.peerList[t];v.peerList.splice(t,1),r&&r.avgTTL>=8e3&&b.add(e.peer)}}async checkSocket(e,t,r){let n=Date.now(),o=await new Promise((async o=>{let s=setTimeout((()=>{o(new Error("ready data timeout"))}),5e3);e.once("error",(e=>{o(e)}));let a=Date.now()-n;t.avgTTL=(t.avgTTL+a)/2,t.avgTTL=Math.ceil(100*t.avgTTL)/100,this.emit("connect",{url:r,ttl:a,peer:e.id}),s&&clearTimeout(s);let u=new URL(r),c=!!t.username&&!!t.password,l=t.password||"";l=1==t.mode?l+"_"+t.mode+"_"+(0,f.buildSN)(6):l+"_"+t.mode;let h=t.username+":"+l;h=i.from(h).toString("base64");let p=i.concat([i.from(`WRTC/1.0/${y.default.inBrowser?"WEB":"NODE"} ${u.host}\r\n`),i.from(`Host: ${u.host}\r\n`),i.from("Proxy-Connection: keep-alive\r\n"),i.from(c?`Proxy-Authorization: Basic ${h}\r\n`:""),i.from("\r\n")]);await e.write(p);let d=await e.read(3e3);if(d.byteLength<1)return g.default.log("ready read data is null",e.id),e.destroy(),void o(new Error("no response ready header"));let _=d.toString().split(" ")[1],m="200"==_;(c||"407"==_)&&(this.emit("auth",{checked:m,peer:t.peer,username:t.username||"",password:t.password||"",args:(t.password||"").split("_").slice(1),ttl:Date.now()-n}),m||this.removePeer(e)),o(m?void 0:new Error(d.toString()))}));return o&&e.destroy(),o}async connect(e,t,r){let n;const o=async n=>{let i=await this.checkSocket(n,t,e).catch((e=>e));r(i,n)},s=e=>{let t=this.ipeer.connect(e),i=new h.ReuseSocket(new l.SerialSocket(t),this.reusePool);n=setTimeout((()=>{t.destroy(),g.default.info("connect peer timeout",t.peer),r(new Error("connect peer timeout"),i)}),1e4),t.once("open",(()=>{n&&clearTimeout(n),o(i)})),t.once("timeout",(()=>t.destroy())),t.once("error",(e=>{g.default.info("connect error",e),t.destroy(),r(e,i)}))};let a=this.reusePool.pop(t.peer);if(a){await a.write(i.from([l.AcceptCMD.RESET]));let e=!1;for(let t=0;t<20;t++){let t=await a.read(100);if(!(t.byteLength<1)){if(1!=t.byteLength)break;if(t[0]==l.AcceptCMD.RESPONSE)return await(0,f.wait)(10),o(a),void(e=!0)}}e||(g.default.info("no receive response cmd",a.peer),a.destroy(),s(t.peer))}else s(t.peer)}}t.WrtcConnect=v,v.peerList=[]},3607:function(e,t,r){"use strict";var n=r(8764).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.IPeer=t.deviceId=t.IFetch=t.Connect=t.XHRSocket=t.WSSocket=t.AcceptCMD=t.Accept=t.XSocket=t.SecretSocket=t.SerialSocket=t.Socket=t.Buffer=void 0;var o=r(8764);Object.defineProperty(t,"Buffer",{enumerable:!0,get:function(){return o.Buffer}});const s=i(r(75));t.IPeer=s.default;var a=r(9803);Object.defineProperty(t,"Socket",{enumerable:!0,get:function(){return a.Socket}});var u=r(95);Object.defineProperty(t,"SerialSocket",{enumerable:!0,get:function(){return u.SerialSocket}});var c=r(6740);Object.defineProperty(t,"SecretSocket",{enumerable:!0,get:function(){return c.SecretSocket}});var l=r(6390);Object.defineProperty(t,"XSocket",{enumerable:!0,get:function(){return l.XSocket}});var f=r(9872);Object.defineProperty(t,"Accept",{enumerable:!0,get:function(){return f.Accept}}),Object.defineProperty(t,"AcceptCMD",{enumerable:!0,get:function(){return f.CMD}}),globalThis.Buffer=n;var h=r(2488);Object.defineProperty(t,"WSSocket",{enumerable:!0,get:function(){return h.WSSocket}});var p=r(1497);Object.defineProperty(t,"XHRSocket",{enumerable:!0,get:function(){return p.XHRSocket}});var d=r(651);Object.defineProperty(t,"Connect",{enumerable:!0,get:function(){return d.Connect}});var y=r(2285);Object.defineProperty(t,"IFetch",{enumerable:!0,get:function(){return y.IFetch}});var g=r(6789);Object.defineProperty(t,"deviceId",{enumerable:!0,get:function(){return g.deviceId}}),t.default=s.default},3993:(e,t,r)=>{"use strict";var n=r(8764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e,t){this.encodeSecret=e,this.decodeSecret=t,this.secret=e.toString("base64")}static createCipher(e){"string"==typeof e&&(e=n.from(e,"base64"));let t=n.alloc(256);for(let r=0;r<t.length;r++){let n=e[r];t.writeUInt8(r,n)}return new i(e,t)}buildVersion(e=2){e=Math.floor(e);let t=0;for(let r=(e=Math.min(e,4))-1;r>=0;r--)t+=Math.floor(256*Math.random())<<8*r;return t}buildFace(){return Math.floor(256*Math.random())}decode(e,t=99){return t%=256,!e||e.byteLength<1?n.alloc(0):(e.forEach(((r,n)=>{let i=this.decodeSecret[r];i=t<=0?i:i^t,e[n]=i})),e)}encode(e,t=99){return t%=256,!e||e.byteLength<1?n.alloc(0):(e.forEach(((r,n)=>{r=t<=0?r:r^t;let i=this.encodeSecret[r];e[n]=i})),e)}}t.default=i},5928:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.defineProperty=t.splitChunk=t.buffer2array=t.cycle=t.random2Int=t.bit2Int=t.int2Bit=t.string2Bit=t.wait=t.buildSN=t.buildPeerId=void 0;const i=n(r(8913)),o=(0,r(4296).customAlphabet)("abcdefghijklmnopqrstwuvxyz0123456789ABCDEFGHIJKLMNOPQRSTWUVXYZ",32);t.buildPeerId=function(){return Math.random().toString(36).slice(2)},t.buildSN=function(e=8){return o(e)},t.wait=async function(e){return new Promise((t=>{setTimeout((()=>t()),e)}))},t.string2Bit=function(e,t=6){return(e=e.substring(0,t)).split("").map((e=>e.charCodeAt(0)))},t.int2Bit=function(e,t=6){let r=Array(6);e=Math.floor(e%281474976710656);let n=Math.floor(e/Math.pow(2,32)),i=Math.floor(e%Math.pow(2,32));for(let e=5;e>=0;e--)r[e]=e>=2?i>>8*(6-e-1)&255:n>>(6-e-1)%4*8&255;return r.slice(6-Math.min(t,6))},t.bit2Int=function(e){e=e.slice(Math.max(e.length-6,0));let t=0,r=0,n=0;for(let t=0;t<e.length;t++){let i=8*(e.length-t-1),o=e[t];i>=32?n+=Math.pow(2,32)*(o<<i%32):i<=24&&(r+=24==i?o*Math.pow(2,24):o<<i)}return t=n+r,t},t.random2Int=function(e){return Math.floor(Math.random()*(e+1))},t.cycle=function(e=5,t){let r;return e=Math.max(e,1),function n(){r=setTimeout((()=>{try{t&&t(),n()}catch(e){}}),1e3*e)}(),{stop(){clearTimeout(r)}}},t.buffer2array=function(e,t){let r=[],n=t||e.length;n=Math.min(n,e.length);for(let t=0;t<n;t++)r.push(e[t]);return r},t.splitChunk=function(e){let t=i.default.mtu,r=Math.ceil(e.byteLength/t),n=[];for(let i=0;i<r;i++)n.push(e.slice(t*i,Math.min(t*(i+1),e.byteLength)));return n},t.defineProperty=function(e,t,r){try{Object.defineProperty(e,t,{value:r})}catch(e){}}},4296:(e,t,r)=>{"use strict";r.r(t),r.d(t,{customAlphabet:()=>s,customRandom:()=>o,nanoid:()=>a,random:()=>i,urlAlphabet:()=>n});let n="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",i=e=>crypto.getRandomValues(new Uint8Array(e)),o=(e,t,r)=>{let n=(2<<Math.log(e.length-1)/Math.LN2)-1,i=-~(1.6*n*t/e.length);return(o=t)=>{let s="";for(;;){let t=r(i),a=i;for(;a--;)if(s+=e[t[a]&n]||"",s.length===o)return s}}},s=(e,t=21)=>o(e,t,i),a=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+((t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_")),"")}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var o=r[e]={exports:{}};return t[e].call(o.exports,o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i=n(1991);e.exports=i})()},552:e=>{(()=>{var t={8508:(e,t,r)=>{"use strict";const n=Object.freeze({});function i(e){if("object"!=typeof e||null===e)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=e,this._operations=[],this._written=!1}i.prototype._checkWritten=function(){if(this._written)throw new Error("write() already called on this batch")},i.prototype.put=function(e,t,r){this._checkWritten();const i=this.db._checkKey(e)||this.db._checkValue(t);if(i)throw i;return e=this.db._serializeKey(e),t=this.db._serializeValue(t),this._put(e,t,null!=r?r:n),this},i.prototype._put=function(e,t,r){this._operations.push({...r,type:"put",key:e,value:t})},i.prototype.del=function(e,t){this._checkWritten();const r=this.db._checkKey(e);if(r)throw r;return e=this.db._serializeKey(e),this._del(e,null!=t?t:n),this},i.prototype._del=function(e,t){this._operations.push({...t,type:"del",key:e})},i.prototype.clear=function(){return this._checkWritten(),this._clear(),this},i.prototype._clear=function(){this._operations=[]},i.prototype.write=function(e,t){if(this._checkWritten(),"function"==typeof e&&(t=e),"function"!=typeof t)throw new Error("write() requires a callback argument");"object"==typeof e&&null!==e||(e={}),this._written=!0,this._write(e,t)},i.prototype._write=function(e,t){this.db._batch(this._operations,e,t)},i.prototype._nextTick=r(7212),e.exports=i},3538:(e,t,r)=>{"use strict";function n(e){if("object"!=typeof e||null===e)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=e,this._ended=!1,this._nexting=!1}n.prototype.next=function(e){let t=this;if(void 0===e)t=new Promise((function(t,r){e=function(e,n,i){e?r(e):void 0===n&&void 0===i?t():t([n,i])}}));else if("function"!=typeof e)throw new Error("next() requires a callback argument");return this._ended?(this._nextTick(e,new Error("cannot call next() after end()")),t):this._nexting?(this._nextTick(e,new Error("cannot call next() before previous next() has completed")),t):(this._nexting=!0,this._next(((t,...r)=>{this._nexting=!1,e(t,...r)})),t)},n.prototype._next=function(e){this._nextTick(e)},n.prototype.seek=function(e){if(this._ended)throw new Error("cannot call seek() after end()");if(this._nexting)throw new Error("cannot call seek() before next() has completed");e=this.db._serializeKey(e),this._seek(e)},n.prototype._seek=function(e){},n.prototype.end=function(e){let t;if(void 0===e)t=new Promise((function(t,r){e=function(e){e?r(e):t()}}));else if("function"!=typeof e)throw new Error("end() requires a callback argument");return this._ended?(this._nextTick(e,new Error("end() already called on iterator")),t):(this._ended=!0,this._end(e),t)},n.prototype._end=function(e){this._nextTick(e)},n.prototype[Symbol.asyncIterator]=async function*(){try{let e;for(;void 0!==(e=await this.next());)yield e}finally{this._ended||await this.end()}},n.prototype._nextTick=r(7212),e.exports=n},2554:(e,t,r)=>{"use strict";const n=r(1675),i=r(5214),o=r(6957),s=r(3538),a=r(8508),u=r(70).R,c=r(70).F,l=Object.prototype.hasOwnProperty,f=["lt","lte","gt","gte"];function h(e){this.status="new",this.supports=n(e,{status:!0})}function p(e,t){const r={};for(const n in t){if(!l.call(t,n))continue;if("start"===n||"end"===n)throw new Error('Legacy range options ("start" and "end") have been removed');let i=t[n];d(n)&&(i=e._serializeKey(i)),r[n]=i}return r}function d(e){return-1!==f.indexOf(e)}h.prototype.open=function(e,t){const r=this.status;if("function"==typeof e&&(t=e),"function"!=typeof t)throw new Error("open() requires a callback argument");"object"==typeof e&&null!==e||(e={}),e.createIfMissing=!1!==e.createIfMissing,e.errorIfExists=!!e.errorIfExists,this.status="opening",this._open(e,(e=>{if(e)return this.status=r,t(e);this.status="open",t()}))},h.prototype._open=function(e,t){this._nextTick(t)},h.prototype.close=function(e){const t=this.status;if("function"!=typeof e)throw new Error("close() requires a callback argument");this.status="closing",this._close((r=>{if(r)return this.status=t,e(r);this.status="closed",e()}))},h.prototype._close=function(e){this._nextTick(e)},h.prototype.get=function(e,t,r){if("function"==typeof t&&(r=t),"function"!=typeof r)throw new Error("get() requires a callback argument");const n=this._checkKey(e);if(n)return this._nextTick(r,n);e=this._serializeKey(e),"object"==typeof t&&null!==t||(t={}),t.asBuffer=!1!==t.asBuffer,this._get(e,t,r)},h.prototype._get=function(e,t,r){this._nextTick((function(){r(new Error("NotFound"))}))},h.prototype.getMany=function(e,t,r){if(r=u(t,r),r=o.fromCallback(r),t=c(t),function(e,t){if(!e.isOperational())return e._nextTick(t,new Error("Database is not open")),!0;return!1}(this,r))return r.promise;if(!Array.isArray(e))return this._nextTick(r,new Error("getMany() requires an array argument")),r.promise;if(0===e.length)return this._nextTick(r,null,[]),r.promise;"boolean"!=typeof t.asBuffer&&(t={...t,asBuffer:!0});const n=new Array(e.length);for(let t=0;t<e.length;t++){const i=e[t],o=this._checkKey(i);if(o)return this._nextTick(r,o),r.promise;n[t]=this._serializeKey(i)}return this._getMany(n,t,r),r.promise},h.prototype._getMany=function(e,t,r){this._nextTick(r,null,new Array(e.length).fill(void 0))},h.prototype.put=function(e,t,r,n){if("function"==typeof r&&(n=r),"function"!=typeof n)throw new Error("put() requires a callback argument");const i=this._checkKey(e)||this._checkValue(t);if(i)return this._nextTick(n,i);e=this._serializeKey(e),t=this._serializeValue(t),"object"==typeof r&&null!==r||(r={}),this._put(e,t,r,n)},h.prototype._put=function(e,t,r,n){this._nextTick(n)},h.prototype.del=function(e,t,r){if("function"==typeof t&&(r=t),"function"!=typeof r)throw new Error("del() requires a callback argument");const n=this._checkKey(e);if(n)return this._nextTick(r,n);e=this._serializeKey(e),"object"==typeof t&&null!==t||(t={}),this._del(e,t,r)},h.prototype._del=function(e,t,r){this._nextTick(r)},h.prototype.batch=function(e,t,r){if(!arguments.length)return this._chainedBatch();if("function"==typeof t&&(r=t),"function"==typeof e&&(r=e),"function"!=typeof r)throw new Error("batch(array) requires a callback argument");if(!Array.isArray(e))return this._nextTick(r,new Error("batch(array) requires an array argument"));if(0===e.length)return this._nextTick(r);"object"==typeof t&&null!==t||(t={});const n=new Array(e.length);for(let t=0;t<e.length;t++){if("object"!=typeof e[t]||null===e[t])return this._nextTick(r,new Error("batch(array) element must be an object and not `null`"));const i=Object.assign({},e[t]);if("put"!==i.type&&"del"!==i.type)return this._nextTick(r,new Error("`type` must be 'put' or 'del'"));const o=this._checkKey(i.key);if(o)return this._nextTick(r,o);if(i.key=this._serializeKey(i.key),"put"===i.type){const e=this._checkValue(i.value);if(e)return this._nextTick(r,e);i.value=this._serializeValue(i.value)}n[t]=i}this._batch(n,t,r)},h.prototype._batch=function(e,t,r){this._nextTick(r)},h.prototype.clear=function(e,t){if("function"==typeof e)t=e;else if("function"!=typeof t)throw new Error("clear() requires a callback argument");(e=p(this,e)).reverse=!!e.reverse,e.limit="limit"in e?e.limit:-1,this._clear(e,t)},h.prototype._clear=function(e,t){e.keys=!0,e.values=!1,e.keyAsBuffer=!0,e.valueAsBuffer=!0;const r=this._iterator(e),n={},i=e=>{if(e)return r.end((function(){t(e)}));r.next(((e,o)=>e?i(e):void 0===o?r.end(t):void this._del(o,n,i)))};i()},h.prototype._setupIteratorOptions=function(e){return(e=p(this,e)).reverse=!!e.reverse,e.keys=!1!==e.keys,e.values=!1!==e.values,e.limit="limit"in e?e.limit:-1,e.keyAsBuffer=!1!==e.keyAsBuffer,e.valueAsBuffer=!1!==e.valueAsBuffer,e},h.prototype.iterator=function(e){return"object"==typeof e&&null!==e||(e={}),e=this._setupIteratorOptions(e),this._iterator(e)},h.prototype._iterator=function(e){return new s(this)},h.prototype._chainedBatch=function(){return new a(this)},h.prototype._serializeKey=function(e){return e},h.prototype._serializeValue=function(e){return e},h.prototype._checkKey=function(e){return null==e?new Error("key cannot be `null` or `undefined`"):i(e)&&0===e.length?new Error("key cannot be an empty Buffer"):""===e?new Error("key cannot be an empty String"):Array.isArray(e)&&0===e.length?new Error("key cannot be an empty Array"):void 0},h.prototype._checkValue=function(e){if(null==e)return new Error("value cannot be `null` or `undefined`")},h.prototype.isOperational=function(){return"open"===this.status||this._isOperational()},h.prototype._isOperational=function(){return!1},h.prototype._nextTick=r(7212),e.exports=h},4012:(e,t,r)=>{"use strict";t.AbstractLevelDOWN=r(2554),t.AbstractIterator=r(3538),t.AbstractChainedBatch=r(8508)},70:(e,t)=>{"use strict";t.R=function(e,t){return"function"==typeof e?e:t},t.F=function(e){return"object"==typeof e&&null!==e?e:{}}},7212:(e,t,r)=>{"use strict";const n=r(4375);e.exports=function(e,...t){0===t.length?n(e):n((()=>e(...t)))}},5214:e=>{e.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},9742:(e,t)=>{"use strict";t.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,o=u(e),s=o[0],a=o[1],c=new i(function(e,t,r){return 3*(t+r)/4-r}(0,s,a)),l=0,f=a>0?s-4:s;for(r=0;r<f;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;2===a&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[l++]=255&t);1===a&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=16383,a=0,u=n-i;a<u;a+=s)o.push(c(e,a,a+s>u?u:a+s));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)r[s]=o[s],n[o.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,n){for(var i,o,s=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},8764:(e,t,r)=>{"use strict";const n=r(9742),i=r(645),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50;const s=2147483647;function a(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return f(e)}return c(e,t,r)}function c(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|y(e,t);let n=a(r);const i=n.write(e,t);i!==r&&(n=n.slice(0,i));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Y(e,Uint8Array)){const t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return h(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Y(e,ArrayBuffer)||e&&Y(e.buffer,ArrayBuffer))return p(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(Y(e,SharedArrayBuffer)||e&&Y(e.buffer,SharedArrayBuffer)))return p(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return u.from(n,t,r);const i=function(e){if(u.isBuffer(e)){const t=0|d(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||Q(e.length)?a(0):h(e);if("Buffer"===e.type&&Array.isArray(e.data))return h(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function f(e){return l(e),a(e<0?0:0|d(e))}function h(e){const t=e.length<0?0:0|d(e.length),r=a(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function p(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,u.prototype),n}function d(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function y(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Y(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return G(e).length;default:if(i)return n?-1:V(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,r);case"utf8":case"utf-8":return O(this,t,r);case"ascii":return B(this,t,r);case"latin1":case"binary":return A(this,t,r);case"base64":return T(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function _(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function m(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Q(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:b(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):b(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,r,n,i){let o,s=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){let n=-1;for(o=r;o<a;o++)if(c(e,o)===c(t,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===u)return n*s}else-1!==n&&(o-=o-n),n=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){let r=!0;for(let n=0;n<u;n++)if(c(e,o+n)!==c(t,n)){r=!1;break}if(r)return o}return-1}function v(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;const o=t.length;let s;for(n>o/2&&(n=o/2),s=0;s<n;++s){const n=parseInt(t.substr(2*s,2),16);if(Q(n))return s;e[r+s]=n}return s}function w(e,t,r,n){return K(V(t,e.length-r),e,r,n)}function k(e,t,r,n){return K(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function S(e,t,r,n){return K(G(t),e,r,n)}function E(e,t,r,n){return K(function(e,t){let r,n,i;const o=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function T(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function O(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;for(;i<r;){const t=e[i];let o=null,s=t>239?4:t>223?3:t>191?2:1;if(i+s<=r){let r,n,a,u;switch(s){case 1:t<128&&(o=t);break;case 2:r=e[i+1],128==(192&r)&&(u=(31&t)<<6|63&r,u>127&&(o=u));break;case 3:r=e[i+1],n=e[i+2],128==(192&r)&&128==(192&n)&&(u=(15&t)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(u=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return function(e){const t=e.length;if(t<=x)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=x));return r}(n)}t.kMaxLength=s,u.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return function(e,t,r){return l(e),e<=0?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)}(e,t,r)},u.allocUnsafe=function(e){return f(e)},u.allocUnsafeSlow=function(e){return f(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(Y(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),Y(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=u.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(Y(t,Uint8Array))i+t.length>n.length?(u.isBuffer(t)||(t=u.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!u.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},u.byteLength=y,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)_(this,t,t+1);return this},u.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)_(this,t,t+3),_(this,t+1,t+2);return this},u.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)_(this,t,t+7),_(this,t+1,t+6),_(this,t+2,t+5),_(this,t+3,t+4);return this},u.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?O(this,0,e):g.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(e,t,r,n,i){if(Y(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0);const a=Math.min(o,s),c=this.slice(n,i),l=e.slice(t,r);for(let e=0;e<a;++e)if(c[e]!==l[e]){o=c[e],s=l[e];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return v(this,e,t,r);case"utf8":case"utf-8":return w(this,e,t,r);case"ascii":case"latin1":case"binary":return k(this,e,t,r);case"base64":return S(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const x=4096;function B(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function A(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function M(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=J[e[n]];return i}function I(e,t,r){const n=e.slice(t,r);let i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}function P(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function C(e,t,r,n,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function R(e,t,r,n,i){F(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,r}function j(e,t,r,n,i){F(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s>>=8,e[r+2]=s,s>>=8,e[r+1]=s,s>>=8,e[r]=s,r+8}function L(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function D(e,t,r,n,o){return t=+t,r>>>=0,o||L(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function U(e,t,r,n,o){return t=+t,r>>>=0,o||L(e,0,r,8),i.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readBigUInt64LE=X((function(e){W(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||z(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),u.prototype.readBigUInt64BE=X((function(e){W(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||z(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=t,i=1,o=this[e+--n];for(;n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||P(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||P(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readBigInt64LE=X((function(e){W(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||z(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),u.prototype.readBigInt64BE=X((function(e){W(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||z(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),u.prototype.readFloatLE=function(e,t){return e>>>=0,t||P(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||P(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||P(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||P(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){C(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){C(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigUInt64LE=X((function(e,t=0){return R(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=X((function(e,t=0){return j(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);C(this,e,t,r,n-1,-n)}let i=0,o=1,s=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);C(this,e,t,r,n-1,-n)}let i=r-1,o=1,s=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigInt64LE=X((function(e,t=0){return R(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=X((function(e,t=0){return j(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(e,t,r){return D(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return D(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return U(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return U(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{const o=u.isBuffer(e)?e:u.from(e,n),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%s]}return this};const $={};function N(e,t,r){$[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function q(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function F(e,t,r,n,i,o){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new $.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){W(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||z(t,e.length-(r+1))}(n,i,o)}function W(e,t){if("number"!=typeof e)throw new $.ERR_INVALID_ARG_TYPE(t,"number",e)}function z(e,t,r){if(Math.floor(e)!==e)throw W(e,r),new $.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new $.ERR_BUFFER_OUT_OF_BOUNDS;throw new $.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}N("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),N("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),N("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=q(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=q(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const H=/[^+/0-9A-Za-z-_]/g;function V(e,t){let r;t=t||1/0;const n=e.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function G(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function K(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function Y(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Q(e){return e!=e}const J=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function X(e){return"undefined"==typeof BigInt?Z:e}function Z(){throw new Error("BigInt not supported")}},1924:(e,t,r)=>{"use strict";var n=r(210),i=r(5559),o=i(n("String.prototype.indexOf"));e.exports=function(e,t){var r=n(e,!!t);return"function"==typeof r&&o(e,".prototype.")>-1?i(r):r}},5559:(e,t,r)=>{"use strict";var n=r(8612),i=r(210),o=i("%Function.prototype.apply%"),s=i("%Function.prototype.call%"),a=i("%Reflect.apply%",!0)||n.call(s,o),u=i("%Object.getOwnPropertyDescriptor%",!0),c=i("%Object.defineProperty%",!0),l=i("%Math.max%");if(c)try{c({},"a",{value:1})}catch(e){c=null}e.exports=function(e){var t=a(n,s,arguments);if(u&&c){var r=u(t,"length");r.configurable&&c(t,"length",{value:1+l(0,e.length-(arguments.length-1))})}return t};var f=function(){return a(n,o,arguments)};c?c(e.exports,"apply",{value:f}):e.exports.apply=f},6957:(e,t,r)=>{"use strict";var n=r(3527);t.fromCallback=function(e,t){if(void 0===e){var r=new Promise((function(t,r){e=function(e,n){e?r(e):t(n)}}));e[void 0!==t?t:"promise"]=r}else if("function"!=typeof e)throw new TypeError("Callback must be a function");return e},t.fromPromise=function(e,t){if(void 0===t)return e;e.then((function(e){n((()=>t(null,e)))})).catch((function(e){n((()=>t(e)))}))}},7171:(e,t,r)=>{"use strict";const{AbstractChainedBatch:n}=r(4012),i=Symbol("operations");e.exports=class extends n{constructor(e){super(e),this[i]=[]}_put(e,t,r){this[i].push({...r,type:"put",key:e,value:t})}_del(e,t){this[i].push({...t,type:"del",key:e})}_clear(){this[i]=[]}_write(e,t){this.db.batch(this[i],e,t)}}},2790:(e,t,r)=>{"use strict";const{AbstractIterator:n}=r(4012),i=r(5717),o=r(2502).R,s=Symbol("options"),a=Symbol("iterator"),u=Symbol("operations"),c=Symbol("promise");function l(e,t){n.call(this,e),this[s]=t,this[a]=null,this[u]=[]}i(l,n),l.prototype.setDb=function(e){this[a]=e.iterator(this[s]);for(const e of this[u].splice(0,this[u].length))this[a][e.method](...e.args)},l.prototype.next=function(...e){if("open"===this.db.status)return this[a].next(...e);const t=o(e,c,(function(e,t){return void 0===e&&void 0===t?void 0:[e,t]}));return"opening"===this.db.status?this[u].push({method:"next",args:e}):this._nextTick(t,new Error("Database is not open")),t[c]||this},l.prototype.seek=function(...e){if("open"===this.db.status)this[a].seek(...e);else{if("opening"!==this.db.status)throw new Error("Database is not open");this[u].push({method:"seek",args:e})}},l.prototype.end=function(...e){if("open"===this.db.status)return this[a].end(...e);const t=o(e,c);return"opening"===this.db.status?this[u].push({method:"end",args:e}):this._nextTick(t,new Error("Database is not open")),t[c]||this};for(const e of["next","seek","end"])l.prototype["_"+e]=function(){throw new Error("Did not expect private method to be called: "+e)};e.exports=l},6944:(e,t,r)=>{"use strict";const{AbstractLevelDOWN:n}=r(4012),i=r(5717),o=r(2790),s=r(7171),a=r(2502).R,u=["put","get","getMany","del","batch","clear"],c=["approximateSize","compactRange"],l=Symbol("innerDb"),f=Symbol("operations"),h=Symbol("promise");function p(e){n.call(this,e.supports||{});for(const t of c)"function"!=typeof e[t]||this.supports.additionalMethods[t]||(this.supports.additionalMethods[t]=!0);this[l]=e,this[f]=[],function(e){const t=Object.keys(e.supports.additionalMethods);for(const r of u.concat(t))e[r]=function(...e){if("batch"===r&&0===e.length)return new s(this);if("open"===this.status)return this[l][r](...e);const t=a(e,h);return"opening"===this.status?this[f].push({method:r,args:e}):this._nextTick(t,new Error("Database is not open")),t[h]};e.iterator=function(e){if("open"===this.status)return this[l].iterator(e);if("opening"===this.status){const t=new o(this,e);return this[f].push({iterator:t}),t}throw new Error("Database is not open")};for(const t of u.concat(["iterator"]))e["_"+t]=function(){throw new Error("Did not expect private method to be called: "+t)}}(this)}i(p,n),p.prototype.type="deferred-leveldown",Object.defineProperty(p.prototype,"_db",{enumerable:!0,get(){return this[l]}}),p.prototype._open=function(e,t){const r=e=>{if(e||"open"!==this[l].status)return t(e||new Error("Database is not open"));const r=this[f];this[f]=[];for(const e of r)e.iterator?e.iterator.setDb(this[l]):this[l][e.method](...e.args);if(this[f].length>0)throw new Error("Did not expect further operations");t()};"new"===this[l].status||"closed"===this[l].status?this[l].open(e,r):this._nextTick(r)},p.prototype._close=function(e){this[l].close(e)},p.prototype._isOperational=function(){return"opening"===this.status},e.exports=p,e.exports.DeferredIterator=o},2502:(e,t)=>{"use strict";t.R=function(e,t,r){let n=e[e.length-1];if("function"!=typeof n){const i=new Promise(((t,i)=>{e.push(n=function(e,...n){e?i(e):t(r?r(...n):n[0])})}));n[t]=i}return n}},6729:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(e,t,n,o,s){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new i(n,o||e,s),u=r?r+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],a]:e._events[u].push(a):(e._events[u]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,i,o,s){var a=r?r+e:e;if(!this._events[a])return!1;var u,c,l=this._events[a],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,o),!0;case 6:return l.fn.call(l.context,t,n,i,o,s),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var h,p=l.length;for(c=0;c<p;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;case 4:l[c].fn.call(l[c].context,t,n,i);break;default:if(!u)for(h=1,u=new Array(f-1);h<f;h++)u[h-1]=arguments[h];l[c].fn.apply(l[c].context,u)}}return!0},a.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return o(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,i){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||i&&!a.once||n&&a.context!==n||s(this,o);else{for(var u=0,c=[],l=a.length;u<l;u++)(a[u].fn!==t||i&&!a[u].once||n&&a[u].context!==n)&&c.push(a[u]);c.length?this._events[o]=1===c.length?c[0]:c:s(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a},7187:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,o),n(r)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}y(e,t,o,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&y(e,"error",t,r)}(e,i,{once:!0})}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function c(e,t,r,n){var i,o,s,c;if(a(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]),void 0===s)s=o[t]=r,++e._eventsCount;else if("function"==typeof s?s=o[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=u(e))>0&&s.length>i&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,c=l,console&&console.warn&&console.warn(c)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=l.bind(n);return i.listener=r,n.wrapFn=i,i}function h(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):d(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function d(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function y(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){n.once&&e.removeEventListener(t,i),r(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=o[e];if(void 0===u)return!1;if("function"==typeof u)n(u,this,t);else{var c=u.length,l=d(u,c);for(r=0;r<c;++r)n(l[r],this,t)}return!0},o.prototype.addListener=function(e,t){return c(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return c(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,f(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,f(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,n,i,o,s;if(a(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},o.prototype.listeners=function(e){return h(this,e,!0)},o.prototype.rawListeners=function(e){return h(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},9804:e=>{var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString;e.exports=function(e,n,i){if("[object Function]"!==r.call(n))throw new TypeError("iterator must be a function");var o=e.length;if(o===+o)for(var s=0;s<o;s++)n.call(i,e[s],s,e);else for(var a in e)t.call(e,a)&&n.call(i,e[a],a,e)}},7648:e=>{"use strict";var t="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,n=Object.prototype.toString,i="[object Function]";e.exports=function(e){var o=this;if("function"!=typeof o||n.call(o)!==i)throw new TypeError(t+o);for(var s,a=r.call(arguments,1),u=function(){if(this instanceof s){var t=o.apply(this,a.concat(r.call(arguments)));return Object(t)===t?t:this}return o.apply(e,a.concat(r.call(arguments)))},c=Math.max(0,o.length-a.length),l=[],f=0;f<c;f++)l.push("$"+f);if(s=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(u),o.prototype){var h=function(){};h.prototype=o.prototype,s.prototype=new h,h.prototype=null}return s}},8612:(e,t,r)=>{"use strict";var n=r(7648);e.exports=Function.prototype.bind||n},210:(e,t,r)=>{"use strict";var n,i=SyntaxError,o=Function,s=TypeError,a=function(e){try{return o('"use strict"; return ('+e+").constructor;")()}catch(e){}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch(e){u=null}var c=function(){throw new s},l=u?function(){try{return c}catch(e){try{return u(arguments,"callee").get}catch(e){return c}}}():c,f=r(1405)(),h=Object.getPrototypeOf||function(e){return e.__proto__},p={},d="undefined"==typeof Uint8Array?n:h(Uint8Array),y={"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":f?h([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":p,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":f?h(h([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&f?h((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&f?h((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":f?h(""[Symbol.iterator]()):n,"%Symbol%":f?Symbol:n,"%SyntaxError%":i,"%ThrowTypeError%":l,"%TypedArray%":d,"%TypeError%":s,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet},g=function e(t){var r;if("%AsyncFunction%"===t)r=a("async function () {}");else if("%GeneratorFunction%"===t)r=a("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=a("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&(r=h(i.prototype))}return y[t]=r,r},_={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},m=r(8612),b=r(7642),v=m.call(Function.call,Array.prototype.concat),w=m.call(Function.apply,Array.prototype.splice),k=m.call(Function.call,String.prototype.replace),S=m.call(Function.call,String.prototype.slice),E=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,T=/\\(\\)?/g,O=function(e){var t=S(e,0,1),r=S(e,-1);if("%"===t&&"%"!==r)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new i("invalid intrinsic syntax, expected opening `%`");var n=[];return k(e,E,(function(e,t,r,i){n[n.length]=r?k(i,T,"$1"):t||e})),n},x=function(e,t){var r,n=e;if(b(_,n)&&(n="%"+(r=_[n])[0]+"%"),b(y,n)){var o=y[n];if(o===p&&(o=g(n)),void 0===o&&!t)throw new s("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new i("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new s('"allowMissing" argument must be a boolean');var r=O(e),n=r.length>0?r[0]:"",o=x("%"+n+"%",t),a=o.name,c=o.value,l=!1,f=o.alias;f&&(n=f[0],w(r,v([0,1],f)));for(var h=1,p=!0;h<r.length;h+=1){var d=r[h],g=S(d,0,1),_=S(d,-1);if(('"'===g||"'"===g||"`"===g||'"'===_||"'"===_||"`"===_)&&g!==_)throw new i("property names with quotes must have matching quotes");if("constructor"!==d&&p||(l=!0),b(y,a="%"+(n+="."+d)+"%"))c=y[a];else if(null!=c){if(!(d in c)){if(!t)throw new s("base intrinsic for "+e+" exists, but the property is not available.");return}if(u&&h+1>=r.length){var m=u(c,d);c=(p=!!m)&&"get"in m&&!("originalValue"in m.get)?m.get:c[d]}else p=b(c,d),c=c[d];p&&!l&&(y[a]=c)}}return c}},1405:(e,t,r)=>{"use strict";var n="undefined"!=typeof Symbol&&Symbol,i=r(5419);e.exports=function(){return"function"==typeof n&&("function"==typeof Symbol&&("symbol"==typeof n("foo")&&("symbol"==typeof Symbol("bar")&&i())))}},5419:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},6410:(e,t,r)=>{"use strict";var n=r(5419);e.exports=function(){return n()&&!!Symbol.toStringTag}},7642:(e,t,r)=>{"use strict";var n=r(8612);e.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},645:(e,t)=>{t.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,l=-7,f=r?i-1:0,h=r?-1:1,p=e[t+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+e[t+f],f+=h,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+e[t+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=c}return(p?-1:1)*s*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(s++,u/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(t*u-1)*Math.pow(2,i),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;e[r+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[r+p]=255&s,p+=d,s/=256,c-=8);e[r+p-d]|=128*y}},5717:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},2584:(e,t,r)=>{"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,i=r(1924)("Object.prototype.toString"),o=function(e){return!(n&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===i(e)},s=function(e){return!!o(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==i(e)&&"[object Function]"===i(e.callee)},a=function(){return o(arguments)}();o.isLegacyArguments=s,e.exports=a?o:s},8662:(e,t,r)=>{"use strict";var n,i=Object.prototype.toString,o=Function.prototype.toString,s=/^\s*(?:function)?\*/,a=r(6410)(),u=Object.getPrototypeOf;e.exports=function(e){if("function"!=typeof e)return!1;if(s.test(o.call(e)))return!0;if(!a)return"[object GeneratorFunction]"===i.call(e);if(!u)return!1;if(void 0===n){var t=function(){if(!a)return!1;try{return Function("return function*() {}")()}catch(e){}}();n=!!t&&u(t)}return u(e)===n}},5692:(e,t,r)=>{"use strict";var n=r(9804),i=r(3083),o=r(1924),s=o("Object.prototype.toString"),a=r(6410)(),u="undefined"==typeof globalThis?r.g:globalThis,c=i(),l=o("Array.prototype.indexOf",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return-1},f=o("String.prototype.slice"),h={},p=r(882),d=Object.getPrototypeOf;a&&p&&d&&n(c,(function(e){var t=new u[e];if(Symbol.toStringTag in t){var r=d(t),n=p(r,Symbol.toStringTag);if(!n){var i=d(r);n=p(i,Symbol.toStringTag)}h[e]=n.get}}));e.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!a||!(Symbol.toStringTag in e)){var t=f(s(e),8,-1);return l(c,t)>-1}return!!p&&function(e){var t=!1;return n(h,(function(r,n){if(!t)try{t=r.call(e)===n}catch(e){}})),t}(e)}},6604:e=>{"use strict";function t(e,t){const r=function(t,n){if("object"==typeof t&&null!==t&&(n=n||t,t=t.message||t.name),t=t||"","object"==typeof(n=n||void 0)&&n.type===e&&n.message===t)return n;Object.defineProperty(this,"type",{value:e,enumerable:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"name",{value:e,enumerable:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"cause",{value:n,enumerable:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"message",{value:t,enumerable:!1,writable:!0,configurable:!0}),Error.call(this),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,r)};return r.prototype=new t,r}const r=t("LevelUPError",Error);e.exports={LevelUPError:r,InitializationError:t("InitializationError",r),OpenError:t("OpenError",r),ReadError:t("ReadError",r),WriteError:t("WriteError",r),NotFoundError:t("NotFoundError",r),EncodingError:t("EncodingError",r)},e.exports.NotFoundError.prototype.notFound=!0,e.exports.NotFoundError.prototype.status=404},3462:(e,t,r)=>{"use strict";const n=r(5717),{Readable:i}=r(9212);function o(e,t){if(!(this instanceof o))return new o(e,t);t=t||{},i.call(this,Object.assign({},t,{objectMode:!0})),this._iterator=e,this._options=t,this.on("end",this.destroy.bind(this,null,null))}e.exports=o,n(o,i),o.prototype._read=function(){this.destroyed||this._iterator.next(((e,t,r)=>{if(!this.destroyed)return e?this.destroy(e):void(void 0===t&&void 0===r?this.push(null):!1!==this._options.keys&&!1===this._options.values?this.push(t):!1===this._options.keys&&!1!==this._options.values?this.push(r):this.push({key:t,value:r}))}))},o.prototype._destroy=function(e,t){this._iterator.end((function(r){t(e||r)}))}},5387:e=>{"use strict";var t={};function r(e,r,n){n||(n=Error);var i=function(e){var t,n;function i(t,n,i){return e.call(this,function(e,t,n){return"string"==typeof r?r:r(e,t,n)}(t,n,i))||this}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,i}(n);i.prototype.name=n.name,i.prototype.code=e,t[e]=i}function n(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}r("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),r("ERR_INVALID_ARG_TYPE",(function(e,t,r){var i,o,s,a;if("string"==typeof t&&(o="not ",t.substr(!s||s<0?0:+s,o.length)===o)?(i="must not be",t=t.replace(/^not /,"")):i="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))a="The ".concat(e," ").concat(i," ").concat(n(t,"type"));else{var u=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(u," ").concat(i," ").concat(n(t,"type"))}return a+=". Received type ".concat(typeof r)}),TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},8190:(e,t,r)=>{"use strict";var n=r(4155),i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=l;var o=r(4152),s=r(5932);r(5717)(l,o);for(var a=i(s.prototype),u=0;u<a.length;u++){var c=a[u];l.prototype[c]||(l.prototype[c]=s.prototype[c])}function l(e){if(!(this instanceof l))return new l(e);o.call(this,e),s.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",f)))}function f(){this._writableState.ended||n.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},6845:(e,t,r)=>{"use strict";e.exports=i;var n=r(2871);function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}r(5717)(i,n),i.prototype._transform=function(e,t,r){r(null,e)}},4152:(e,t,r)=>{"use strict";var n,i=r(4155);e.exports=T,T.ReadableState=E;r(7187).EventEmitter;var o=function(e,t){return e.listeners(t).length},s=r(2574),a=r(8764).Buffer,u=r.g.Uint8Array||function(){};var c,l=r(1367);c=l&&l.debuglog?l.debuglog("stream"):function(){};var f,h,p,d=r(5664),y=r(8931),g=r(7997).getHighWaterMark,_=r(5387).q,m=_.ERR_INVALID_ARG_TYPE,b=_.ERR_STREAM_PUSH_AFTER_EOF,v=_.ERR_METHOD_NOT_IMPLEMENTED,w=_.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(5717)(T,s);var k=y.errorOrDestroy,S=["error","close","destroy","pause","resume"];function E(e,t,i){n=n||r(8190),e=e||{},"boolean"!=typeof i&&(i=t instanceof n),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=g(this,e,"readableHighWaterMark",i),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(f||(f=r(180).s),this.decoder=new f(e.encoding),this.encoding=e.encoding)}function T(e){if(n=n||r(8190),!(this instanceof T))return new T(e);var t=this instanceof n;this._readableState=new E(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function O(e,t,r,n,i){c("readableAddChunk",t);var o,s=e._readableState;if(null===t)s.reading=!1,function(e,t){if(c("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?M(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,I(e)))}(e,s);else if(i||(o=function(e,t){var r;n=t,a.isBuffer(n)||n instanceof u||"string"==typeof t||void 0===t||e.objectMode||(r=new m("chunk",["string","Buffer","Uint8Array"],t));var n;return r}(s,t)),o)k(e,o);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===a.prototype||(t=function(e){return a.from(e)}(t)),n)s.endEmitted?k(e,new w):x(e,s,t,!0);else if(s.ended)k(e,new b);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?x(e,s,t,!1):P(e,s)):x(e,s,t,!1)}else n||(s.reading=!1,P(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function x(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&M(e)),P(e,t)}Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),T.prototype.destroy=y.destroy,T.prototype._undestroy=y.undestroy,T.prototype._destroy=function(e,t){t(e)},T.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=a.from(e,t),t=""),r=!0),O(this,e,t,!1,r)},T.prototype.unshift=function(e){return O(this,e,null,!0,!1)},T.prototype.isPaused=function(){return!1===this._readableState.flowing},T.prototype.setEncoding=function(e){f||(f=r(180).s);var t=new f(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var B=1073741824;function A(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=B?e=B:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function M(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,i.nextTick(I,e))}function I(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,D(e)}function P(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(C,e,t))}function C(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(c("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function R(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function j(e){c("readable nexttick read 0"),e.read(0)}function L(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),D(e),t.flowing&&!t.reading&&e.read(0)}function D(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function U(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function $(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,i.nextTick(N,t,e))}function N(e,t){if(c("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function q(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}T.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?$(this):M(this),null;if(0===(e=A(e,t))&&t.ended)return 0===t.length&&$(this),null;var n,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=A(r,t))),null===(n=e>0?U(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&$(this)),null!==n&&this.emit("data",n),n},T.prototype._read=function(e){k(this,new v("_read()"))},T.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,c("pipe count=%d opts=%j",n.pipesCount,t);var s=(!t||!1!==t.end)&&e!==i.stdout&&e!==i.stderr?u:g;function a(t,i){c("onunpipe"),t===r&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,c("cleanup"),e.removeListener("close",d),e.removeListener("finish",y),e.removeListener("drain",l),e.removeListener("error",p),e.removeListener("unpipe",a),r.removeListener("end",u),r.removeListener("end",g),r.removeListener("data",h),f=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function u(){c("onend"),e.end()}n.endEmitted?i.nextTick(s):r.once("end",s),e.on("unpipe",a);var l=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,D(e))}}(r);e.on("drain",l);var f=!1;function h(t){c("ondata");var i=e.write(t);c("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==q(n.pipes,e))&&!f&&(c("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function p(t){c("onerror",t),g(),e.removeListener("error",p),0===o(e,"error")&&k(e,t)}function d(){e.removeListener("finish",y),g()}function y(){c("onfinish"),e.removeListener("close",d),g()}function g(){c("unpipe"),r.unpipe(e)}return r.on("data",h),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",p),e.once("close",d),e.once("finish",y),e.emit("pipe",r),n.flowing||(c("pipe resume"),r.resume()),e},T.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=q(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},T.prototype.on=function(e,t){var r=s.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===e&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,c("on readable",n.length,n.reading),n.length?M(this):n.reading||i.nextTick(j,this))),r},T.prototype.addListener=T.prototype.on,T.prototype.removeListener=function(e,t){var r=s.prototype.removeListener.call(this,e,t);return"readable"===e&&i.nextTick(R,this),r},T.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||i.nextTick(R,this),t},T.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(L,e,t))}(this,e)),e.paused=!1,this},T.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},T.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(c("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(c("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<S.length;o++)e.on(S[o],this.emit.bind(this,S[o]));return this._read=function(t){c("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(T.prototype[Symbol.asyncIterator]=function(){return void 0===h&&(h=r(1913)),h(this)}),Object.defineProperty(T.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(T.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(T.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),T._fromList=U,Object.defineProperty(T.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(T.from=function(e,t){return void 0===p&&(p=r(5117)),p(T,e,t)})},2871:(e,t,r)=>{"use strict";e.exports=l;var n=r(5387).q,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,s=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,u=r(8190);function c(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);u.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",f)}function f(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,r){h(e,t,r)}))}function h(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}r(5717)(l,u),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,r){r(new i("_transform()"))},l.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,(function(e){t(e)}))}},5932:(e,t,r)=>{"use strict";var n,i=r(4155);function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}e.exports=T,T.WritableState=E;var s={deprecate:r(4927)},a=r(2574),u=r(8764).Buffer,c=r.g.Uint8Array||function(){};var l,f=r(8931),h=r(7997).getHighWaterMark,p=r(5387).q,d=p.ERR_INVALID_ARG_TYPE,y=p.ERR_METHOD_NOT_IMPLEMENTED,g=p.ERR_MULTIPLE_CALLBACK,_=p.ERR_STREAM_CANNOT_PIPE,m=p.ERR_STREAM_DESTROYED,b=p.ERR_STREAM_NULL_VALUES,v=p.ERR_STREAM_WRITE_AFTER_END,w=p.ERR_UNKNOWN_ENCODING,k=f.errorOrDestroy;function S(){}function E(e,t,s){n=n||r(8190),e=e||{},"boolean"!=typeof s&&(s=t instanceof n),this.objectMode=!!e.objectMode,s&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=h(this,e,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,o=r.writecb;if("function"!=typeof o)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,o){--t.pendingcb,r?(i.nextTick(o,n),i.nextTick(I,e,t),e._writableState.errorEmitted=!0,k(e,n)):(o(n),e._writableState.errorEmitted=!0,k(e,n),I(e,t))}(e,r,n,t,o);else{var s=A(r)||e.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||B(e,r),n?i.nextTick(x,e,r,s,o):x(e,r,s,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function T(e){var t=this instanceof(n=n||r(8190));if(!t&&!l.call(T,this))return new T(e);this._writableState=new E(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),a.call(this)}function O(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new m("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function x(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),I(e,t)}function B(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),s=t.corkedRequestsFree;s.entry=r;for(var a=0,u=!0;r;)i[a]=r,r.isBuf||(u=!1),r=r.next,a+=1;i.allBuffers=u,O(e,t,!0,t.length,i,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,l=r.encoding,f=r.callback;if(O(e,t,!1,t.objectMode?1:c.length,c,l,f),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function A(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function M(e,t){e._final((function(r){t.pendingcb--,r&&k(e,r),t.prefinished=!0,e.emit("prefinish"),I(e,t)}))}function I(e,t){var r=A(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,i.nextTick(M,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}r(5717)(T,a),E.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(E.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(T,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||this===T&&(e&&e._writableState instanceof E)}})):l=function(e){return e instanceof this},T.prototype.pipe=function(){k(this,new _)},T.prototype.write=function(e,t,r){var n,o=this._writableState,s=!1,a=!o.objectMode&&(n=e,u.isBuffer(n)||n instanceof c);return a&&!u.isBuffer(e)&&(e=function(e){return u.from(e)}(e)),"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof r&&(r=S),o.ending?function(e,t){var r=new v;k(e,r),i.nextTick(t,r)}(this,r):(a||function(e,t,r,n){var o;return null===r?o=new b:"string"==typeof r||t.objectMode||(o=new d("chunk",["string","Buffer"],r)),!o||(k(e,o),i.nextTick(n,o),!1)}(this,o,e,r))&&(o.pendingcb++,s=function(e,t,r,n,i,o){if(!r){var s=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=u.from(t,r));return t}(t,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else O(e,t,!1,a,n,i,o);return c}(this,o,a,e,t,r)),s},T.prototype.cork=function(){this._writableState.corked++},T.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||B(this,e))},T.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new w(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),T.prototype._write=function(e,t,r){r(new y("_write()"))},T.prototype._writev=null,T.prototype.end=function(e,t,r){var n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||function(e,t,r){t.ending=!0,I(e,t),r&&(t.finished?i.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,n,r),this},Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),T.prototype.destroy=f.destroy,T.prototype._undestroy=f.undestroy,T.prototype._destroy=function(e,t){t(e)}},1913:(e,t,r)=>{"use strict";var n,i=r(4155);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=r(9103),a=Symbol("lastResolve"),u=Symbol("lastReject"),c=Symbol("error"),l=Symbol("ended"),f=Symbol("lastPromise"),h=Symbol("handlePromise"),p=Symbol("stream");function d(e,t){return{value:e,done:t}}function y(e){var t=e[a];if(null!==t){var r=e[p].read();null!==r&&(e[f]=null,e[a]=null,e[u]=null,t(d(r,!1)))}}function g(e){i.nextTick(y,e)}var _=Object.getPrototypeOf((function(){})),m=Object.setPrototypeOf((o(n={get stream(){return this[p]},next:function(){var e=this,t=this[c];if(null!==t)return Promise.reject(t);if(this[l])return Promise.resolve(d(void 0,!0));if(this[p].destroyed)return new Promise((function(t,r){i.nextTick((function(){e[c]?r(e[c]):t(d(void 0,!0))}))}));var r,n=this[f];if(n)r=new Promise(function(e,t){return function(r,n){e.then((function(){t[l]?r(d(void 0,!0)):t[h](r,n)}),n)}}(n,this));else{var o=this[p].read();if(null!==o)return Promise.resolve(d(o,!1));r=new Promise(this[h])}return this[f]=r,r}},Symbol.asyncIterator,(function(){return this})),o(n,"return",(function(){var e=this;return new Promise((function(t,r){e[p].destroy(null,(function(e){e?r(e):t(d(void 0,!0))}))}))})),n),_);e.exports=function(e){var t,r=Object.create(m,(o(t={},p,{value:e,writable:!0}),o(t,a,{value:null,writable:!0}),o(t,u,{value:null,writable:!0}),o(t,c,{value:null,writable:!0}),o(t,l,{value:e._readableState.endEmitted,writable:!0}),o(t,h,{value:function(e,t){var n=r[p].read();n?(r[f]=null,r[a]=null,r[u]=null,e(d(n,!1))):(r[a]=e,r[u]=t)},writable:!0}),t));return r[f]=null,s(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[u];return null!==t&&(r[f]=null,r[a]=null,r[u]=null,t(e)),void(r[c]=e)}var n=r[a];null!==n&&(r[f]=null,r[a]=null,r[u]=null,n(d(void 0,!0))),r[l]=!0})),e.on("readable",g.bind(null,r)),r}},5664:(e,t,r)=>{"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=r(8764).Buffer,a=r(267).inspect,u=a&&a.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r,c;return t=e,r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t,r,n,i=s.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=o.data,r=i,n=a,s.prototype.copy.call(t,r,n),a+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?n+=i:n+=i.slice(0,e),0==(e-=o)){o===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,t}},{key:u,value:function(e,t){return a(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],r&&o(t.prototype,r),c&&o(t,c),e}()},8931:(e,t,r)=>{"use strict";var n=r(4155);function i(e,t){s(e,t),o(e)}function o(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function s(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,a=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return a||u?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.nextTick(s,this,e)):n.nextTick(s,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?r._writableState?r._writableState.errorEmitted?n.nextTick(o,r):(r._writableState.errorEmitted=!0,n.nextTick(i,r,e)):n.nextTick(i,r,e):t?(n.nextTick(o,r),t(e)):n.nextTick(o,r)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}},9103:(e,t,r)=>{"use strict";var n=r(5387).q.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,r,o){if("function"==typeof r)return e(t,null,r);r||(r={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(o||i);var s=r.readable||!1!==r.readable&&t.readable,a=r.writable||!1!==r.writable&&t.writable,u=function(){t.writable||l()},c=t._writableState&&t._writableState.finished,l=function(){a=!1,c=!0,s||o.call(t)},f=t._readableState&&t._readableState.endEmitted,h=function(){s=!1,f=!0,a||o.call(t)},p=function(e){o.call(t,e)},d=function(){var e;return s&&!f?(t._readableState&&t._readableState.ended||(e=new n),o.call(t,e)):a&&!c?(t._writableState&&t._writableState.ended||(e=new n),o.call(t,e)):void 0},y=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",u),t.on("close",u)):(t.on("complete",l),t.on("abort",d),t.req?y():t.on("request",y)),t.on("end",h),t.on("finish",l),!1!==r.error&&t.on("error",p),t.on("close",d),function(){t.removeListener("complete",l),t.removeListener("abort",d),t.removeListener("request",y),t.req&&t.req.removeListener("finish",l),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",l),t.removeListener("end",h),t.removeListener("error",p),t.removeListener("close",d)}}},5117:e=>{e.exports=function(){throw new Error("Readable.from is not available in the browser")}},1240:(e,t,r)=>{"use strict";var n;var i=r(5387).q,o=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function u(e,t,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var a=!1;e.on("close",(function(){a=!0})),void 0===n&&(n=r(9103)),n(e,{readable:t,writable:i},(function(e){if(e)return o(e);a=!0,o()}));var u=!1;return function(t){if(!a&&!u)return u=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void o(t||new s("pipe"))}}function c(e){e()}function l(e,t){return e.pipe(t)}function f(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}e.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=f(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var s=t.map((function(e,r){var o=r<t.length-1;return u(e,o,r>0,(function(e){n||(n=e),e&&s.forEach(c),o||(s.forEach(c),i(n))}))}));return t.reduce(l)}},7997:(e,t,r)=>{"use strict";var n=r(5387).q.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,r,i){var o=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,i,r);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new n(i?r:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},2574:(e,t,r)=>{e.exports=r(7187).EventEmitter},9212:(e,t,r)=>{(t=e.exports=r(4152)).Stream=t,t.Readable=t,t.Writable=r(5932),t.Duplex=r(8190),t.Transform=r(2871),t.PassThrough=r(6845),t.finished=r(9103),t.pipeline=r(1240)},1132:(e,t,r)=>{var n=r(8764),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},180:(e,t,r)=>{"use strict";var n=r(1132).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=c,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=l,this.end=f,t=3;break;default:return this.write=h,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function l(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.s=o,o.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},o.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=s(t[n]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if((i=s(t[n]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if((i=s(t[n]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},9558:(e,t,r)=>{"use strict";e.exports=p;const n=r(4012).AbstractLevelDOWN,i=r(5717),o=r(9967),s=r(3016),a=r(5568),u=r(8450),c=r(1228),l=r(2854),f=r(8950),h="level-js-";function p(e,t){if(!(this instanceof p))return new p(e,t);if(n.call(this,{bufferKeys:c.bufferKeys(indexedDB),snapshots:!0,permanence:!0,clear:!0,getMany:!0}),t=t||{},"string"!=typeof e)throw new Error("constructor requires a location string argument");this.location=e,this.prefix=null==t.prefix?h:t.prefix,this.version=parseInt(t.version||1,10)}i(p,n),p.prototype.type="level-js",p.prototype._open=function(e,t){const r=indexedDB.open(this.prefix+this.location,this.version);r.onerror=function(){t(r.error||new Error("unknown error"))},r.onsuccess=()=>{this.db=r.result,t()},r.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains(this.location)||t.createObjectStore(this.location)}},p.prototype.store=function(e){return this.db.transaction([this.location],e).objectStore(this.location)},p.prototype.await=function(e,t){const r=e.transaction;r.onabort=function(){t(r.error||new Error("aborted by user"))},r.oncomplete=function(){t(null,e.result)}},p.prototype._get=function(e,t,r){const n=this.store("readonly");let i;try{i=n.get(e)}catch(e){return this._nextTick(r,e)}this.await(i,(function(e,n){return e?r(e):void 0===n?r(new Error("NotFound")):void r(null,u(n,t.asBuffer))}))},p.prototype._getMany=function(e,t,r){const n=t.asBuffer,i=this.store("readonly"),s=e.map((e=>t=>{let r;try{r=i.get(e)}catch(e){return t(e)}r.onsuccess=()=>{const e=r.result;t(null,void 0===e?e:u(e,n))},r.onerror=e=>{e.stopPropagation(),t(r.error)}}));o(s,16,r)},p.prototype._del=function(e,t,r){const n=this.store("readwrite");let i;try{i=n.delete(e)}catch(e){return this._nextTick(r,e)}this.await(i,r)},p.prototype._put=function(e,t,r,n){const i=this.store("readwrite");let o;try{o=i.put(t,e)}catch(e){return this._nextTick(n,e)}this.await(o,n)},p.prototype._serializeKey=function(e){return a(e,this.supports.bufferKeys)},p.prototype._serializeValue=function(e){return a(e,!0)},p.prototype._iterator=function(e){return new s(this,this.location,e)},p.prototype._batch=function(e,t,r){if(0===e.length)return this._nextTick(r);const n=this.store("readwrite"),i=n.transaction;let o,s=0;i.onabort=function(){r(o||i.error||new Error("aborted by user"))},i.oncomplete=function(){r()},function t(){const r=e[s++],a=r.key;let u;try{u="del"===r.type?n.delete(a):n.put(r.value,a)}catch(e){return o=e,void i.abort()}s<e.length&&(u.onsuccess=t)}()},p.prototype._clear=function(e,t){let r,n;try{r=f(e)}catch(e){return this._nextTick(t)}if(e.limit>=0)return l(this,this.location,r,e,t);try{const e=this.store("readwrite");n=r?e.delete(r):e.clear()}catch(e){return this._nextTick(t,e)}this.await(n,t)},p.prototype._close=function(e){this.db.close(),this._nextTick(e)},p.prototype.upgrade=function(e){if("open"!==this.status)return this._nextTick(e,new Error("cannot upgrade() before open()"));const t=this.iterator(),r={},n=this;function i(e){if(e)return s(e);t.next(o)}function o(e,t,o){if(e||void 0===t)return s(e);const a=n._serializeKey(u(t,!0)),c=n._serializeValue(u(o,!0));n._batch([{type:"del",key:t},{type:"put",key:a,value:c}],r,i)}function s(r){t.end((function(t){e(r||t)}))}t._deserializeKey=t._deserializeValue=function(e){return e},i()},p.destroy=function(e,t,r){"function"==typeof t&&(r=t,t=h);const n=indexedDB.deleteDatabase(t+e);n.onsuccess=function(){r()},n.onerror=function(e){r(e)}}},3016:(e,t,r)=>{"use strict";const n=r(5717),i=r(4012).AbstractIterator,o=r(8950),s=r(8450),a=function(){};function u(e,t,r){if(i.call(this,e),this._limit=r.limit,this._count=0,this._callback=null,this._cache=[],this._completed=!1,this._aborted=!1,this._error=null,this._transaction=null,this._keys=r.keys,this._values=r.values,this._keyAsBuffer=r.keyAsBuffer,this._valueAsBuffer=r.valueAsBuffer,0===this._limit)return void(this._completed=!0);let n;try{n=o(r)}catch(e){return void(this._completed=!0)}this.createIterator(t,n,r.reverse)}e.exports=u,n(u,i),u.prototype.createIterator=function(e,t,r){const n=this.db.db.transaction([e],"readonly");n.objectStore(e).openCursor(t,r?"prev":"next").onsuccess=e=>{const t=e.target.result;t&&this.onItem(t)},this._transaction=n,n.onabort=()=>{this.onAbort(this._transaction.error||new Error("aborted by user"))},n.oncomplete=()=>{this.onComplete()}},u.prototype.onItem=function(e){this._cache.push(e.key,e.value),(this._limit<=0||++this._count<this._limit)&&e.continue(),this.maybeNext()},u.prototype.onAbort=function(e){this._aborted=!0,this._error=e,this.maybeNext()},u.prototype.onComplete=function(){this._completed=!0,this.maybeNext()},u.prototype.maybeNext=function(){this._callback&&(this._next(this._callback),this._callback=null)},u.prototype._next=function(e){if(this._aborted){const t=this._error;this._error=null,this._nextTick(e,t)}else if(this._cache.length>0){let t=this._cache.shift(),r=this._cache.shift();t=this._keys&&void 0!==t?this._deserializeKey(t,this._keyAsBuffer):void 0,r=this._values&&void 0!==r?this._deserializeValue(r,this._valueAsBuffer):void 0,this._nextTick(e,null,t,r)}else this._completed?this._nextTick(e):this._callback=e},u.prototype._deserializeKey=s,u.prototype._deserializeValue=s,u.prototype._end=function(e){if(this._aborted||this._completed)return this._nextTick(e,this._error);this.onItem=a,this.onAbort=e,this.onComplete=e}},2854:e=>{"use strict";e.exports=function(e,t,r,n,i){if(0===n.limit)return e._nextTick(i);const o=e.db.transaction([t],"readwrite"),s=o.objectStore(t);let a=0;o.oncomplete=function(){i()},o.onabort=function(){i(o.error||new Error("aborted by user"))};const u=s.openKeyCursor?"openKeyCursor":"openCursor",c=n.reverse?"prev":"next";s[u](r,c).onsuccess=function(e){const t=e.target.result;t&&(s.delete(t.key).onsuccess=function(){(n.limit<=0||++a<n.limit)&&t.continue()})}}},8450:(e,t,r)=>{"use strict";const n=r(8764).Buffer,i=function(){if(r.g.TextDecoder){const e=new TextDecoder("utf-8");return e.decode.bind(e)}return function(e){return s(e).toString()}}(),o=function(){if(r.g.TextDecoder){const e=new TextDecoder("utf-8");return e.decode.bind(e)}return function(e){return n.from(e).toString()}}();function s(e){const t=n.from(e.buffer);return e.byteLength===e.buffer.byteLength?t:t.slice(e.byteOffset,e.byteOffset+e.byteLength)}e.exports=function(e,t){return e instanceof Uint8Array?t?s(e):i(e):e instanceof ArrayBuffer?t?n.from(e):o(e):t?n.from(String(e)):String(e)}},8950:(e,t,r)=>{"use strict";const n=r(2303),i=Symbol("none");e.exports=function(e){const t=n.lowerBound(e,i),r=n.upperBound(e,i),o=n.lowerBoundExclusive(e,i),s=n.upperBoundExclusive(e,i);return t!==i&&r!==i?IDBKeyRange.bound(t,r,o,s):t!==i?IDBKeyRange.lowerBound(t,o):r!==i?IDBKeyRange.upperBound(r,s):null}},5568:(e,t,r)=>{"use strict";const n=r(8764).Buffer,i=function(){if(r.g.TextEncoder){const e=new TextEncoder("utf-8");return e.encode.bind(e)}return n.from}();e.exports=function(e,t){return t?n.isBuffer(e)?e:i(String(e)):String(e)}},1228:(e,t,r)=>{"use strict";const n=r(8764).Buffer;t.test=function(e){return function(t){try{return t.cmp(e,0),!0}catch(e){return!1}}},t.bufferKeys=t.test(n.alloc(0))},1675:e=>{"use strict";function t(e){return!!e&&Object.assign({},e)}e.exports=function(...e){const r=e.reduce(((e,t)=>Object.assign(e,t)),{});return Object.assign(r,{bufferKeys:r.bufferKeys||!1,snapshots:r.snapshots||!1,permanence:r.permanence||!1,seek:r.seek||!1,clear:r.clear||!1,getMany:r.getMany||!1,keyIterator:r.keyIterator||!1,valueIterator:r.valueIterator||!1,iteratorNextv:r.iteratorNextv||!1,iteratorAll:r.iteratorAll||!1,status:r.status||!1,idempotentOpen:r.idempotentOpen||!1,passiveOpen:r.passiveOpen||!1,serialize:r.serialize||!1,createIfMissing:r.createIfMissing||!1,errorIfExists:r.errorIfExists||!1,deferredOpen:r.deferredOpen||!1,openCallback:r.openCallback||!1,promises:r.promises||!1,streams:r.streams||!1,encodings:t(r.encodings),events:t(r.events),additionalMethods:Object.assign({},r.additionalMethods)})}},8133:(e,t,r)=>{"use strict";const n=r(6604).WriteError,i=r(6957),o=r(2369).R,s=r(2369).F;function a(e){this.db=e,this.batch=e.db.batch(),this.ops=[],this.length=0}a.prototype.put=function(e,t,r){try{this.batch.put(e,t,r)}catch(e){throw new n(e)}return this.ops.push({...r,type:"put",key:e,value:t}),this.length++,this},a.prototype.del=function(e,t){try{this.batch.del(e,t)}catch(e){throw new n(e)}return this.ops.push({...t,type:"del",key:e}),this.length++,this},a.prototype.clear=function(){try{this.batch.clear()}catch(e){throw new n(e)}return this.ops=[],this.length=0,this},a.prototype.write=function(e,t){const r=this.db,a=this.ops;t=o(e,t),t=i.fromCallback(t),e=s(e);try{this.batch.write(e,(function(e){if(e)return t(new n(e));r.emit("batch",a),t()}))}catch(e){throw new n(e)}return t.promise},e.exports=a},2369:(e,t)=>{"use strict";t.R=function(e,t){return"function"==typeof e?e:t},t.F=function(e){return"object"==typeof e&&null!==e?e:{}}},4918:(e,t,r)=>{"use strict";const n=r(7187).EventEmitter,i=r(9539).inherits,o=r(6944),s=r(3462),a=r(8133),u=r(6604),c=r(1675),l=r(6957),f=r(2369).R,h=r(2369).F,p=r(9350),d=u.WriteError,y=u.ReadError,g=u.NotFoundError,_=u.OpenError,m=u.InitializationError;function b(e,t,r){if(!(this instanceof b))return new b(e,t,r);let i;if(n.call(this),this.setMaxListeners(1/0),"function"==typeof t&&(r=t,t={}),t=t||{},!e||"object"!=typeof e){if(i=new m("First argument must be an abstract-leveldown compliant store"),"function"==typeof r)return p(r,i);throw i}if("string"!=typeof e.status)throw new Error(".status required, old abstract-leveldown");this.options=h(t),this._db=e,this.db=null,this.open(r||(e=>{e&&this.emit("error",e)})),this.supports=c(this.db.supports,{status:!0,deferredOpen:!0,openCallback:!0,promises:!0,streams:!0});for(const e of Object.keys(this.supports.additionalMethods))null==this[e]&&(this[e]=function(...t){return this.db[e](...t)})}function v(e,t){return!e.isOperational()&&(p(t,new y("Database is not open")),!0)}b.prototype.emit=n.prototype.emit,b.prototype.once=n.prototype.once,i(b,n),Object.defineProperty(b.prototype,"status",{enumerable:!0,get(){return this.db.status}}),b.prototype.isOperational=function(){return"open"===this.db.status||"opening"===this.db.status},b.prototype.open=function(e,t){return"function"==typeof e&&(t=e,e=null),t=l.fromCallback(t),e||(e=this.options),this.db&&this.isOpen()?(p(t,null,this),t.promise):this.db&&this._isOpening()?(this.once("open",(()=>{t(null,this)})),t.promise):(this.db=new o(this._db),this.emit("opening"),this.db.open(e,(e=>{if(e)return t(new _(e));this.db=this._db,t(null,this),this.emit("open"),this.emit("ready")})),t.promise)},b.prototype.close=function(e){return e=l.fromCallback(e),this.isOpen()?(this.db.close(((t,...r)=>{this.emit("closed"),e(t,...r)})),this.emit("closing")):this.isClosed()?p(e):"closing"===this.db.status?this.once("closed",e):this._isOpening()&&this.once("open",(()=>{this.close(e)})),e.promise},b.prototype.isOpen=function(){return"open"===this.db.status},b.prototype._isOpening=function(){return"opening"===this.db.status},b.prototype.isClosed=function(){return/^clos|new/.test(this.db.status)},b.prototype.get=function(e,t,r){return r=f(t,r),v(this,r=l.fromCallback(r))||(t=h(t),this.db.get(e,t,(function(t,n){if(t)return t=/notfound/i.test(t)||t.notFound?new g("Key not found in database ["+e+"]",t):new y(t),r(t);r(null,n)}))),r.promise},b.prototype.getMany=function(e,t,r){return this.db.getMany(e,t,r)},b.prototype.put=function(e,t,r,n){return n=f(r,n),v(this,n=l.fromCallback(n))||(r=h(r),this.db.put(e,t,r,(r=>{if(r)return n(new d(r));this.emit("put",e,t),n()}))),n.promise},b.prototype.del=function(e,t,r){return r=f(t,r),v(this,r=l.fromCallback(r))||(t=h(t),this.db.del(e,t,(t=>{if(t)return r(new d(t));this.emit("del",e),r()}))),r.promise},b.prototype.batch=function(e,t,r){return arguments.length?(r="function"==typeof e?e:f(t,r),v(this,r=l.fromCallback(r))||(t=h(t),this.db.batch(e,t,(t=>{if(t)return r(new d(t));this.emit("batch",e),r()}))),r.promise):new a(this)},b.prototype.iterator=function(e){return this.db.iterator(e)},b.prototype.clear=function(e,t){return t=f(e,t),e=h(e),v(this,t=l.fromCallback(t))||this.db.clear(e,(r=>{if(r)return t(new d(r));this.emit("clear",e),t()})),t.promise},b.prototype.readStream=b.prototype.createReadStream=function(e){return"number"!=typeof(e=Object.assign({keys:!0,values:!0},e)).limit&&(e.limit=-1),new s(this.db.iterator(e),e)},b.prototype.keyStream=b.prototype.createKeyStream=function(e){return this.createReadStream(Object.assign({},e,{keys:!0,values:!1}))},b.prototype.valueStream=b.prototype.createValueStream=function(e){return this.createReadStream(Object.assign({},e,{keys:!1,values:!0}))},b.prototype.toString=function(){return"LevelUP"},b.prototype.type="levelup",b.prototype._nextTick=p,b.errors=u,e.exports=b},9350:(e,t,r)=>{"use strict";const n=r(4375);e.exports=function(e,...t){0===t.length?n(e):n((()=>e(...t)))}},2303:(e,t,r)=>{var n=r(8764).Buffer;function i(e){return void 0!==e&&""!==e}function o(e,t){return Object.hasOwnProperty.call(e,t)}function s(e,t){return Object.hasOwnProperty.call(e,t)&&t}t.compare=function(e,t){if(n.isBuffer(e)){for(var r=Math.min(e.length,t.length),i=0;i<r;i++){var o=e[i]-t[i];if(o)return o}return e.length-t.length}return e<t?-1:e>t?1:0};var a=t.lowerBoundKey=function(e){return s(e,"gt")||s(e,"gte")||s(e,"min")||(e.reverse?s(e,"end"):s(e,"start"))||void 0},u=t.lowerBound=function(e,t){var r=a(e);return r?e[r]:t},c=t.lowerBoundInclusive=function(e){return!o(e,"gt")},l=t.upperBoundInclusive=function(e){return!o(e,"lt")},f=t.lowerBoundExclusive=function(e){return!c(e)},h=t.upperBoundExclusive=function(e){return!l(e)},p=t.upperBoundKey=function(e){return s(e,"lt")||s(e,"lte")||s(e,"max")||(e.reverse?s(e,"start"):s(e,"end"))||void 0},d=t.upperBound=function(e,t){var r=p(e);return r?e[r]:t};function y(e){return e}t.start=function(e,t){return e.reverse?d(e,t):u(e,t)},t.end=function(e,t){return e.reverse?u(e,t):d(e,t)},t.startInclusive=function(e){return e.reverse?l(e):c(e)},t.endInclusive=function(e){return e.reverse?c(e):l(e)},t.toLtgt=function(e,r,n,i,s){r=r||{},n=n||y;var a=arguments.length>3,u=t.lowerBoundKey(e),c=t.upperBoundKey(e);return u?"gt"===u?r.gt=n(e.gt,!1):r.gte=n(e[u],!1):a&&(r.gte=n(i,!1)),c?"lt"===c?r.lt=n(e.lt,!0):r.lte=n(e[c],!0):a&&(r.lte=n(s,!0)),null!=e.reverse&&(r.reverse=!!e.reverse),o(r,"max")&&delete r.max,o(r,"min")&&delete r.min,o(r,"start")&&delete r.start,o(r,"end")&&delete r.end,r},t.contains=function(e,r,n){n=n||t.compare;var o=u(e);if(i(o)&&((s=n(r,o))<0||0===s&&f(e)))return!1;var s,a=d(e);if(i(a)&&((s=n(r,a))>0||0===s&&h(e)))return!1;return!0},t.filter=function(e,r){return function(n){return t.contains(e,n,r)}}},4155:e=>{var t,r,n=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var a,u=[],c=!1,l=-1;function f(){c&&a&&(c=!1,a.length?u=a.concat(u):l=-1,u.length&&h())}function h(){if(!c){var e=s(f);c=!0;for(var t=u.length;t;){for(a=u,u=[];++l<t;)a&&a[l].run();l=-1,t=u.length}a=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function d(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new p(e,t)),1!==u.length||c||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=d,n.addListener=d,n.once=d,n.off=d,n.removeListener=d,n.removeAllListeners=d,n.emit=d,n.prependListener=d,n.prependOnceListener=d,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},4375:(e,t,r)=>{let n;e.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:r.g):e=>(n||(n=Promise.resolve())).then(e).catch((e=>setTimeout((()=>{throw e}),0)))},3527:e=>{e.exports="function"==typeof queueMicrotask?queueMicrotask:e=>Promise.resolve().then(e)},9967:(e,t,r)=>{e.exports=function(e,t,r){if("number"!=typeof t)throw new Error("second argument must be a Number");let i,o,s,a,u,c,l=!0;Array.isArray(e)?(i=[],s=o=e.length):(a=Object.keys(e),i={},s=o=a.length);function f(e){function t(){r&&r(e,i),r=null}l?n(t):t()}function h(t,r,n){if(i[t]=n,r&&(u=!0),0==--s||r)f(r);else if(!u&&c<o){let t;a?(t=a[c],c+=1,e[t]((function(e,r){h(t,e,r)}))):(t=c,c+=1,e[t]((function(e,r){h(t,e,r)})))}}c=t,s?a?a.some((function(r,n){return e[r]((function(e,t){h(r,e,t)})),n===t-1})):e.some((function(e,r){return e((function(e,t){h(r,e,t)})),r===t-1})):f(null);l=!1};const n=r(4375)},554:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.worker=void 0;const i=n(r(4918)),o=n(r(9558)),s=n(r(2413));function a({filename:e,env:t,isMaster:r,thread:n}){return new u(e)}t.worker=a;class u extends s.default{constructor(e,t){super();let r=this,n=o.default(e);this.db=new i.default(n,{},(async e=>{this.emit("open"),t&&t(e,r)}))}}t.default=u,u.worker=a},2413:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(9699),o=r(3388),s=r(8764),a=n(r(4918)),u=n(r(4840)),c=n(r(6729)),l={sync:!1,infoLog:"error",errorIfExists:!1};a.default.prototype.set=a.default.prototype.put;class f extends c.default{constructor(){super()}async set(e,t,r=0){await this.put(e,t,r)}async put(e,t,r=0){let n=this.toValue(t,r);await new Promise((t=>this.db.put(e,n,l,(()=>t(void 0)))))}toValue(e,t=0){let r=s.Buffer.from([]),n=i.Type.Object;"string"==typeof e?(n=i.Type.String,r=s.Buffer.from(e)):"number"==typeof e?(n=i.Type.Number,r=s.Buffer.from(o.int2Bit(e))):"boolean"==typeof e?(n=i.Type.Boolean,r=s.Buffer.from([!0===e?1:0])):e instanceof s.Buffer?(n=i.Type.Buffer,r=e):(n=i.Type.Object,r=s.Buffer.from(JSON.stringify(e))),t=t<=0?0:t,t=Math.min(t,Math.pow(2,32));let a=s.Buffer.from(o.int2Bit(t,4)),u=s.Buffer.from(o.int2Bit(Math.floor(Date.now()/1e3),5));return r=s.Buffer.concat([s.Buffer.from([n]),u,a,r]),r}async getSet(e,t,r=0){let n=await this.get(e);return await this.set(e,t,r),n}async getIntSet(e,t,r=0){let n=await this.getInt(e);return await this.set(e,t,r),n}async getStringSet(e,t,r=0){let n=await this.getString(e);return await this.set(e,t,r),n}async getFloatSet(e,t,r=0){let n=await this.getFloat(e);return await this.set(e,t,r),n}async getString(e,t=!1){let r=await this.get(e,t);return JSON.stringify(r)}async getInt(e,t=!1){let r=await this.get(e,t);return parseInt(r)||0}async getFloat(e,t=!1){let r=await this.get(e,t);return parseFloat(r)}async get(e,t=!1){let r=await this.db.get(e).catch((e=>{}));if(r){let n=h(r);if(n){if(n.ttl>0){let i=Math.ceil(Date.now()/1e3);if(n.startAt+n.ttl<i)return void this.del(e);if(t){let t=i-n.startAt+n.ttl,a=s.Buffer.from(o.int2Bit(t,4));this.db.put(e,s.Buffer.concat([s.Buffer.from([n.type]),r.slice(1,6),a,n.buffer]))}}return n.value()}}}async getMany(...e){let t=await this.db.getMany(e,{}).catch((e=>[])),r=[];for(let n=0;n<t.length;n++){let i=e[n],o=h(t[n]);if(o){if(o.ttl>0){let e=Math.ceil(Date.now()/1e3);o.startAt+o.ttl<e&&(this.del(i),r.push(void 0))}r.push(o.value())}else r.push(void 0)}return r}async expire(e,t=0){if((t=Math.floor(t))<1)return;let r=this.get(e);return this.put(e,r,t)}async exist(e){return this.has(e)}async has(e){return!!await this.get(e)}async increment(e,t=1,r=0){let n=await this.get(e)||0;return n+=t,await this.put(e,n,r),n}async del(...e){if(e.length<1)return Promise.resolve();let t=[];e=e.filter((e=>null!=e));for(let r of e)r.indexOf("*")>=0?await this.iterator({key:r},(async(e,r)=>{if(t.length>999)return f.Break;t.push({type:"del",key:e})})):t.push({type:"del",key:r});await this.batch(t)}async batch(e){e instanceof Array&&(e=e.map((e=>("put"==e.type&&(e.value=this.toValue(e.value,e.ttl),delete e.ttl),e)))),await new Promise((t=>this.db.batch(e,l,(()=>t(void 0)))))}async clear(e){return this.db.clear(e)}async close(){return new Promise((e=>{this.db.close((()=>setTimeout((()=>e(void 0)),150)))}))}async count(e,t){let r=0;return await this.iterator({key:e,start:0,limit:-1,filter:t},(async(e,t)=>{r++})),r}async total(){let e=0,t=s.Buffer.from([0]),r=Object.assign({},{limit:-1,keys:!0,values:!1},{gte:t}),n=this.db.iterator(r);return n.seek(t),await new Promise((t=>{!function r(){n.next((async(n,i,o)=>{if(!i)return t(e);e++,r()}))}()})).catch((e=>console.warn("countQuick error",e.message))),e}async find({key:e,limit:t=100,start:r=0,reverse:n=!1,keys:i=!1,flow:o=!1,filter:s,query:a={}}){let u=[],c=p(a||{},s);return await this.iterator({key:e,limit:t,start:r,flow:o,filter:c,reverse:n},((e,t)=>{void 0!==t&&(i?u.push({key:e,value:t}):u.push(t))})),u}async iterator({key:e,limit:t=100,start:r=0,filter:n,reverse:i=!1,flow:o=!1},s){let a=this;this.db;let u=String(e).trim(),c=u.endsWith("*"),l="*"===u;u=l?u:u.replace(/^\*|\*$/g,"");let p=u.replace(/[\*]+$/,"").trim();p=p.length<1?"":p.slice(0,p.length-1)+String.fromCharCode(p[p.length-1].charCodeAt(0)+1);let d=Object.assign({},{key:e,limit:-1,values:!0,reverse:i,gte:u}),y=this.db.iterator(d);return new Promise((async(e,d)=>{let g=0,_=-1;if(!y)return e();y.seek(i?p:u),function i(){y.next((async(p,d,m)=>{try{if(!d||p)return y.end((e=>e&&console.error("liondb err",e.message))),e();if(_++,r>_)return i();let b=String(d);if(c){if(t>0&&g>=t)return y.end((e=>e&&console.error("liondb err",e.message))),e();if(!o&&!l&&!b.startsWith(u))return y.end((e=>e&&console.error("err",e.message))),e()}else if(b!=u)return y.end((e=>e&&console.error("liondb err",e.message))),e();let v=h(m);if(void 0===v)return i();let w=Math.ceil(Date.now()/1e3);if(v.ttl>0&&v.startAt+v.ttl<w)a.del(b),await async function(e=100){return new Promise((t=>setTimeout((()=>t(void 0)),e)))}(5);else{let t=v.value();if(n){if(1!=await n(t,b,{get:async e=>a.get(e),getMany:async(...e)=>a.getMany(...e)}))return i()}if(g++,await s(b,t)===f.Break)return y.end((e=>e&&console.error("liondb err break",e.message))),e()}i()}catch(t){console.info("err",t.stack),y.end((e=>e&&console.error("err",e.message))),e()}}))}()}))}getProperty(e){try{return this.db.db.getProperty(e)}catch(e){return}}async filter(e,t,r){let n=this,i=p(t||{},r);return await i(e,"",{get:async e=>n.get(e),getMany:async(...e)=>n.getMany(...e)})}}function h(e){try{if(null==e)return;let t=e[0],r=o.bit2Int(e.slice(1,6)),n=o.bit2Int(e.slice(6,10)),s=e.slice(10);return{ttl:n,value:()=>{let e;switch(t){case i.Type.String:e=s.toString();break;case i.Type.Number:e=o.bit2Int(s);break;case i.Type.Boolean:e=s[0]>=1;break;case i.Type.Buffer:e=s;break;case i.Type.Object:e=JSON.parse(s.toString())}return e},startAt:r,type:t,buffer:s}}catch(t){return void console.debug("liondb analyzeValue error",null==e?void 0:e.length,t)}}function p(e,t){return async function(r,n,i){let o=!1;if(null==r)return!1;if(t){Object.prototype.toString.call(t);try{o=await t(r,n,i)}catch(e){console.warn("filter error ",t.toString(),e.message)}if(!o)return!1}else o=!0;return o=u.default(e,r),o}}t.default=f,f.Break="break"},4840:(e,t)=>{"use strict";function r(e,t,r="$equal"){try{switch(r){case"$lt":return e>t;case"$lte":return e>=t;case"$gt":return e<t;case"$gte":return e<=t;case"$ne":return e!=t;default:return/[*]$/.test(e)?(null==t?"":t).startsWith(e.replace(/[*]+$/,"")):/^[*]/.test(e)?(null==t?"":t).endsWith(e.replace(/^[*]+/,"")):e==t}}catch(r){console.warn("matchLike error",e,t,r.stack||r.message)}}function n(e){let t=typeof e;return"string"===t||"number"===t||"boolean"===t||"bigint"===t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,i,o="$equal"){let s=0,a=!1;if(n(i))return!0;for(let u in t){if(/^[$]/.test(u)){if(a=e(t[u],i,u),!a)return!1;continue}let c=t[u],l=i[u];s++;let f=n(c),h=n(l);if(f&&h&&(a=r(c,l,o),!a))break;if(void 0===l)a=r(c,l,o);else if(l instanceof Array){let e=c instanceof Array?c:[c],t=!1;for(let n of e)l.find((e=>r(n,e,o)))&&(t=!0);a=t}else if(c instanceof Array){let e=!1;c.find((e=>r(e,l,o)))&&(e=!0),a=e}if(!a)return!1}return a=s<1||a,a}},5254:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(554));t.default=i.default,e.exports=i.default},9699:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Type=void 0,t.Type={String:1,Number:2,Object:3,Buffer:4,Boolean:5}},3388:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bit2Int=t.int2Bit=void 0,t.int2Bit=function(e,t=6){let r=Array(6);e=Math.floor(e%281474976710656);let n=Math.floor(e/Math.pow(2,32)),i=Math.floor(e%Math.pow(2,32));for(let e=5;e>=0;e--)r[e]=e>=2?i>>8*(6-e-1)&255:n>>(6-e-1)%4*8&255;return r.slice(6-Math.min(t,6))},t.bit2Int=function(e){e=e.slice(Math.max(e.length-6,0));let t=0,r=0,n=0;for(let t=0;t<e.length;t++){let i=8*(e.length-t-1),o=e[t];i>=32?n+=Math.pow(2,32)*(o<<i%32):i<=24&&(r+=24==i?o*Math.pow(2,24):o<<i)}return t=n+r,t}},4927:(e,t,r)=>{function n(e){try{if(!r.g.localStorage)return!1}catch(e){return!1}var t=r.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}},384:e=>{e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},5955:(e,t,r)=>{"use strict";var n=r(2584),i=r(8662),o=r(6430),s=r(5692);function a(e){return e.call.bind(e)}var u="undefined"!=typeof BigInt,c="undefined"!=typeof Symbol,l=a(Object.prototype.toString),f=a(Number.prototype.valueOf),h=a(String.prototype.valueOf),p=a(Boolean.prototype.valueOf);if(u)var d=a(BigInt.prototype.valueOf);if(c)var y=a(Symbol.prototype.valueOf);function g(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function _(e){return"[object Map]"===l(e)}function m(e){return"[object Set]"===l(e)}function b(e){return"[object WeakMap]"===l(e)}function v(e){return"[object WeakSet]"===l(e)}function w(e){return"[object ArrayBuffer]"===l(e)}function k(e){return"undefined"!=typeof ArrayBuffer&&(w.working?w(e):e instanceof ArrayBuffer)}function S(e){return"[object DataView]"===l(e)}function E(e){return"undefined"!=typeof DataView&&(S.working?S(e):e instanceof DataView)}t.isArgumentsObject=n,t.isGeneratorFunction=i,t.isTypedArray=s,t.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},t.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):s(e)||E(e)},t.isUint8Array=function(e){return"Uint8Array"===o(e)},t.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===o(e)},t.isUint16Array=function(e){return"Uint16Array"===o(e)},t.isUint32Array=function(e){return"Uint32Array"===o(e)},t.isInt8Array=function(e){return"Int8Array"===o(e)},t.isInt16Array=function(e){return"Int16Array"===o(e)},t.isInt32Array=function(e){return"Int32Array"===o(e)},t.isFloat32Array=function(e){return"Float32Array"===o(e)},t.isFloat64Array=function(e){return"Float64Array"===o(e)},t.isBigInt64Array=function(e){return"BigInt64Array"===o(e)},t.isBigUint64Array=function(e){return"BigUint64Array"===o(e)},_.working="undefined"!=typeof Map&&_(new Map),t.isMap=function(e){return"undefined"!=typeof Map&&(_.working?_(e):e instanceof Map)},m.working="undefined"!=typeof Set&&m(new Set),t.isSet=function(e){return"undefined"!=typeof Set&&(m.working?m(e):e instanceof Set)},b.working="undefined"!=typeof WeakMap&&b(new WeakMap),t.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(b.working?b(e):e instanceof WeakMap)},v.working="undefined"!=typeof WeakSet&&v(new WeakSet),t.isWeakSet=function(e){return v(e)},w.working="undefined"!=typeof ArrayBuffer&&w(new ArrayBuffer),t.isArrayBuffer=k,S.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&S(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=E;var T="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function O(e){return"[object SharedArrayBuffer]"===l(e)}function x(e){return void 0!==T&&(void 0===O.working&&(O.working=O(new T)),O.working?O(e):e instanceof T)}function B(e){return g(e,f)}function A(e){return g(e,h)}function M(e){return g(e,p)}function I(e){return u&&g(e,d)}function P(e){return c&&g(e,y)}t.isSharedArrayBuffer=x,t.isAsyncFunction=function(e){return"[object AsyncFunction]"===l(e)},t.isMapIterator=function(e){return"[object Map Iterator]"===l(e)},t.isSetIterator=function(e){return"[object Set Iterator]"===l(e)},t.isGeneratorObject=function(e){return"[object Generator]"===l(e)},t.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===l(e)},t.isNumberObject=B,t.isStringObject=A,t.isBooleanObject=M,t.isBigIntObject=I,t.isSymbolObject=P,t.isBoxedPrimitive=function(e){return B(e)||A(e)||M(e)||I(e)||P(e)},t.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(k(e)||x(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})}))},9539:(e,t,r)=>{var n=r(4155),i=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},o=/%[sdj%]/g;t.format=function(e){if(!b(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(c(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,s=String(e).replace(o,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),a=n[r];r<i;a=n[++r])_(a)||!k(a)?s+=" "+a:s+=" "+c(a);return s},t.deprecate=function(e,r){if(void 0!==n&&!0===n.noDeprecation)return e;if(void 0===n)return function(){return t.deprecate(e,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(n.throwDeprecation)throw new Error(r);n.traceDeprecation?console.trace(r):console.error(r),i=!0}return e.apply(this,arguments)}};var s={},a=/^$/;if(n.env.NODE_DEBUG){var u=n.env.NODE_DEBUG;u=u.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),a=new RegExp("^"+u+"$","i")}function c(e,r){var n={seen:[],stylize:f};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),g(r)?n.showHidden=r:r&&t._extend(n,r),v(n.showHidden)&&(n.showHidden=!1),v(n.depth)&&(n.depth=2),v(n.colors)&&(n.colors=!1),v(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=l),h(n,e,n.depth)}function l(e,t){var r=c.styles[t];return r?"["+c.colors[r][0]+"m"+e+"["+c.colors[r][1]+"m":e}function f(e,t){return e}function h(e,r,n){if(e.customInspect&&r&&T(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,e);return b(i)||(i=h(e,i,n)),i}var o=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(b(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(m(t))return e.stylize(""+t,"number");if(g(t))return e.stylize(""+t,"boolean");if(_(t))return e.stylize("null","null")}(e,r);if(o)return o;var s=Object.keys(r),a=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(r)),E(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return p(r);if(0===s.length){if(T(r)){var u=r.name?": "+r.name:"";return e.stylize("[Function"+u+"]","special")}if(w(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(S(r))return e.stylize(Date.prototype.toString.call(r),"date");if(E(r))return p(r)}var c,l="",f=!1,k=["{","}"];(y(r)&&(f=!0,k=["[","]"]),T(r))&&(l=" [Function"+(r.name?": "+r.name:"")+"]");return w(r)&&(l=" "+RegExp.prototype.toString.call(r)),S(r)&&(l=" "+Date.prototype.toUTCString.call(r)),E(r)&&(l=" "+p(r)),0!==s.length||f&&0!=r.length?n<0?w(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),c=f?function(e,t,r,n,i){for(var o=[],s=0,a=t.length;s<a;++s)M(t,String(s))?o.push(d(e,t,r,n,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(d(e,t,r,n,i,!0))})),o}(e,r,n,a,s):s.map((function(t){return d(e,r,n,a,t,f)})),e.seen.pop(),function(e,t,r){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(c,l,k)):k[0]+l+k[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,r,n,i,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special")),M(n,i)||(s="["+i+"]"),a||(e.seen.indexOf(u.value)<0?(a=_(r)?h(e,u.value,null):h(e,u.value,r-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),v(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function y(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function _(e){return null===e}function m(e){return"number"==typeof e}function b(e){return"string"==typeof e}function v(e){return void 0===e}function w(e){return k(e)&&"[object RegExp]"===O(e)}function k(e){return"object"==typeof e&&null!==e}function S(e){return k(e)&&"[object Date]"===O(e)}function E(e){return k(e)&&("[object Error]"===O(e)||e instanceof Error)}function T(e){return"function"==typeof e}function O(e){return Object.prototype.toString.call(e)}function x(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(e=e.toUpperCase(),!s[e])if(a.test(e)){var r=n.pid;s[e]=function(){var n=t.format.apply(t,arguments);console.error("%s %d: %s",e,r,n)}}else s[e]=function(){};return s[e]},t.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=r(5955),t.isArray=y,t.isBoolean=g,t.isNull=_,t.isNullOrUndefined=function(e){return null==e},t.isNumber=m,t.isString=b,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=v,t.isRegExp=w,t.types.isRegExp=w,t.isObject=k,t.isDate=S,t.types.isDate=S,t.isError=E,t.types.isNativeError=E,t.isFunction=T,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(384);var B=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(){var e=new Date,t=[x(e.getHours()),x(e.getMinutes()),x(e.getSeconds())].join(":");return[e.getDate(),B[e.getMonth()],t].join(" ")}function M(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",A(),t.format.apply(t,arguments))},t.inherits=r(5717),t._extend=function(e,t){if(!t||!k(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var I="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function P(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(I&&e[I]){var t;if("function"!=typeof(t=e[I]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,I,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,i)}catch(e){r(e)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),I&&Object.defineProperty(t,I,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,i(e))},t.promisify.custom=I,t.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);var i=t.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};e.apply(this,t).then((function(e){n.nextTick(s.bind(null,null,e))}),(function(e){n.nextTick(P.bind(null,e,s))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,i(e)),t}},6430:(e,t,r)=>{"use strict";var n=r(9804),i=r(3083),o=r(1924),s=o("Object.prototype.toString"),a=r(6410)(),u="undefined"==typeof globalThis?r.g:globalThis,c=i(),l=o("String.prototype.slice"),f={},h=r(882),p=Object.getPrototypeOf;a&&h&&p&&n(c,(function(e){if("function"==typeof u[e]){var t=new u[e];if(Symbol.toStringTag in t){var r=p(t),n=h(r,Symbol.toStringTag);if(!n){var i=p(r);n=h(i,Symbol.toStringTag)}f[e]=n.get}}}));var d=r(5692);e.exports=function(e){return!!d(e)&&(a&&Symbol.toStringTag in e?function(e){var t=!1;return n(f,(function(r,n){if(!t)try{var i=r.call(e);i===n&&(t=i)}catch(e){}})),t}(e):l(s(e),8,-1))}},267:()=>{},1367:()=>{},3083:(e,t,r)=>{"use strict";var n=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],i="undefined"==typeof globalThis?r.g:globalThis;e.exports=function(){for(var e=[],t=0;t<n.length;t++)"function"==typeof i[n[t]]&&(e[e.length]=n[t]);return e}},882:(e,t,r)=>{"use strict";var n=r(210)("%Object.getOwnPropertyDescriptor%");if(n)try{n([],"length")}catch(e){n=null}e.exports=n}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var o=r[e]={exports:{}};return t[e].call(o.exports,o,o.exports,n),o.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var i=n(5254);e.exports=i})()},742:(e,t)=>{"use strict";t.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,o=u(e),s=o[0],a=o[1],c=new i(function(e,t,r){return 3*(t+r)/4-r}(0,s,a)),l=0,f=a>0?s-4:s;for(r=0;r<f;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;2===a&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[l++]=255&t);1===a&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=16383,a=0,u=n-i;a<u;a+=s)o.push(c(e,a,a+s>u?u:a+s));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)r[s]=o[s],n[o.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,n){for(var i,o,s=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},764:(e,t,r)=>{"use strict";const n=r(742),i=r(645),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50;const s=2147483647;function a(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return f(e)}return c(e,t,r)}function c(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|y(e,t);let n=a(r);const i=n.write(e,t);i!==r&&(n=n.slice(0,i));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Y(e,Uint8Array)){const t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return h(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Y(e,ArrayBuffer)||e&&Y(e.buffer,ArrayBuffer))return p(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(Y(e,SharedArrayBuffer)||e&&Y(e.buffer,SharedArrayBuffer)))return p(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return u.from(n,t,r);const i=function(e){if(u.isBuffer(e)){const t=0|d(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||Q(e.length)?a(0):h(e);if("Buffer"===e.type&&Array.isArray(e.data))return h(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function f(e){return l(e),a(e<0?0:0|d(e))}function h(e){const t=e.length<0?0:0|d(e.length),r=a(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function p(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,u.prototype),n}function d(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function y(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Y(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return G(e).length;default:if(i)return n?-1:V(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,r);case"utf8":case"utf-8":return O(this,t,r);case"ascii":return B(this,t,r);case"latin1":case"binary":return A(this,t,r);case"base64":return T(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function _(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function m(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Q(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:b(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):b(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,r,n,i){let o,s=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){let n=-1;for(o=r;o<a;o++)if(c(e,o)===c(t,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===u)return n*s}else-1!==n&&(o-=o-n),n=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){let r=!0;for(let n=0;n<u;n++)if(c(e,o+n)!==c(t,n)){r=!1;break}if(r)return o}return-1}function v(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;const o=t.length;let s;for(n>o/2&&(n=o/2),s=0;s<n;++s){const n=parseInt(t.substr(2*s,2),16);if(Q(n))return s;e[r+s]=n}return s}function w(e,t,r,n){return K(V(t,e.length-r),e,r,n)}function k(e,t,r,n){return K(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function S(e,t,r,n){return K(G(t),e,r,n)}function E(e,t,r,n){return K(function(e,t){let r,n,i;const o=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function T(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function O(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;for(;i<r;){const t=e[i];let o=null,s=t>239?4:t>223?3:t>191?2:1;if(i+s<=r){let r,n,a,u;switch(s){case 1:t<128&&(o=t);break;case 2:r=e[i+1],128==(192&r)&&(u=(31&t)<<6|63&r,u>127&&(o=u));break;case 3:r=e[i+1],n=e[i+2],128==(192&r)&&128==(192&n)&&(u=(15&t)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(u=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return function(e){const t=e.length;if(t<=x)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=x));return r}(n)}t.kMaxLength=s,u.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return function(e,t,r){return l(e),e<=0?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)}(e,t,r)},u.allocUnsafe=function(e){return f(e)},u.allocUnsafeSlow=function(e){return f(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(Y(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),Y(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=u.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(Y(t,Uint8Array))i+t.length>n.length?(u.isBuffer(t)||(t=u.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!u.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},u.byteLength=y,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)_(this,t,t+1);return this},u.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)_(this,t,t+3),_(this,t+1,t+2);return this},u.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)_(this,t,t+7),_(this,t+1,t+6),_(this,t+2,t+5),_(this,t+3,t+4);return this},u.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?O(this,0,e):g.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(e,t,r,n,i){if(Y(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0);const a=Math.min(o,s),c=this.slice(n,i),l=e.slice(t,r);for(let e=0;e<a;++e)if(c[e]!==l[e]){o=c[e],s=l[e];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return v(this,e,t,r);case"utf8":case"utf-8":return w(this,e,t,r);case"ascii":case"latin1":case"binary":return k(this,e,t,r);case"base64":return S(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const x=4096;function B(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function A(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function M(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=J[e[n]];return i}function I(e,t,r){const n=e.slice(t,r);let i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}function P(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function C(e,t,r,n,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function R(e,t,r,n,i){F(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,r}function j(e,t,r,n,i){F(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s>>=8,e[r+2]=s,s>>=8,e[r+1]=s,s>>=8,e[r]=s,r+8}function L(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function D(e,t,r,n,o){return t=+t,r>>>=0,o||L(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function U(e,t,r,n,o){return t=+t,r>>>=0,o||L(e,0,r,8),i.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readBigUInt64LE=X((function(e){W(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||z(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),u.prototype.readBigUInt64BE=X((function(e){W(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||z(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=t,i=1,o=this[e+--n];for(;n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||P(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||P(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readBigInt64LE=X((function(e){W(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||z(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),u.prototype.readBigInt64BE=X((function(e){W(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||z(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),u.prototype.readFloatLE=function(e,t){return e>>>=0,t||P(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||P(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||P(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||P(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){C(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){C(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigUInt64LE=X((function(e,t=0){return R(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=X((function(e,t=0){return j(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);C(this,e,t,r,n-1,-n)}let i=0,o=1,s=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);C(this,e,t,r,n-1,-n)}let i=r-1,o=1,s=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigInt64LE=X((function(e,t=0){return R(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=X((function(e,t=0){return j(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(e,t,r){return D(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return D(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return U(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return U(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{const o=u.isBuffer(e)?e:u.from(e,n),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%s]}return this};const $={};function N(e,t,r){$[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function q(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function F(e,t,r,n,i,o){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new $.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){W(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||z(t,e.length-(r+1))}(n,i,o)}function W(e,t){if("number"!=typeof e)throw new $.ERR_INVALID_ARG_TYPE(t,"number",e)}function z(e,t,r){if(Math.floor(e)!==e)throw W(e,r),new $.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new $.ERR_BUFFER_OUT_OF_BOUNDS;throw new $.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}N("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),N("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),N("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=q(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=q(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const H=/[^+/0-9A-Za-z-_]/g;function V(e,t){let r;t=t||1/0;const n=e.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function G(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function K(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function Y(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Q(e){return e!=e}const J=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function X(e){return"undefined"==typeof BigInt?Z:e}function Z(){throw new Error("BigInt not supported")}},487:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};e.exports=t},12:e=>{var t,r;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var r=[],n=0;n<e.length;n+=3)for(var i=e[n]<<16|e[n+1]<<8|e[n+2],o=0;o<4;o++)8*n+6*o<=8*e.length?r.push(t.charAt(i>>>6*(3-o)&63)):r.push("=");return r.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],n=0,i=0;n<e.length;i=++n%4)0!=i&&r.push((t.indexOf(e.charAt(n-1))&Math.pow(2,-2*i+8)-1)<<2*i|t.indexOf(e.charAt(n))>>>6-2*i);return r}},e.exports=r},484:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,r=36e5,n="millisecond",i="second",o="minute",s="hour",a="day",u="week",c="month",l="quarter",f="year",h="date",p="Invalid Date",d=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},_=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},m={s:_,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),i=r%60;return(t<=0?"+":"-")+_(n,2,"0")+":"+_(i,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),i=t.clone().add(n,c),o=r-i<0,s=t.clone().add(n+(o?-1:1),c);return+(-(n+(r-i)/(o?i-s:s-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:f,w:u,d:a,D:h,h:s,m:o,s:i,ms:n,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},b="en",v={};v[b]=g;var w=function(e){return e instanceof T},k=function e(t,r,n){var i;if(!t)return b;if("string"==typeof t){var o=t.toLowerCase();v[o]&&(i=o),r&&(v[o]=r,i=o);var s=t.split("-");if(!i&&s.length>1)return e(s[0])}else{var a=t.name;v[a]=t,i=a}return!n&&i&&(b=i),i||!n&&b},S=function(e,t){if(w(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new T(r)},E=m;E.l=k,E.i=w,E.w=function(e,t){return S(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var T=function(){function g(e){this.$L=k(e.locale,null,!0),this.parse(e)}var _=g.prototype;return _.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(E.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(d);if(n){var i=n[2]-1||0,o=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},_.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},_.$utils=function(){return E},_.isValid=function(){return!(this.$d.toString()===p)},_.isSame=function(e,t){var r=S(e);return this.startOf(t)<=r&&r<=this.endOf(t)},_.isAfter=function(e,t){return S(e)<this.startOf(t)},_.isBefore=function(e,t){return this.endOf(t)<S(e)},_.$g=function(e,t,r){return E.u(e)?this[t]:this.set(r,e)},_.unix=function(){return Math.floor(this.valueOf()/1e3)},_.valueOf=function(){return this.$d.getTime()},_.startOf=function(e,t){var r=this,n=!!E.u(t)||t,l=E.p(e),p=function(e,t){var i=E.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return n?i:i.endOf(a)},d=function(e,t){return E.w(r.toDate()[e].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},y=this.$W,g=this.$M,_=this.$D,m="set"+(this.$u?"UTC":"");switch(l){case f:return n?p(1,0):p(31,11);case c:return n?p(1,g):p(0,g+1);case u:var b=this.$locale().weekStart||0,v=(y<b?y+7:y)-b;return p(n?_-v:_+(6-v),g);case a:case h:return d(m+"Hours",0);case s:return d(m+"Minutes",1);case o:return d(m+"Seconds",2);case i:return d(m+"Milliseconds",3);default:return this.clone()}},_.endOf=function(e){return this.startOf(e,!1)},_.$set=function(e,t){var r,u=E.p(e),l="set"+(this.$u?"UTC":""),p=(r={},r[a]=l+"Date",r[h]=l+"Date",r[c]=l+"Month",r[f]=l+"FullYear",r[s]=l+"Hours",r[o]=l+"Minutes",r[i]=l+"Seconds",r[n]=l+"Milliseconds",r)[u],d=u===a?this.$D+(t-this.$W):t;if(u===c||u===f){var y=this.clone().set(h,1);y.$d[p](d),y.init(),this.$d=y.set(h,Math.min(this.$D,y.daysInMonth())).$d}else p&&this.$d[p](d);return this.init(),this},_.set=function(e,t){return this.clone().$set(e,t)},_.get=function(e){return this[E.p(e)]()},_.add=function(n,l){var h,p=this;n=Number(n);var d=E.p(l),y=function(e){var t=S(p);return E.w(t.date(t.date()+Math.round(e*n)),p)};if(d===c)return this.set(c,this.$M+n);if(d===f)return this.set(f,this.$y+n);if(d===a)return y(1);if(d===u)return y(7);var g=(h={},h[o]=t,h[s]=r,h[i]=e,h)[d]||1,_=this.$d.getTime()+n*g;return E.w(_,this)},_.subtract=function(e,t){return this.add(-1*e,t)},_.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||p;var n=e||"YYYY-MM-DDTHH:mm:ssZ",i=E.z(this),o=this.$H,s=this.$m,a=this.$M,u=r.weekdays,c=r.months,l=function(e,r,i,o){return e&&(e[r]||e(t,n))||i[r].slice(0,o)},f=function(e){return E.s(o%12||12,e,"0")},h=r.meridiem||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n},d={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:E.s(a+1,2,"0"),MMM:l(r.monthsShort,a,c,3),MMMM:l(c,a),D:this.$D,DD:E.s(this.$D,2,"0"),d:String(this.$W),dd:l(r.weekdaysMin,this.$W,u,2),ddd:l(r.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(o),HH:E.s(o,2,"0"),h:f(1),hh:f(2),a:h(o,s,!0),A:h(o,s,!1),m:String(s),mm:E.s(s,2,"0"),s:String(this.$s),ss:E.s(this.$s,2,"0"),SSS:E.s(this.$ms,3,"0"),Z:i};return n.replace(y,(function(e,t){return t||d[e]||i.replace(":","")}))},_.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},_.diff=function(n,h,p){var d,y=E.p(h),g=S(n),_=(g.utcOffset()-this.utcOffset())*t,m=this-g,b=E.m(this,g);return b=(d={},d[f]=b/12,d[c]=b,d[l]=b/3,d[u]=(m-_)/6048e5,d[a]=(m-_)/864e5,d[s]=m/r,d[o]=m/t,d[i]=m/e,d)[y]||m,p?b:E.a(b)},_.daysInMonth=function(){return this.endOf(c).$D},_.$locale=function(){return v[this.$L]},_.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=k(e,t,!0);return n&&(r.$L=n),r},_.clone=function(){return E.w(this.$d,this)},_.toDate=function(){return new Date(this.valueOf())},_.toJSON=function(){return this.isValid()?this.toISOString():null},_.toISOString=function(){return this.$d.toISOString()},_.toString=function(){return this.$d.toUTCString()},g}(),O=T.prototype;return S.prototype=O,[["$ms",n],["$s",i],["$m",o],["$H",s],["$W",a],["$M",c],["$y",f],["$D",h]].forEach((function(e){O[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),S.extend=function(e,t){return e.$i||(e(t,T,S),e.$i=!0),S},S.locale=k,S.isDayjs=w,S.unix=function(e){return S(1e3*e)},S.en=v[b],S.Ls=v,S.p={},S}()},729:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(e,t,n,o,s){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new i(n,o||e,s),u=r?r+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],a]:e._events[u].push(a):(e._events[u]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,i,o,s){var a=r?r+e:e;if(!this._events[a])return!1;var u,c,l=this._events[a],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,o),!0;case 6:return l.fn.call(l.context,t,n,i,o,s),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var h,p=l.length;for(c=0;c<p;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;case 4:l[c].fn.call(l[c].context,t,n,i);break;default:if(!u)for(h=1,u=new Array(f-1);h<f;h++)u[h-1]=arguments[h];l[c].fn.apply(l[c].context,u)}}return!0},a.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return o(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,i){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||i&&!a.once||n&&a.context!==n||s(this,o);else{for(var u=0,c=[],l=a.length;u<l;u++)(a[u].fn!==t||i&&!a[u].once||n&&a[u].context!==n)&&c.push(a[u]);c.length?this._events[o]=1===c.length?c[0]:c:s(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a},645:(e,t)=>{t.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,l=-7,f=r?i-1:0,h=r?-1:1,p=e[t+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+e[t+f],f+=h,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+e[t+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=c}return(p?-1:1)*s*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(s++,u/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(t*u-1)*Math.pow(2,i),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;e[r+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[r+p]=255&s,p+=d,s/=256,c-=8);e[r+p-d]|=128*y}},738:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},568:(e,t,r)=>{var n,i,o,s,a;n=r(12),i=r(487).utf8,o=r(738),s=r(487).bin,(a=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?s.stringToBytes(e):i.stringToBytes(e):o(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var r=n.bytesToWords(e),u=8*e.length,c=1732584193,l=-271733879,f=-1732584194,h=271733878,p=0;p<r.length;p++)r[p]=16711935&(r[p]<<8|r[p]>>>24)|4278255360&(r[p]<<24|r[p]>>>8);r[u>>>5]|=128<<u%32,r[14+(u+64>>>9<<4)]=u;var d=a._ff,y=a._gg,g=a._hh,_=a._ii;for(p=0;p<r.length;p+=16){var m=c,b=l,v=f,w=h;c=d(c,l,f,h,r[p+0],7,-680876936),h=d(h,c,l,f,r[p+1],12,-389564586),f=d(f,h,c,l,r[p+2],17,606105819),l=d(l,f,h,c,r[p+3],22,-1044525330),c=d(c,l,f,h,r[p+4],7,-176418897),h=d(h,c,l,f,r[p+5],12,1200080426),f=d(f,h,c,l,r[p+6],17,-1473231341),l=d(l,f,h,c,r[p+7],22,-45705983),c=d(c,l,f,h,r[p+8],7,1770035416),h=d(h,c,l,f,r[p+9],12,-1958414417),f=d(f,h,c,l,r[p+10],17,-42063),l=d(l,f,h,c,r[p+11],22,-1990404162),c=d(c,l,f,h,r[p+12],7,1804603682),h=d(h,c,l,f,r[p+13],12,-40341101),f=d(f,h,c,l,r[p+14],17,-1502002290),c=y(c,l=d(l,f,h,c,r[p+15],22,1236535329),f,h,r[p+1],5,-165796510),h=y(h,c,l,f,r[p+6],9,-1069501632),f=y(f,h,c,l,r[p+11],14,643717713),l=y(l,f,h,c,r[p+0],20,-373897302),c=y(c,l,f,h,r[p+5],5,-701558691),h=y(h,c,l,f,r[p+10],9,38016083),f=y(f,h,c,l,r[p+15],14,-660478335),l=y(l,f,h,c,r[p+4],20,-405537848),c=y(c,l,f,h,r[p+9],5,568446438),h=y(h,c,l,f,r[p+14],9,-1019803690),f=y(f,h,c,l,r[p+3],14,-187363961),l=y(l,f,h,c,r[p+8],20,1163531501),c=y(c,l,f,h,r[p+13],5,-1444681467),h=y(h,c,l,f,r[p+2],9,-51403784),f=y(f,h,c,l,r[p+7],14,1735328473),c=g(c,l=y(l,f,h,c,r[p+12],20,-1926607734),f,h,r[p+5],4,-378558),h=g(h,c,l,f,r[p+8],11,-2022574463),f=g(f,h,c,l,r[p+11],16,1839030562),l=g(l,f,h,c,r[p+14],23,-35309556),c=g(c,l,f,h,r[p+1],4,-1530992060),h=g(h,c,l,f,r[p+4],11,1272893353),f=g(f,h,c,l,r[p+7],16,-155497632),l=g(l,f,h,c,r[p+10],23,-1094730640),c=g(c,l,f,h,r[p+13],4,681279174),h=g(h,c,l,f,r[p+0],11,-358537222),f=g(f,h,c,l,r[p+3],16,-722521979),l=g(l,f,h,c,r[p+6],23,76029189),c=g(c,l,f,h,r[p+9],4,-640364487),h=g(h,c,l,f,r[p+12],11,-421815835),f=g(f,h,c,l,r[p+15],16,530742520),c=_(c,l=g(l,f,h,c,r[p+2],23,-995338651),f,h,r[p+0],6,-198630844),h=_(h,c,l,f,r[p+7],10,1126891415),f=_(f,h,c,l,r[p+14],15,-1416354905),l=_(l,f,h,c,r[p+5],21,-57434055),c=_(c,l,f,h,r[p+12],6,1700485571),h=_(h,c,l,f,r[p+3],10,-1894986606),f=_(f,h,c,l,r[p+10],15,-1051523),l=_(l,f,h,c,r[p+1],21,-2054922799),c=_(c,l,f,h,r[p+8],6,1873313359),h=_(h,c,l,f,r[p+15],10,-30611744),f=_(f,h,c,l,r[p+6],15,-1560198380),l=_(l,f,h,c,r[p+13],21,1309151649),c=_(c,l,f,h,r[p+4],6,-145523070),h=_(h,c,l,f,r[p+11],10,-1120210379),f=_(f,h,c,l,r[p+2],15,718787259),l=_(l,f,h,c,r[p+9],21,-343485551),c=c+m>>>0,l=l+b>>>0,f=f+v>>>0,h=h+w>>>0}return n.endian([c,l,f,h])})._ff=function(e,t,r,n,i,o,s){var a=e+(t&r|~t&n)+(i>>>0)+s;return(a<<o|a>>>32-o)+t},a._gg=function(e,t,r,n,i,o,s){var a=e+(t&n|r&~n)+(i>>>0)+s;return(a<<o|a>>>32-o)+t},a._hh=function(e,t,r,n,i,o,s){var a=e+(t^r^n)+(i>>>0)+s;return(a<<o|a>>>32-o)+t},a._ii=function(e,t,r,n,i,o,s){var a=e+(r^(t|~n))+(i>>>0)+s;return(a<<o|a>>>32-o)+t},a._blocksize=16,a._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var r=n.wordsToBytes(a(e,t));return t&&t.asBytes?r:t&&t.asString?s.bytesToString(r):n.bytesToHex(r)}},891:e=>{"use strict";var t,r={DEBUG:!1,LIB_VERSION:"2.45.0"};if("undefined"==typeof window){var n={hostname:""};t={navigator:{userAgent:""},document:{location:n,referrer:""},screen:{width:0,height:0},location:n}}else t=window;var i,o,s,a,u,c,l,f,h,p,d,y=Array.prototype,g=Function.prototype,_=Object.prototype,m=y.slice,b=_.toString,v=_.hasOwnProperty,w=t.console,k=t.navigator,S=t.document,E=t.opera,T=t.screen,O=k.userAgent,x=g.bind,B=y.forEach,A=y.indexOf,M=y.map,I=Array.isArray,P={},C={trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},R={log:function(){if(r.DEBUG&&!C.isUndefined(w)&&w)try{w.log.apply(w,arguments)}catch(e){C.each(arguments,(function(e){w.log(e)}))}},warn:function(){if(r.DEBUG&&!C.isUndefined(w)&&w){var e=["Mixpanel warning:"].concat(C.toArray(arguments));try{w.warn.apply(w,e)}catch(t){C.each(e,(function(e){w.warn(e)}))}}},error:function(){if(r.DEBUG&&!C.isUndefined(w)&&w){var e=["Mixpanel error:"].concat(C.toArray(arguments));try{w.error.apply(w,e)}catch(t){C.each(e,(function(e){w.error(e)}))}}},critical:function(){if(!C.isUndefined(w)&&w){var e=["Mixpanel error:"].concat(C.toArray(arguments));try{w.error.apply(w,e)}catch(t){C.each(e,(function(e){w.error(e)}))}}}},j=function(e,t){return function(){return arguments[0]="["+t+"] "+arguments[0],e.apply(R,arguments)}},L=function(e){return{log:j(R.log,e),error:j(R.error,e),critical:j(R.critical,e)}};C.bind=function(e,t){var r,n;if(x&&e.bind===x)return x.apply(e,m.call(arguments,1));if(!C.isFunction(e))throw new TypeError;return r=m.call(arguments,2),n=function(){if(!(this instanceof n))return e.apply(t,r.concat(m.call(arguments)));var i={};i.prototype=e.prototype;var o=new i;i.prototype=null;var s=e.apply(o,r.concat(m.call(arguments)));return Object(s)===s?s:o},n},C.each=function(e,t,r){if(null!=e)if(B&&e.forEach===B)e.forEach(t,r);else if(e.length===+e.length){for(var n=0,i=e.length;n<i;n++)if(n in e&&t.call(r,e[n],n,e)===P)return}else for(var o in e)if(v.call(e,o)&&t.call(r,e[o],o,e)===P)return},C.extend=function(e){return C.each(m.call(arguments,1),(function(t){for(var r in t)void 0!==t[r]&&(e[r]=t[r])})),e},C.isArray=I||function(e){return"[object Array]"===b.call(e)},C.isFunction=function(e){try{return/^\s*\bfunction\b/.test(e)}catch(e){return!1}},C.isArguments=function(e){return!(!e||!v.call(e,"callee"))},C.toArray=function(e){return e?e.toArray?e.toArray():C.isArray(e)||C.isArguments(e)?m.call(e):C.values(e):[]},C.map=function(e,t,r){if(M&&e.map===M)return e.map(t,r);var n=[];return C.each(e,(function(e){n.push(t.call(r,e))})),n},C.keys=function(e){var t=[];return null===e||C.each(e,(function(e,r){t[t.length]=r})),t},C.values=function(e){var t=[];return null===e||C.each(e,(function(e){t[t.length]=e})),t},C.include=function(e,t){var r=!1;return null===e?r:A&&e.indexOf===A?-1!=e.indexOf(t):(C.each(e,(function(e){if(r||(r=e===t))return P})),r)},C.includes=function(e,t){return-1!==e.indexOf(t)},C.inherit=function(e,t){return e.prototype=new t,e.prototype.constructor=e,e.superclass=t.prototype,e},C.isObject=function(e){return e===Object(e)&&!C.isArray(e)},C.isEmptyObject=function(e){if(C.isObject(e)){for(var t in e)if(v.call(e,t))return!1;return!0}return!1},C.isUndefined=function(e){return void 0===e},C.isString=function(e){return"[object String]"==b.call(e)},C.isDate=function(e){return"[object Date]"==b.call(e)},C.isNumber=function(e){return"[object Number]"==b.call(e)},C.isElement=function(e){return!(!e||1!==e.nodeType)},C.encodeDates=function(e){return C.each(e,(function(t,r){C.isDate(t)?e[r]=C.formatDate(t):C.isObject(t)&&(e[r]=C.encodeDates(t))})),e},C.timestamp=function(){return Date.now=Date.now||function(){return+new Date},Date.now()},C.formatDate=function(e){function t(e){return e<10?"0"+e:e}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())},C.strip_empty_properties=function(e){var t={};return C.each(e,(function(e,r){C.isString(e)&&e.length>0&&(t[r]=e)})),t},C.truncate=function(e,t){var r;return"string"==typeof e?r=e.slice(0,t):C.isArray(e)?(r=[],C.each(e,(function(e){r.push(C.truncate(e,t))}))):C.isObject(e)?(r={},C.each(e,(function(e,n){r[n]=C.truncate(e,t)}))):r=e,r},C.JSONEncode=function(e){var t=function(e){var t=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return t.lastIndex=0,t.test(e)?'"'+e.replace(t,(function(e){var t=r[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'},r=function(e,n){var i="",o=0,s="",a="",u=0,c=i,l=[],f=n[e];switch(f&&"object"==typeof f&&"function"==typeof f.toJSON&&(f=f.toJSON(e)),typeof f){case"string":return t(f);case"number":return isFinite(f)?String(f):"null";case"boolean":case"null":return String(f);case"object":if(!f)return"null";if(i+="    ",l=[],"[object Array]"===b.apply(f)){for(u=f.length,o=0;o<u;o+=1)l[o]=r(o,f)||"null";return a=0===l.length?"[]":i?"[\n"+i+l.join(",\n"+i)+"\n"+c+"]":"["+l.join(",")+"]",i=c,a}for(s in f)v.call(f,s)&&(a=r(s,f))&&l.push(t(s)+(i?": ":":")+a);return a=0===l.length?"{}":i?"{"+l.join(",")+c+"}":"{"+l.join(",")+"}",i=c,a}};return r("",{"":e})},C.JSONDecode=(u={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},c=function(e){var t=new SyntaxError(e);throw t.at=i,t.text=s,t},l=function(e){return e&&e!==o&&c("Expected '"+e+"' instead of '"+o+"'"),o=s.charAt(i),i+=1,o},f=function(){var e,t="";for("-"===o&&(t="-",l("-"));o>="0"&&o<="9";)t+=o,l();if("."===o)for(t+=".";l()&&o>="0"&&o<="9";)t+=o;if("e"===o||"E"===o)for(t+=o,l(),"-"!==o&&"+"!==o||(t+=o,l());o>="0"&&o<="9";)t+=o,l();if(e=+t,isFinite(e))return e;c("Bad number")},h=function(){var e,t,r,n="";if('"'===o)for(;l();){if('"'===o)return l(),n;if("\\"===o)if(l(),"u"===o){for(r=0,t=0;t<4&&(e=parseInt(l(),16),isFinite(e));t+=1)r=16*r+e;n+=String.fromCharCode(r)}else{if("string"!=typeof u[o])break;n+=u[o]}else n+=o}c("Bad string")},p=function(){for(;o&&o<=" ";)l()},a=function(){switch(p(),o){case"{":return function(){var e,t={};if("{"===o){if(l("{"),p(),"}"===o)return l("}"),t;for(;o;){if(e=h(),p(),l(":"),Object.hasOwnProperty.call(t,e)&&c('Duplicate key "'+e+'"'),t[e]=a(),p(),"}"===o)return l("}"),t;l(","),p()}}c("Bad object")}();case"[":return function(){var e=[];if("["===o){if(l("["),p(),"]"===o)return l("]"),e;for(;o;){if(e.push(a()),p(),"]"===o)return l("]"),e;l(","),p()}}c("Bad array")}();case'"':return h();case"-":return f();default:return o>="0"&&o<="9"?f():function(){switch(o){case"t":return l("t"),l("r"),l("u"),l("e"),!0;case"f":return l("f"),l("a"),l("l"),l("s"),l("e"),!1;case"n":return l("n"),l("u"),l("l"),l("l"),null}c('Unexpected "'+o+'"')}()}},function(e){var t;return s=e,i=0,o=" ",t=a(),p(),o&&c("Syntax error"),t}),C.base64Encode=function(e){var t,r,n,i,o,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=0,u=0,c="",l=[];if(!e)return e;e=C.utf8Encode(e);do{t=(o=e.charCodeAt(a++)<<16|e.charCodeAt(a++)<<8|e.charCodeAt(a++))>>18&63,r=o>>12&63,n=o>>6&63,i=63&o,l[u++]=s.charAt(t)+s.charAt(r)+s.charAt(n)+s.charAt(i)}while(a<e.length);switch(c=l.join(""),e.length%3){case 1:c=c.slice(0,-2)+"==";break;case 2:c=c.slice(0,-1)+"="}return c},C.utf8Encode=function(e){var t,r,n,i,o="";for(t=r=0,n=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,i=0;i<n;i++){var s=e.charCodeAt(i),a=null;s<128?r++:a=s>127&&s<2048?String.fromCharCode(s>>6|192,63&s|128):String.fromCharCode(s>>12|224,s>>6&63|128,63&s|128),null!==a&&(r>t&&(o+=e.substring(t,r)),o+=a,t=r=i+1)}return r>t&&(o+=e.substring(t,e.length)),o},C.UUID=(d=function(){for(var e=1*new Date,t=0;e==1*new Date;)t++;return e.toString(16)+t.toString(16)},function(){var e=(T.height*T.width).toString(16);return d()+"-"+Math.random().toString(16).replace(".","")+"-"+function(){var e,t,r=O,n=[],i=0;function o(e,t){var r,i=0;for(r=0;r<t.length;r++)i|=n[r]<<8*r;return e^i}for(e=0;e<r.length;e++)t=r.charCodeAt(e),n.unshift(255&t),n.length>=4&&(i=o(i,n),n=[]);return n.length>0&&(i=o(i,n)),i.toString(16)}()+"-"+e+"-"+d()});var D=["ahrefsbot","baiduspider","bingbot","bingpreview","facebookexternal","petalbot","pinterest","screaming frog","yahoo! slurp","yandexbot","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google"];C.isBlockedUA=function(e){var t;for(e=e.toLowerCase(),t=0;t<D.length;t++)if(-1!==e.indexOf(D[t]))return!0;return!1},C.HTTPBuildQuery=function(e,t){var r,n,i=[];return C.isUndefined(t)&&(t="&"),C.each(e,(function(e,t){r=encodeURIComponent(e.toString()),n=encodeURIComponent(t),i[i.length]=n+"="+r})),i.join(t)},C.getQueryParam=function(e,t){t=t.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);if(null===r||r&&"string"!=typeof r[1]&&r[1].length)return"";var n=r[1];try{n=decodeURIComponent(n)}catch(e){R.error("Skipping decoding for malformed query param: "+n)}return n.replace(/\+/g," ")},C.cookie={get:function(e){for(var t=e+"=",r=S.cookie.split(";"),n=0;n<r.length;n++){for(var i=r[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return decodeURIComponent(i.substring(t.length,i.length))}return null},parse:function(e){var t;try{t=C.JSONDecode(C.cookie.get(e))||{}}catch(e){}return t},set_seconds:function(e,t,r,n,i,o,s){var a="",u="",c="";if(s)a="; domain="+s;else if(n){var l=z(S.location.hostname);a=l?"; domain=."+l:""}if(r){var f=new Date;f.setTime(f.getTime()+1e3*r),u="; expires="+f.toGMTString()}o&&(i=!0,c="; SameSite=None"),i&&(c+="; secure"),S.cookie=e+"="+encodeURIComponent(t)+u+"; path=/"+a+c},set:function(e,t,r,n,i,o,s){var a="",u="",c="";if(s)a="; domain="+s;else if(n){var l=z(S.location.hostname);a=l?"; domain=."+l:""}if(r){var f=new Date;f.setTime(f.getTime()+24*r*60*60*1e3),u="; expires="+f.toGMTString()}o&&(i=!0,c="; SameSite=None"),i&&(c+="; secure");var h=e+"="+encodeURIComponent(t)+u+"; path=/"+a+c;return S.cookie=h,h},remove:function(e,t,r){C.cookie.set(e,"",-1,t,!1,!1,r)}};var U=null,$=function(e,t){if(null!==U&&!t)return U;var r=!0;try{e=e||window.localStorage;var n="__mplss_"+q(8);e.setItem(n,"xyz"),"xyz"!==e.getItem(n)&&(r=!1),e.removeItem(n)}catch(e){r=!1}return U=r,r};C.localStorage={is_supported:function(e){var t=$(null,e);return t||R.error("localStorage unsupported; falling back to cookie store"),t},error:function(e){R.error("localStorage error: "+e)},get:function(e){try{return window.localStorage.getItem(e)}catch(e){C.localStorage.error(e)}return null},parse:function(e){try{return C.JSONDecode(C.localStorage.get(e))||{}}catch(e){}return null},set:function(e,t){try{window.localStorage.setItem(e,t)}catch(e){C.localStorage.error(e)}},remove:function(e){try{window.localStorage.removeItem(e)}catch(e){C.localStorage.error(e)}}},C.register_event=function(){function e(t){return t&&(t.preventDefault=e.preventDefault,t.stopPropagation=e.stopPropagation),t}return e.preventDefault=function(){this.returnValue=!1},e.stopPropagation=function(){this.cancelBubble=!0},function(t,r,n,i,o){if(t)if(t.addEventListener&&!i)t.addEventListener(r,n,!!o);else{var s="on"+r,a=t[s];t[s]=function(t,r,n){return function(i){if(i=i||e(window.event)){var o,s,a=!0;return C.isFunction(n)&&(o=n(i)),s=r.call(t,i),!1!==o&&!1!==s||(a=!1),a}}}(t,n,a)}else R.error("No valid element provided to register_event")}}();var N=new RegExp('^(\\w*)\\[(\\w+)([=~\\|\\^\\$\\*]?)=?"?([^\\]"]*)"?\\]$');C.dom_query=function(){function e(e){return e.all?e.all:e.getElementsByTagName("*")}var t=/[\t\r\n]/g;function r(e,r){var n=" "+r+" ";return(" "+e.className+" ").replace(t," ").indexOf(n)>=0}function n(t){if(!S.getElementsByTagName)return[];var n,i,o,s,a,u,c,l,f,h,p=t.split(" "),d=[S];for(u=0;u<p.length;u++)if((n=p[u].replace(/^\s+/,"").replace(/\s+$/,"")).indexOf("#")>-1){o=(i=n.split("#"))[0];var y=i[1],g=S.getElementById(y);if(!g||o&&g.nodeName.toLowerCase()!=o)return[];d=[g]}else if(n.indexOf(".")>-1){o=(i=n.split("."))[0];var _=i[1];for(o||(o="*"),s=[],a=0,c=0;c<d.length;c++)for(f="*"==o?e(d[c]):d[c].getElementsByTagName(o),l=0;l<f.length;l++)s[a++]=f[l];for(d=[],h=0,c=0;c<s.length;c++)s[c].className&&C.isString(s[c].className)&&r(s[c],_)&&(d[h++]=s[c])}else{var m=n.match(N);if(m){o=m[1];var b,v=m[2],w=m[3],k=m[4];for(o||(o="*"),s=[],a=0,c=0;c<d.length;c++)for(f="*"==o?e(d[c]):d[c].getElementsByTagName(o),l=0;l<f.length;l++)s[a++]=f[l];switch(d=[],h=0,w){case"=":b=function(e){return e.getAttribute(v)==k};break;case"~":b=function(e){return e.getAttribute(v).match(new RegExp("\\b"+k+"\\b"))};break;case"|":b=function(e){return e.getAttribute(v).match(new RegExp("^"+k+"-?"))};break;case"^":b=function(e){return 0===e.getAttribute(v).indexOf(k)};break;case"$":b=function(e){return e.getAttribute(v).lastIndexOf(k)==e.getAttribute(v).length-k.length};break;case"*":b=function(e){return e.getAttribute(v).indexOf(k)>-1};break;default:b=function(e){return e.getAttribute(v)}}for(d=[],h=0,c=0;c<s.length;c++)b(s[c])&&(d[h++]=s[c])}else{for(o=n,s=[],a=0,c=0;c<d.length;c++)for(f=d[c].getElementsByTagName(o),l=0;l<f.length;l++)s[a++]=f[l];d=s}}return d}return function(e){return C.isElement(e)?[e]:C.isObject(e)&&!C.isUndefined(e.length)?e:n.call(this,e)}}(),C.info={campaignParams:function(){var e="utm_source utm_medium utm_campaign utm_content utm_term".split(" "),t="",r={};return C.each(e,(function(e){(t=C.getQueryParam(S.URL,e)).length&&(r[e]=t)})),r},searchEngine:function(e){return 0===e.search("https?://(.*)google.([^/?]*)")?"google":0===e.search("https?://(.*)bing.com")?"bing":0===e.search("https?://(.*)yahoo.com")?"yahoo":0===e.search("https?://(.*)duckduckgo.com")?"duckduckgo":null},searchInfo:function(e){var t=C.info.searchEngine(e),r="yahoo"!=t?"q":"p",n={};if(null!==t){n.$search_engine=t;var i=C.getQueryParam(e,r);i.length&&(n.mp_keyword=i)}return n},browser:function(e,t,r){return t=t||"",r||C.includes(e," OPR/")?C.includes(e,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":C.includes(e,"IEMobile")||C.includes(e,"WPDesktop")?"Internet Explorer Mobile":C.includes(e,"SamsungBrowser/")?"Samsung Internet":C.includes(e,"Edge")||C.includes(e,"Edg/")?"Microsoft Edge":C.includes(e,"FBIOS")?"Facebook Mobile":C.includes(e,"Chrome")?"Chrome":C.includes(e,"CriOS")?"Chrome iOS":C.includes(e,"UCWEB")||C.includes(e,"UCBrowser")?"UC Browser":C.includes(e,"FxiOS")?"Firefox iOS":C.includes(t,"Apple")?C.includes(e,"Mobile")?"Mobile Safari":"Safari":C.includes(e,"Android")?"Android Mobile":C.includes(e,"Konqueror")?"Konqueror":C.includes(e,"Firefox")?"Firefox":C.includes(e,"MSIE")||C.includes(e,"Trident/")?"Internet Explorer":C.includes(e,"Gecko")?"Mozilla":""},browserVersion:function(e,t,r){var n={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge?\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/CriOS\/(\d+(\.\d+)?)/,"UC Browser":/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,"Firefox iOS":/FxiOS\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,"Android Mobile":/android\s(\d+(\.\d+)?)/,"Samsung Internet":/SamsungBrowser\/(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/}[C.info.browser(e,t,r)];if(void 0===n)return null;var i=e.match(n);return i?parseFloat(i[i.length-2]):null},os:function(){var e=O;return/Windows/i.test(e)?/Phone/.test(e)||/WPDesktop/.test(e)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(e)?"iOS":/Android/.test(e)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Mac/i.test(e)?"Mac OS X":/Linux/.test(e)?"Linux":/CrOS/.test(e)?"Chrome OS":""},device:function(e){return/Windows Phone/i.test(e)||/WPDesktop/.test(e)?"Windows Phone":/iPad/.test(e)?"iPad":/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Android/.test(e)?"Android":""},referringDomain:function(e){var t=e.split("/");return t.length>=3?t[2]:""},properties:function(){return C.extend(C.strip_empty_properties({$os:C.info.os(),$browser:C.info.browser(O,k.vendor,E),$referrer:S.referrer,$referring_domain:C.info.referringDomain(S.referrer),$device:C.info.device(O)}),{$current_url:t.location.href,$browser_version:C.info.browserVersion(O,k.vendor,E),$screen_height:T.height,$screen_width:T.width,mp_lib:"web",$lib_version:r.LIB_VERSION,$insert_id:q(),time:C.timestamp()/1e3})},people_properties:function(){return C.extend(C.strip_empty_properties({$os:C.info.os(),$browser:C.info.browser(O,k.vendor,E)}),{$browser_version:C.info.browserVersion(O,k.vendor,E)})},pageviewInfo:function(e){return C.strip_empty_properties({mp_page:e,mp_referrer:S.referrer,mp_browser:C.info.browser(O,k.vendor,E),mp_platform:C.info.os()})}};var q=function(e){var t=Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10);return e?t.substring(0,e):t},F=/[a-z0-9][a-z0-9-]*\.[a-z]+$/i,W=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,z=function(e){var t=W,r=e.split("."),n=r[r.length-1];(n.length>4||"com"===n||"org"===n)&&(t=F);var i=e.match(t);return i?i[0]:""},H=null,V=null;"undefined"!=typeof JSON&&(H=JSON.stringify,V=JSON.parse),H=H||C.JSONEncode,V=V||C.JSONDecode,C.toArray=C.toArray,C.isObject=C.isObject,C.JSONEncode=C.JSONEncode,C.JSONDecode=C.JSONDecode,C.isBlockedUA=C.isBlockedUA,C.isEmptyObject=C.isEmptyObject,C.info=C.info,C.info.device=C.info.device,C.info.browser=C.info.browser,C.info.browserVersion=C.info.browserVersion,C.info.properties=C.info.properties;var G=function(){};G.prototype.create_properties=function(){},G.prototype.event_handler=function(){},G.prototype.after_track_handler=function(){},G.prototype.init=function(e){return this.mp=e,this},G.prototype.track=function(e,t,r,n){var i=this,o=C.dom_query(e);if(0!==o.length)return C.each(o,(function(e){C.register_event(e,this.override_event,(function(e){var o={},s=i.create_properties(r,this),a=i.mp.get_config("track_links_timeout");i.event_handler(e,this,o),window.setTimeout(i.track_callback(n,s,o,!0),a),i.mp.track(t,s,i.track_callback(n,s,o))}))}),this),!0;R.error("The DOM query ("+e+") returned 0 elements")},G.prototype.track_callback=function(e,t,r,n){n=n||!1;var i=this;return function(){r.callback_fired||(r.callback_fired=!0,e&&!1===e(n,t)||i.after_track_handler(t,r,n))}},G.prototype.create_properties=function(e,t){return"function"==typeof e?e(t):C.extend({},e)};var K=function(){this.override_event="click"};C.inherit(K,G),K.prototype.create_properties=function(e,t){var r=K.superclass.create_properties.apply(this,arguments);return t.href&&(r.url=t.href),r},K.prototype.event_handler=function(e,t,r){r.new_tab=2===e.which||e.metaKey||e.ctrlKey||"_blank"===t.target,r.href=t.href,r.new_tab||e.preventDefault()},K.prototype.after_track_handler=function(e,t){t.new_tab||setTimeout((function(){window.location=t.href}),0)};var Y=function(){this.override_event="submit"};C.inherit(Y,G),Y.prototype.event_handler=function(e,t,r){r.element=t,e.preventDefault()},Y.prototype.after_track_handler=function(e,t){setTimeout((function(){t.element.submit()}),0)};var Q=L("lock"),J=function(e,t){t=t||{},this.storageKey=e,this.storage=t.storage||window.localStorage,this.pollIntervalMS=t.pollIntervalMS||100,this.timeoutMS=t.timeoutMS||2e3};J.prototype.withLock=function(e,t,r){r||"function"==typeof t||(r=t,t=null);var n=r||(new Date).getTime()+"|"+Math.random(),i=(new Date).getTime(),o=this.storageKey,s=this.pollIntervalMS,a=this.timeoutMS,u=this.storage,c=o+":X",l=o+":Y",f=o+":Z",h=function(e){t&&t(e)},p=function(e){if((new Date).getTime()-i>a)return Q.error("Timeout waiting for mutex on "+o+"; clearing lock. ["+n+"]"),u.removeItem(f),u.removeItem(l),void g();setTimeout((function(){try{e()}catch(e){h(e)}}),s*(Math.random()+.1))},d=function(e,t){e()?t():p((function(){d(e,t)}))},y=function(){var e=u.getItem(l);if(e&&e!==n)return!1;if(u.setItem(l,n),u.getItem(l)===n)return!0;if(!$(u,!0))throw new Error("localStorage support dropped while acquiring lock");return!1},g=function(){u.setItem(c,n),d(y,(function(){u.getItem(c)!==n?p((function(){u.getItem(l)===n?d((function(){return!u.getItem(f)}),_):g()})):_()}))},_=function(){u.setItem(f,"1");try{e()}finally{u.removeItem(f),u.getItem(l)===n&&u.removeItem(l),u.getItem(c)===n&&u.removeItem(c)}};try{if(!$(u,!0))throw new Error("localStorage support check failed");g()}catch(e){h(e)}};var X=L("batch"),Z=function(e,t){t=t||{},this.storageKey=e,this.storage=t.storage||window.localStorage,this.reportError=t.errorReporter||C.bind(X.error,X),this.lock=new J(e,{storage:this.storage}),this.pid=t.pid||null,this.memQueue=[]};Z.prototype.enqueue=function(e,t,r){var n={id:q(),flushAfter:(new Date).getTime()+2*t,payload:e};this.lock.withLock(C.bind((function(){var t;try{var i=this.readFromStorage();i.push(n),(t=this.saveToStorage(i))&&this.memQueue.push(n)}catch(r){this.reportError("Error enqueueing item",e),t=!1}r&&r(t)}),this),C.bind((function(e){this.reportError("Error acquiring storage lock",e),r&&r(!1)}),this),this.pid)},Z.prototype.fillBatch=function(e){var t=this.memQueue.slice(0,e);if(t.length<e){var r=this.readFromStorage();if(r.length){var n={};C.each(t,(function(e){n[e.id]=!0}));for(var i=0;i<r.length;i++){var o=r[i];if((new Date).getTime()>o.flushAfter&&!n[o.id]&&(o.orphaned=!0,t.push(o),t.length>=e))break}}}return t};var ee=function(e,t){var r=[];return C.each(e,(function(e){e.id&&!t[e.id]&&r.push(e)})),r};Z.prototype.removeItemsByID=function(e,t){var r={};C.each(e,(function(e){r[e]=!0})),this.memQueue=ee(this.memQueue,r);var n=C.bind((function(){var t;try{var n=this.readFromStorage();if(n=ee(n,r),t=this.saveToStorage(n)){n=this.readFromStorage();for(var i=0;i<n.length;i++){var o=n[i];if(o.id&&r[o.id])return this.reportError("Item not removed from storage"),!1}}}catch(r){this.reportError("Error removing items",e),t=!1}return t}),this);this.lock.withLock((function(){var e=n();t&&t(e)}),C.bind((function(e){var r=!1;if(this.reportError("Error acquiring storage lock",e),!$(this.storage,!0)&&!(r=n()))try{this.storage.removeItem(this.storageKey)}catch(e){this.reportError("Error clearing queue",e)}t&&t(r)}),this),this.pid)};var te=function(e,t){var r=[];return C.each(e,(function(e){var n=e.id;if(n in t){var i=t[n];null!==i&&(e.payload=i,r.push(e))}else r.push(e)})),r};Z.prototype.updatePayloads=function(e,t){this.memQueue=te(this.memQueue,e),this.lock.withLock(C.bind((function(){var r;try{var n=this.readFromStorage();n=te(n,e),r=this.saveToStorage(n)}catch(t){this.reportError("Error updating items",e),r=!1}t&&t(r)}),this),C.bind((function(e){this.reportError("Error acquiring storage lock",e),t&&t(!1)}),this),this.pid)},Z.prototype.readFromStorage=function(){var e;try{(e=this.storage.getItem(this.storageKey))&&(e=V(e),C.isArray(e)||(this.reportError("Invalid storage entry:",e),e=null))}catch(t){this.reportError("Error retrieving queue",t),e=null}return e||[]},Z.prototype.saveToStorage=function(e){try{return this.storage.setItem(this.storageKey,H(e)),!0}catch(e){return this.reportError("Error saving queue",e),!1}},Z.prototype.clear=function(){this.memQueue=[],this.storage.removeItem(this.storageKey)};var re=L("batch"),ne=function(e,t){this.errorReporter=t.errorReporter,this.queue=new Z(e,{errorReporter:C.bind(this.reportError,this),storage:t.storage}),this.libConfig=t.libConfig,this.sendRequest=t.sendRequestFunc,this.beforeSendHook=t.beforeSendHook,this.stopAllBatching=t.stopAllBatchingFunc,this.batchSize=this.libConfig.batch_size,this.flushInterval=this.libConfig.batch_flush_interval_ms,this.stopped=!this.libConfig.batch_autostart,this.consecutiveRemovalFailures=0};ne.prototype.enqueue=function(e,t){this.queue.enqueue(e,this.flushInterval,t)},ne.prototype.start=function(){this.stopped=!1,this.consecutiveRemovalFailures=0,this.flush()},ne.prototype.stop=function(){this.stopped=!0,this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=null)},ne.prototype.clear=function(){this.queue.clear()},ne.prototype.resetBatchSize=function(){this.batchSize=this.libConfig.batch_size},ne.prototype.resetFlush=function(){this.scheduleFlush(this.libConfig.batch_flush_interval_ms)},ne.prototype.scheduleFlush=function(e){this.flushInterval=e,this.stopped||(this.timeoutID=setTimeout(C.bind(this.flush,this),this.flushInterval))},ne.prototype.flush=function(e){try{if(this.requestInProgress)return void re.log("Flush: Request already in progress");e=e||{};var t=this.libConfig.batch_request_timeout_ms,r=(new Date).getTime(),n=this.batchSize,i=this.queue.fillBatch(n),o=[],s={};if(C.each(i,(function(e){var t=e.payload;this.beforeSendHook&&!e.orphaned&&(t=this.beforeSendHook(t)),t&&o.push(t),s[e.id]=t}),this),o.length<1)return void this.resetFlush();this.requestInProgress=!0;var a=C.bind((function(o){this.requestInProgress=!1;try{var a=!1;if(e.unloading)this.queue.updatePayloads(s);else if(C.isObject(o)&&"timeout"===o.error&&(new Date).getTime()-r>=t)this.reportError("Network timeout; retrying"),this.flush();else if(C.isObject(o)&&o.xhr_req&&(o.xhr_req.status>=500||429===o.xhr_req.status||"timeout"===o.error)){var u=2*this.flushInterval,c=o.xhr_req.responseHeaders;if(c){var l=c["Retry-After"];l&&(u=1e3*parseInt(l,10)||u)}u=Math.min(6e5,u),this.reportError("Error; retry in "+u+" ms"),this.scheduleFlush(u)}else if(C.isObject(o)&&o.xhr_req&&413===o.xhr_req.status)if(i.length>1){var f=Math.max(1,Math.floor(n/2));this.batchSize=Math.min(this.batchSize,f,i.length-1),this.reportError("413 response; reducing batch size to "+this.batchSize),this.resetFlush()}else this.reportError("Single-event request too large; dropping",i),this.resetBatchSize(),a=!0;else a=!0;a&&this.queue.removeItemsByID(C.map(i,(function(e){return e.id})),C.bind((function(e){e?(this.consecutiveRemovalFailures=0,this.flush()):(this.reportError("Failed to remove items from queue"),++this.consecutiveRemovalFailures>5?(this.reportError("Too many queue failures; disabling batching system."),this.stopAllBatching()):this.resetFlush())}),this))}catch(e){this.reportError("Error handling API response",e),this.resetFlush()}}),this),u={method:"POST",verbose:!0,ignore_json_errors:!0,timeout_ms:t};e.unloading&&(u.transport="sendBeacon"),re.log("MIXPANEL REQUEST:",o),this.sendRequest(o,u,a)}catch(e){this.reportError("Error flushing request queue",e),this.resetFlush()}},ne.prototype.reportError=function(e,t){if(re.error.apply(re.error,arguments),this.errorReporter)try{t instanceof Error||(t=new Error(e)),this.errorReporter(e,t)}catch(t){re.error(t)}};function ie(e,t){ye(!0,e,t)}function oe(e,t){ye(!1,e,t)}function se(e,t){return"1"===de(e,t)}function ae(e,r){if(function(e){if(e&&e.ignoreDnt)return!1;var r=e&&e.window||t,n=r.navigator||{},i=!1;return C.each([n.doNotTrack,n.msDoNotTrack,r.doNotTrack],(function(e){C.includes([!0,1,"1","yes"],e)&&(i=!0)})),i}(r))return R.warn('This browser has "Do Not Track" enabled. This will prevent the Mixpanel SDK from sending any data. To ignore the "Do Not Track" browser setting, initialize the Mixpanel instance with the config "ignore_dnt: true"'),!0;var n="0"===de(e,r);return n&&R.warn("You are opted out of Mixpanel tracking. This will prevent the Mixpanel SDK from sending any data."),n}function ue(e){return ge(e,(function(e){return this.get_config(e)}))}function ce(e){return ge(e,(function(e){return this._get_config(e)}))}function le(e){return ge(e,(function(e){return this._get_config(e)}))}function fe(e,t){he(t=t||{}).remove(pe(e,t),!!t.crossSubdomainCookie,t.cookieDomain)}function he(e){return"localStorage"===(e=e||{}).persistenceType?C.localStorage:C.cookie}function pe(e,t){return((t=t||{}).persistencePrefix||"__mp_opt_in_out_")+e}function de(e,t){return he(t).get(pe(e,t))}function ye(e,t,r){C.isString(t)&&t.length?(he(r=r||{}).set(pe(t,r),e?1:0,C.isNumber(r.cookieExpiration)?r.cookieExpiration:null,!!r.crossSubdomainCookie,!!r.secureCookie,!!r.crossSiteCookie,r.cookieDomain),r.track&&e&&r.track(r.trackEventName||"$opt_in",r.trackProperties,{send_immediately:!0})):R.error("gdpr."+(e?"optIn":"optOut")+" called with an invalid token")}function ge(e,t){return function(){var r=!1;try{var n=t.call(this,"token"),i=t.call(this,"ignore_dnt"),o=t.call(this,"opt_out_tracking_persistence_type"),s=t.call(this,"opt_out_tracking_cookie_prefix"),a=t.call(this,"window");n&&(r=ae(n,{ignoreDnt:i,persistenceType:o,persistencePrefix:s,window:a}))}catch(e){R.error("Unexpected error when checking tracking opt-out status: "+e)}if(!r)return e.apply(this,arguments);var u=arguments[arguments.length-1];"function"==typeof u&&u(0)}}var _e="$set",me="$set_once",be="$unset",ve="$add",we="$append",ke="$union",Se="$remove",Ee={set_action:function(e,t){var r={},n={};return C.isObject(e)?C.each(e,(function(e,t){this._is_reserved_property(t)||(n[t]=e)}),this):n[e]=t,r.$set=n,r},unset_action:function(e){var t={},r=[];return C.isArray(e)||(e=[e]),C.each(e,(function(e){this._is_reserved_property(e)||r.push(e)}),this),t.$unset=r,t},set_once_action:function(e,t){var r={},n={};return C.isObject(e)?C.each(e,(function(e,t){this._is_reserved_property(t)||(n[t]=e)}),this):n[e]=t,r.$set_once=n,r},union_action:function(e,t){var r={},n={};return C.isObject(e)?C.each(e,(function(e,t){this._is_reserved_property(t)||(n[t]=C.isArray(e)?e:[e])}),this):n[e]=C.isArray(t)?t:[t],r.$union=n,r},append_action:function(e,t){var r={},n={};return C.isObject(e)?C.each(e,(function(e,t){this._is_reserved_property(t)||(n[t]=e)}),this):n[e]=t,r.$append=n,r},remove_action:function(e,t){var r={},n={};return C.isObject(e)?C.each(e,(function(e,t){this._is_reserved_property(t)||(n[t]=e)}),this):n[e]=t,r.$remove=n,r},delete_action:function(){var e={$delete:""};return e}},Te=function(){};C.extend(Te.prototype,Ee),Te.prototype._init=function(e,t,r){this._mixpanel=e,this._group_key=t,this._group_id=r},Te.prototype.set=le((function(e,t,r){var n=this.set_action(e,t);return C.isObject(e)&&(r=t),this._send_request(n,r)})),Te.prototype.set_once=le((function(e,t,r){var n=this.set_once_action(e,t);return C.isObject(e)&&(r=t),this._send_request(n,r)})),Te.prototype.unset=le((function(e,t){var r=this.unset_action(e);return this._send_request(r,t)})),Te.prototype.union=le((function(e,t,r){C.isObject(e)&&(r=t);var n=this.union_action(e,t);return this._send_request(n,r)})),Te.prototype.delete=le((function(e){var t=this.delete_action();return this._send_request(t,e)})),Te.prototype.remove=le((function(e,t,r){var n=this.remove_action(e,t);return this._send_request(n,r)})),Te.prototype._send_request=function(e,t){e.$group_key=this._group_key,e.$group_id=this._group_id,e.$token=this._get_config("token");var r=C.encodeDates(e);return this._mixpanel._track_or_batch({type:"groups",data:r,endpoint:this._get_config("api_host")+"/groups/",batcher:this._mixpanel.request_batchers.groups},t)},Te.prototype._is_reserved_property=function(e){return"$group_key"===e||"$group_id"===e},Te.prototype._get_config=function(e){return this._mixpanel.get_config(e)},Te.prototype.toString=function(){return this._mixpanel.toString()+".group."+this._group_key+"."+this._group_id},Te.prototype.remove=Te.prototype.remove,Te.prototype.set=Te.prototype.set,Te.prototype.set_once=Te.prototype.set_once,Te.prototype.union=Te.prototype.union,Te.prototype.unset=Te.prototype.unset,Te.prototype.toString=Te.prototype.toString;var Oe=function(){};C.extend(Oe.prototype,Ee),Oe.prototype._init=function(e){this._mixpanel=e},Oe.prototype.set=ce((function(e,t,r){var n=this.set_action(e,t);return C.isObject(e)&&(r=t),this._get_config("save_referrer")&&this._mixpanel.persistence.update_referrer_info(document.referrer),n.$set=C.extend({},C.info.people_properties(),this._mixpanel.persistence.get_referrer_info(),n.$set),this._send_request(n,r)})),Oe.prototype.set_once=ce((function(e,t,r){var n=this.set_once_action(e,t);return C.isObject(e)&&(r=t),this._send_request(n,r)})),Oe.prototype.unset=ce((function(e,t){var r=this.unset_action(e);return this._send_request(r,t)})),Oe.prototype.increment=ce((function(e,t,r){var n={},i={};return C.isObject(e)?(C.each(e,(function(e,t){if(!this._is_reserved_property(t)){if(isNaN(parseFloat(e)))return void R.error("Invalid increment value passed to mixpanel.people.increment - must be a number");i[t]=e}}),this),r=t):(C.isUndefined(t)&&(t=1),i[e]=t),n.$add=i,this._send_request(n,r)})),Oe.prototype.append=ce((function(e,t,r){C.isObject(e)&&(r=t);var n=this.append_action(e,t);return this._send_request(n,r)})),Oe.prototype.remove=ce((function(e,t,r){C.isObject(e)&&(r=t);var n=this.remove_action(e,t);return this._send_request(n,r)})),Oe.prototype.union=ce((function(e,t,r){C.isObject(e)&&(r=t);var n=this.union_action(e,t);return this._send_request(n,r)})),Oe.prototype.track_charge=ce((function(e,t,r){if(C.isNumber(e)||(e=parseFloat(e),!isNaN(e)))return this.append("$transactions",C.extend({$amount:e},t),r);R.error("Invalid value passed to mixpanel.people.track_charge - must be a number")})),Oe.prototype.clear_charges=function(e){return this.set("$transactions",[],e)},Oe.prototype.delete_user=function(){if(this._identify_called()){var e={$delete:this._mixpanel.get_distinct_id()};return this._send_request(e)}R.error("mixpanel.people.delete_user() requires you to call identify() first")},Oe.prototype.toString=function(){return this._mixpanel.toString()+".people"},Oe.prototype._send_request=function(e,t){e.$token=this._get_config("token"),e.$distinct_id=this._mixpanel.get_distinct_id();var r=this._mixpanel.get_property("$device_id"),n=this._mixpanel.get_property("$user_id"),i=this._mixpanel.get_property("$had_persisted_distinct_id");r&&(e.$device_id=r),n&&(e.$user_id=n),i&&(e.$had_persisted_distinct_id=i);var o=C.encodeDates(e);return this._identify_called()?this._mixpanel._track_or_batch({type:"people",data:o,endpoint:this._get_config("api_host")+"/engage/",batcher:this._mixpanel.request_batchers.people},t):(this._enqueue(e),C.isUndefined(t)||(this._get_config("verbose")?t({status:-1,error:null}):t(-1)),C.truncate(o,255))},Oe.prototype._get_config=function(e){return this._mixpanel.get_config(e)},Oe.prototype._identify_called=function(){return!0===this._mixpanel._flags.identify_called},Oe.prototype._enqueue=function(e){_e in e?this._mixpanel.persistence._add_to_people_queue(_e,e):me in e?this._mixpanel.persistence._add_to_people_queue(me,e):be in e?this._mixpanel.persistence._add_to_people_queue(be,e):ve in e?this._mixpanel.persistence._add_to_people_queue(ve,e):we in e?this._mixpanel.persistence._add_to_people_queue(we,e):Se in e?this._mixpanel.persistence._add_to_people_queue(Se,e):ke in e?this._mixpanel.persistence._add_to_people_queue(ke,e):R.error("Invalid call to _enqueue():",e)},Oe.prototype._flush_one_queue=function(e,t,r,n){var i=this,o=C.extend({},this._mixpanel.persistence._get_queue(e)),s=o;C.isUndefined(o)||!C.isObject(o)||C.isEmptyObject(o)||(i._mixpanel.persistence._pop_from_people_queue(e,o),n&&(s=n(o)),t.call(i,s,(function(t,n){0===t&&i._mixpanel.persistence._add_to_people_queue(e,o),C.isUndefined(r)||r(t,n)})))},Oe.prototype._flush=function(e,t,r,n,i,o,s){var a=this,u=this._mixpanel.persistence._get_queue(we),c=this._mixpanel.persistence._get_queue(Se);if(this._flush_one_queue(_e,this.set,e),this._flush_one_queue(me,this.set_once,n),this._flush_one_queue(be,this.unset,o,(function(e){return C.keys(e)})),this._flush_one_queue(ve,this.increment,t),this._flush_one_queue(ke,this.union,i),!C.isUndefined(u)&&C.isArray(u)&&u.length){for(var l,f=function(e,t){0===e&&a._mixpanel.persistence._add_to_people_queue(we,l),C.isUndefined(r)||r(e,t)},h=u.length-1;h>=0;h--)l=u.pop(),C.isEmptyObject(l)||a.append(l,f);a._mixpanel.persistence.save()}if(!C.isUndefined(c)&&C.isArray(c)&&c.length){for(var p,d=function(e,t){0===e&&a._mixpanel.persistence._add_to_people_queue(Se,p),C.isUndefined(s)||s(e,t)},y=c.length-1;y>=0;y--)p=c.pop(),C.isEmptyObject(p)||a.remove(p,d);a._mixpanel.persistence.save()}},Oe.prototype._is_reserved_property=function(e){return"$distinct_id"===e||"$token"===e||"$device_id"===e||"$user_id"===e||"$had_persisted_distinct_id"===e},Oe.prototype.set=Oe.prototype.set,Oe.prototype.set_once=Oe.prototype.set_once,Oe.prototype.unset=Oe.prototype.unset,Oe.prototype.increment=Oe.prototype.increment,Oe.prototype.append=Oe.prototype.append,Oe.prototype.remove=Oe.prototype.remove,Oe.prototype.union=Oe.prototype.union,Oe.prototype.track_charge=Oe.prototype.track_charge,Oe.prototype.clear_charges=Oe.prototype.clear_charges,Oe.prototype.delete_user=Oe.prototype.delete_user,Oe.prototype.toString=Oe.prototype.toString;var xe,Be,Ae="__mps",Me="__mpso",Ie="__mpus",Pe="__mpa",Ce="__mpap",Re="__mpr",je="__mpu",Le="$people_distinct_id",De="__alias",Ue="__timers",$e=[Ae,Me,Ie,Pe,Ce,Re,je,Le,De,Ue],Ne=function(e){this.props={},this.campaign_params_saved=!1,e.persistence_name?this.name="mp_"+e.persistence_name:this.name="mp_"+e.token+"_mixpanel";var t=e.persistence;"cookie"!==t&&"localStorage"!==t&&(R.critical("Unknown persistence type "+t+"; falling back to cookie"),t=e.persistence="cookie"),"localStorage"===t&&C.localStorage.is_supported()?this.storage=C.localStorage:this.storage=C.cookie,this.load(),this.update_config(e),this.upgrade(e),this.save()};Ne.prototype.properties=function(){var e={};return C.each(this.props,(function(t,r){C.include($e,r)||(e[r]=t)})),e},Ne.prototype.load=function(){if(!this.disabled){var e=this.storage.parse(this.name);e&&(this.props=C.extend({},e))}},Ne.prototype.upgrade=function(e){var t,r,n=e.upgrade;n&&(t="mp_super_properties","string"==typeof n&&(t=n),r=this.storage.parse(t),this.storage.remove(t),this.storage.remove(t,!0),r&&(this.props=C.extend(this.props,r.all,r.events))),e.cookie_name||"mixpanel"===e.name||(t="mp_"+e.token+"_"+e.name,(r=this.storage.parse(t))&&(this.storage.remove(t),this.storage.remove(t,!0),this.register_once(r))),this.storage===C.localStorage&&(r=C.cookie.parse(this.name),C.cookie.remove(this.name),C.cookie.remove(this.name,!0),r&&this.register_once(r))},Ne.prototype.save=function(){this.disabled||this.storage.set(this.name,C.JSONEncode(this.props),this.expire_days,this.cross_subdomain,this.secure,this.cross_site,this.cookie_domain)},Ne.prototype.remove=function(){this.storage.remove(this.name,!1,this.cookie_domain),this.storage.remove(this.name,!0,this.cookie_domain)},Ne.prototype.clear=function(){this.remove(),this.props={}},Ne.prototype.register_once=function(e,t,r){return!!C.isObject(e)&&(void 0===t&&(t="None"),this.expire_days=void 0===r?this.default_expiry:r,C.each(e,(function(e,r){this.props.hasOwnProperty(r)&&this.props[r]!==t||(this.props[r]=e)}),this),this.save(),!0)},Ne.prototype.register=function(e,t){return!!C.isObject(e)&&(this.expire_days=void 0===t?this.default_expiry:t,C.extend(this.props,e),this.save(),!0)},Ne.prototype.unregister=function(e){e in this.props&&(delete this.props[e],this.save())},Ne.prototype.update_campaign_params=function(){this.campaign_params_saved||(this.register_once(C.info.campaignParams()),this.campaign_params_saved=!0)},Ne.prototype.update_search_keyword=function(e){this.register(C.info.searchInfo(e))},Ne.prototype.update_referrer_info=function(e){this.register_once({$initial_referrer:e||"$direct",$initial_referring_domain:C.info.referringDomain(e)||"$direct"},"")},Ne.prototype.get_referrer_info=function(){return C.strip_empty_properties({$initial_referrer:this.props.$initial_referrer,$initial_referring_domain:this.props.$initial_referring_domain})},Ne.prototype.safe_merge=function(e){return C.each(this.props,(function(t,r){r in e||(e[r]=t)})),e},Ne.prototype.update_config=function(e){this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cookie_domain(e.cookie_domain),this.set_cross_site(e.cross_site_cookie),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie)},Ne.prototype.set_disabled=function(e){this.disabled=e,this.disabled?this.remove():this.save()},Ne.prototype.set_cookie_domain=function(e){e!==this.cookie_domain&&(this.remove(),this.cookie_domain=e,this.save())},Ne.prototype.set_cross_site=function(e){e!==this.cross_site&&(this.cross_site=e,this.remove(),this.save())},Ne.prototype.set_cross_subdomain=function(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())},Ne.prototype.get_cross_subdomain=function(){return this.cross_subdomain},Ne.prototype.set_secure=function(e){e!==this.secure&&(this.secure=!!e,this.remove(),this.save())},Ne.prototype._add_to_people_queue=function(e,t){var r=this._get_queue_key(e),n=t[e],i=this._get_or_create_queue(_e),o=this._get_or_create_queue(me),s=this._get_or_create_queue(be),a=this._get_or_create_queue(ve),u=this._get_or_create_queue(ke),c=this._get_or_create_queue(Se,[]),l=this._get_or_create_queue(we,[]);r===Ae?(C.extend(i,n),this._pop_from_people_queue(ve,n),this._pop_from_people_queue(ke,n),this._pop_from_people_queue(be,n)):r===Me?(C.each(n,(function(e,t){t in o||(o[t]=e)})),this._pop_from_people_queue(be,n)):r===Ie?C.each(n,(function(e){C.each([i,o,a,u],(function(t){e in t&&delete t[e]})),C.each(l,(function(t){e in t&&delete t[e]})),s[e]=!0})):r===Pe?(C.each(n,(function(e,t){t in i?i[t]+=e:(t in a||(a[t]=0),a[t]+=e)}),this),this._pop_from_people_queue(be,n)):r===je?(C.each(n,(function(e,t){C.isArray(e)&&(t in u||(u[t]=[]),u[t]=u[t].concat(e))})),this._pop_from_people_queue(be,n)):r===Re?(c.push(n),this._pop_from_people_queue(we,n)):r===Ce&&(l.push(n),this._pop_from_people_queue(be,n)),R.log("MIXPANEL PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):"),R.log(t),this.save()},Ne.prototype._pop_from_people_queue=function(e,t){var r=this._get_queue(e);C.isUndefined(r)||(C.each(t,(function(t,n){e===we||e===Se?C.each(r,(function(e){e[n]===t&&delete e[n]})):delete r[n]}),this),this.save())},Ne.prototype._get_queue_key=function(e){return e===_e?Ae:e===me?Me:e===be?Ie:e===ve?Pe:e===we?Ce:e===Se?Re:e===ke?je:void R.error("Invalid queue:",e)},Ne.prototype._get_queue=function(e){return this.props[this._get_queue_key(e)]},Ne.prototype._get_or_create_queue=function(e,t){var r=this._get_queue_key(e);return t=C.isUndefined(t)?{}:t,this.props[r]||(this.props[r]=t)},Ne.prototype.set_event_timer=function(e,t){var r=this.props.__timers||{};r[e]=t,this.props.__timers=r,this.save()},Ne.prototype.remove_event_timer=function(e){var t=(this.props.__timers||{})[e];return C.isUndefined(t)||(delete this.props.__timers[e],this.save()),t};var qe=function(e){return e},Fe=function(){},We="mixpanel",ze="base64",He=t.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,Ve=!He&&-1===O.indexOf("MSIE")&&-1===O.indexOf("Mozilla"),Ge=null;k.sendBeacon&&(Ge=function(){return k.sendBeacon.apply(k,arguments)});var Ke={api_host:"https://api-js.mixpanel.com",api_method:"POST",api_transport:"XHR",api_payload_format:ze,app_host:"https://mixpanel.com",cdn:"https://cdn.mxpnl.com",cross_site_cookie:!1,cross_subdomain_cookie:!0,error_reporter:Fe,persistence:"cookie",persistence_name:"",cookie_domain:"",cookie_name:"",loaded:Fe,store_google:!0,save_referrer:!0,test:!1,verbose:!1,img:!1,debug:!1,track_links_timeout:300,cookie_expiration:365,upgrade:!1,disable_persistence:!1,disable_cookie:!1,secure_cookie:!1,ip:!0,opt_out_tracking_by_default:!1,opt_out_persistence_by_default:!1,opt_out_tracking_persistence_type:"localStorage",opt_out_tracking_cookie_prefix:null,property_blacklist:[],xhr_headers:{},ignore_dnt:!1,batch_requests:!0,batch_size:50,batch_flush_interval_ms:5e3,batch_request_timeout_ms:9e4,batch_autostart:!0,hooks:{}},Ye=!1,Qe=function(){},Je=function(e,t,n){var i,o=n===We?Be:Be[n];if(o&&0===xe)i=o;else{if(o&&!C.isArray(o))return void R.error("You have already initialized "+n);i=new Qe}return i._cached_groups={},i._init(e,t,n),i.people=new Oe,i.people._init(i),r.DEBUG=r.DEBUG||i.get_config("debug"),!C.isUndefined(o)&&C.isArray(o)&&(i._execute_array.call(i.people,o.people),i._execute_array(o)),i};Qe.prototype.init=function(e,t,r){if(C.isUndefined(r))this.report_error("You must name your new library: init(token, config, name)");else{if(r!==We){var n=Je(e,t,r);return Be[r]=n,n._loaded(),n}this.report_error("You must initialize the main mixpanel object right after you include the Mixpanel js snippet")}},Qe.prototype._init=function(e,r,n){r=r||{},this.__loaded=!0,this.config={};var i={};"api_payload_format"in r||(r.api_host||Ke.api_host).match(/\.mixpanel\.com$/)&&(i.api_payload_format="json");if(this.set_config(C.extend({},Ke,i,r,{name:n,token:e,callback_fn:(n===We?n:"mixpanel."+n)+"._jsc"})),this._jsc=Fe,this.__dom_loaded_queue=[],this.__request_queue=[],this.__disabled_events=[],this._flags={disable_all_events:!1,identify_called:!1},this.request_batchers={},this._batch_requests=this.get_config("batch_requests"),this._batch_requests)if(C.localStorage.is_supported(!0)&&He){if(this.init_batchers(),Ge&&t.addEventListener){var o=C.bind((function(){this.request_batchers.events.stopped||this.request_batchers.events.flush({unloading:!0})}),this);t.addEventListener("pagehide",(function(e){e.persisted&&o()})),t.addEventListener("visibilitychange",(function(){"hidden"===S.visibilityState&&o()}))}}else this._batch_requests=!1,R.log("Turning off Mixpanel request-queueing; needs XHR and localStorage support");this.persistence=this.cookie=new Ne(this.config),this.unpersisted_superprops={},this._gdpr_init();var s=C.UUID();this.get_distinct_id()||this.register_once({distinct_id:s,$device_id:s},"")},Qe.prototype._loaded=function(){this.get_config("loaded")(this),this._set_default_superprops()},Qe.prototype._set_default_superprops=function(){this.persistence.update_search_keyword(S.referrer),this.get_config("store_google")&&this.persistence.update_campaign_params(),this.get_config("save_referrer")&&this.persistence.update_referrer_info(S.referrer)},Qe.prototype._dom_loaded=function(){C.each(this.__dom_loaded_queue,(function(e){this._track_dom.apply(this,e)}),this),this.has_opted_out_tracking()||C.each(this.__request_queue,(function(e){this._send_request.apply(this,e)}),this),delete this.__dom_loaded_queue,delete this.__request_queue},Qe.prototype._track_dom=function(e,t){if(this.get_config("img"))return this.report_error("You can't use DOM tracking functions with img = true."),!1;if(!Ye)return this.__dom_loaded_queue.push([e,t]),!1;var r=(new e).init(this);return r.track.apply(r,t)},Qe.prototype._prepare_callback=function(e,t){if(C.isUndefined(e))return null;if(He){return function(r){e(r,t)}}var r=this._jsc,n=""+Math.floor(1e8*Math.random()),i=this.get_config("callback_fn")+"["+n+"]";return r[n]=function(i){delete r[n],e(i,t)},i},Qe.prototype._send_request=function(e,t,r,n){var i=!0;if(Ve)return this.__request_queue.push(arguments),i;var o={method:this.get_config("api_method"),transport:this.get_config("api_transport"),verbose:this.get_config("verbose")},s=null;n||!C.isFunction(r)&&"string"!=typeof r||(n=r,r=null),r=C.extend(o,r||{}),He||(r.method="GET");var a="POST"===r.method,u=Ge&&a&&"sendbeacon"===r.transport.toLowerCase(),c=r.verbose;t.verbose&&(c=!0),this.get_config("test")&&(t.test=1),c&&(t.verbose=1),this.get_config("img")&&(t.img=1),He||(n?t.callback=n:(c||this.get_config("test"))&&(t.callback="(function(){})")),t.ip=this.get_config("ip")?1:0,t._=(new Date).getTime().toString(),a&&(s="data="+encodeURIComponent(t.data),delete t.data),e+="?"+C.HTTPBuildQuery(t);var l=this;if("img"in t){var f=S.createElement("img");f.src=e,S.body.appendChild(f)}else if(u){try{i=Ge(e,s)}catch(e){l.report_error(e),i=!1}try{n&&n(i?1:0)}catch(e){l.report_error(e)}}else if(He)try{var h=new XMLHttpRequest;h.open(r.method,e,!0);var p=this.get_config("xhr_headers");if(a&&(p["Content-Type"]="application/x-www-form-urlencoded"),C.each(p,(function(e,t){h.setRequestHeader(t,e)})),r.timeout_ms&&void 0!==h.timeout){h.timeout=r.timeout_ms;var d=(new Date).getTime()}h.withCredentials=!0,h.onreadystatechange=function(){var e;if(4===h.readyState)if(200===h.status){if(n)if(c){var t;try{t=C.JSONDecode(h.responseText)}catch(e){if(l.report_error(e),!r.ignore_json_errors)return;t=h.responseText}n(t)}else n(Number(h.responseText))}else e=h.timeout&&!h.status&&(new Date).getTime()-d>=h.timeout?"timeout":"Bad HTTP status: "+h.status+" "+h.statusText,l.report_error(e),n&&n(c?{status:0,error:e,xhr_req:h}:0)},h.send(s)}catch(e){l.report_error(e),i=!1}else{var y=S.createElement("script");y.type="text/javascript",y.async=!0,y.defer=!0,y.src=e;var g=S.getElementsByTagName("script")[0];g.parentNode.insertBefore(y,g)}return i},Qe.prototype._execute_array=function(e){var t,r=[],n=[],i=[];C.each(e,(function(e){e&&(t=e[0],C.isArray(t)?i.push(e):"function"==typeof e?e.call(this):C.isArray(e)&&"alias"===t?r.push(e):C.isArray(e)&&-1!==t.indexOf("track")&&"function"==typeof this[t]?i.push(e):n.push(e))}),this);var o=function(e,t){C.each(e,(function(e){if(C.isArray(e[0])){var r=t;C.each(e,(function(e){r=r[e[0]].apply(r,e.slice(1))}))}else this[e[0]].apply(this,e.slice(1))}),t)};o(r,this),o(n,this),o(i,this)},Qe.prototype.are_batchers_initialized=function(){return!!this.request_batchers.events},Qe.prototype.init_batchers=function(){var e=this.get_config("token");if(!this.are_batchers_initialized()){var t=C.bind((function(t){return new ne("__mpq_"+e+t.queue_suffix,{libConfig:this.config,sendRequestFunc:C.bind((function(e,r,n){this._send_request(this.get_config("api_host")+t.endpoint,this._encode_data_for_request(e),r,this._prepare_callback(n,e))}),this),beforeSendHook:C.bind((function(e){return this._run_hook("before_send_"+t.type,e)}),this),errorReporter:this.get_config("error_reporter"),stopAllBatchingFunc:C.bind(this.stop_batch_senders,this)})}),this);this.request_batchers={events:t({type:"events",endpoint:"/track/",queue_suffix:"_ev"}),people:t({type:"people",endpoint:"/engage/",queue_suffix:"_pp"}),groups:t({type:"groups",endpoint:"/groups/",queue_suffix:"_gr"})}}this.get_config("batch_autostart")&&this.start_batch_senders()},Qe.prototype.start_batch_senders=function(){this.are_batchers_initialized()&&(this._batch_requests=!0,C.each(this.request_batchers,(function(e){e.start()})))},Qe.prototype.stop_batch_senders=function(){this._batch_requests=!1,C.each(this.request_batchers,(function(e){e.stop(),e.clear()}))},Qe.prototype.push=function(e){this._execute_array([e])},Qe.prototype.disable=function(e){void 0===e?this._flags.disable_all_events=!0:this.__disabled_events=this.__disabled_events.concat(e)},Qe.prototype._encode_data_for_request=function(e){var t=C.JSONEncode(e);return this.get_config("api_payload_format")===ze&&(t=C.base64Encode(t)),{data:t}},Qe.prototype._track_or_batch=function(e,t){var r=C.truncate(e.data,255),n=e.endpoint,i=e.batcher,o=e.should_send_immediately,s=e.send_request_options||{};t=t||Fe;var a=!0,u=C.bind((function(){return s.skip_hooks||(r=this._run_hook("before_send_"+e.type,r)),r?(R.log("MIXPANEL REQUEST:"),R.log(r),this._send_request(n,this._encode_data_for_request(r),s,this._prepare_callback(t,r))):null}),this);return this._batch_requests&&!o?i.enqueue(r,(function(e){e?t(1,r):u()})):a=u(),a&&r},Qe.prototype.track=ue((function(e,t,r,n){n||"function"!=typeof r||(n=r,r=null);var i=(r=r||{}).transport;i&&(r.transport=i);var o=r.send_immediately;if("function"!=typeof n&&(n=Fe),C.isUndefined(e))this.report_error("No event name provided to mixpanel.track");else{if(!this._event_is_disabled(e)){(t=t||{}).token=this.get_config("token");var s=this.persistence.remove_event_timer(e);if(!C.isUndefined(s)){var a=(new Date).getTime()-s;t.$duration=parseFloat((a/1e3).toFixed(3))}this._set_default_superprops(),t=C.extend({},C.info.properties(),this.persistence.properties(),this.unpersisted_superprops,t);var u=this.get_config("property_blacklist");C.isArray(u)?C.each(u,(function(e){delete t[e]})):this.report_error("Invalid value for property_blacklist config: "+u);var c={event:e,properties:t};return this._track_or_batch({type:"events",data:c,endpoint:this.get_config("api_host")+"/track/",batcher:this.request_batchers.events,should_send_immediately:o,send_request_options:r},n)}n(0)}})),Qe.prototype.set_group=ue((function(e,t,r){C.isArray(t)||(t=[t]);var n={};return n[e]=t,this.register(n),this.people.set(e,t,r)})),Qe.prototype.add_group=ue((function(e,t,r){var n=this.get_property(e);if(void 0===n){var i={};i[e]=[t],this.register(i)}else-1===n.indexOf(t)&&(n.push(t),this.register(i));return this.people.union(e,t,r)})),Qe.prototype.remove_group=ue((function(e,t,r){var n=this.get_property(e);if(void 0!==n){var i=n.indexOf(t);i>-1&&(n.splice(i,1),this.register({group_key:n})),0===n.length&&this.unregister(e)}return this.people.remove(e,t,r)})),Qe.prototype.track_with_groups=ue((function(e,t,r,n){var i=C.extend({},t||{});return C.each(r,(function(e,t){null!=e&&(i[t]=e)})),this.track(e,i,n)})),Qe.prototype._create_map_key=function(e,t){return e+"_"+JSON.stringify(t)},Qe.prototype._remove_group_from_cache=function(e,t){delete this._cached_groups[this._create_map_key(e,t)]},Qe.prototype.get_group=function(e,t){var r=this._create_map_key(e,t),n=this._cached_groups[r];return void 0!==n&&n._group_key===e&&n._group_id===t||((n=new Te)._init(this,e,t),this._cached_groups[r]=n),n},Qe.prototype.track_pageview=function(e){C.isUndefined(e)&&(e=S.location.href),this.track("mp_page_view",C.info.pageviewInfo(e))},Qe.prototype.track_links=function(){return this._track_dom.call(this,K,arguments)},Qe.prototype.track_forms=function(){return this._track_dom.call(this,Y,arguments)},Qe.prototype.time_event=function(e){C.isUndefined(e)?this.report_error("No event name provided to mixpanel.time_event"):this._event_is_disabled(e)||this.persistence.set_event_timer(e,(new Date).getTime())};var Xe={persistent:!0},Ze=function(e){var t;return t=C.isObject(e)?e:C.isUndefined(e)?{}:{days:e},C.extend({},Xe,t)};Qe.prototype.register=function(e,t){var r=Ze(t);r.persistent?this.persistence.register(e,r.days):C.extend(this.unpersisted_superprops,e)},Qe.prototype.register_once=function(e,t,r){var n=Ze(r);n.persistent?this.persistence.register_once(e,t,n.days):(void 0===t&&(t="None"),C.each(e,(function(e,r){this.unpersisted_superprops.hasOwnProperty(r)&&this.unpersisted_superprops[r]!==t||(this.unpersisted_superprops[r]=e)}),this))},Qe.prototype.unregister=function(e,t){(t=Ze(t)).persistent?this.persistence.unregister(e):delete this.unpersisted_superprops[e]},Qe.prototype._register_single=function(e,t){var r={};r[e]=t,this.register(r)},Qe.prototype.identify=function(e,t,r,n,i,o,s,a){var u=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var c=u;this.register_once({$had_persisted_distinct_id:!0,$device_id:c},"")}e!==u&&e!==this.get_property(De)&&(this.unregister(De),this.register({distinct_id:e})),this._flags.identify_called=!0,this.people._flush(t,r,n,i,o,s,a),e!==u&&this.track("$identify",{distinct_id:e,$anon_distinct_id:u},{skip_hooks:!0})},Qe.prototype.reset=function(){this.persistence.clear(),this._flags.identify_called=!1;var e=C.UUID();this.register_once({distinct_id:e,$device_id:e},"")},Qe.prototype.get_distinct_id=function(){return this.get_property("distinct_id")},Qe.prototype.alias=function(e,t){if(e===this.get_property(Le))return this.report_error("Attempting to create alias for existing People user - aborting."),-2;var r=this;return C.isUndefined(t)&&(t=this.get_distinct_id()),e!==t?(this._register_single(De,e),this.track("$create_alias",{alias:e,distinct_id:t},{skip_hooks:!0},(function(){r.identify(e)}))):(this.report_error("alias matches current distinct_id - skipping api call."),this.identify(e),-1)},Qe.prototype.name_tag=function(e){this._register_single("mp_name_tag",e)},Qe.prototype.set_config=function(e){C.isObject(e)&&(C.extend(this.config,e),e.batch_size&&C.each(this.request_batchers,(function(e){e.resetBatchSize()})),this.get_config("persistence_name")||(this.config.persistence_name=this.config.cookie_name),this.get_config("disable_persistence")||(this.config.disable_persistence=this.config.disable_cookie),this.persistence&&this.persistence.update_config(this.config),r.DEBUG=r.DEBUG||this.get_config("debug"))},Qe.prototype.get_config=function(e){return this.config[e]},Qe.prototype._run_hook=function(e){var t=(this.config.hooks[e]||qe).apply(this,m.call(arguments,1));return void 0===t&&(this.report_error(e+" hook did not return a value"),t=null),t},Qe.prototype.get_property=function(e){return this.persistence.props[e]},Qe.prototype.toString=function(){var e=this.get_config("name");return e!==We&&(e="mixpanel."+e),e},Qe.prototype._event_is_disabled=function(e){return C.isBlockedUA(O)||this._flags.disable_all_events||C.include(this.__disabled_events,e)},Qe.prototype._gdpr_init=function(){"localStorage"===this.get_config("opt_out_tracking_persistence_type")&&C.localStorage.is_supported()&&(!this.has_opted_in_tracking()&&this.has_opted_in_tracking({persistence_type:"cookie"})&&this.opt_in_tracking({enable_persistence:!1}),!this.has_opted_out_tracking()&&this.has_opted_out_tracking({persistence_type:"cookie"})&&this.opt_out_tracking({clear_persistence:!1}),this.clear_opt_in_out_tracking({persistence_type:"cookie",enable_persistence:!1})),this.has_opted_out_tracking()?this._gdpr_update_persistence({clear_persistence:!0}):this.has_opted_in_tracking()||!this.get_config("opt_out_tracking_by_default")&&!C.cookie.get("mp_optout")||(C.cookie.remove("mp_optout"),this.opt_out_tracking({clear_persistence:this.get_config("opt_out_persistence_by_default")}))},Qe.prototype._gdpr_update_persistence=function(e){var t;if(e&&e.clear_persistence)t=!0;else{if(!e||!e.enable_persistence)return;t=!1}this.get_config("disable_persistence")||this.persistence.disabled===t||this.persistence.set_disabled(t),t&&C.each(this.request_batchers,(function(e){e.clear()}))},Qe.prototype._gdpr_call_func=function(e,t){return t=C.extend({track:C.bind(this.track,this),persistence_type:this.get_config("opt_out_tracking_persistence_type"),cookie_prefix:this.get_config("opt_out_tracking_cookie_prefix"),cookie_expiration:this.get_config("cookie_expiration"),cross_site_cookie:this.get_config("cross_site_cookie"),cross_subdomain_cookie:this.get_config("cross_subdomain_cookie"),cookie_domain:this.get_config("cookie_domain"),secure_cookie:this.get_config("secure_cookie"),ignore_dnt:this.get_config("ignore_dnt")},t),C.localStorage.is_supported()||(t.persistence_type="cookie"),e(this.get_config("token"),{track:t.track,trackEventName:t.track_event_name,trackProperties:t.track_properties,persistenceType:t.persistence_type,persistencePrefix:t.cookie_prefix,cookieDomain:t.cookie_domain,cookieExpiration:t.cookie_expiration,crossSiteCookie:t.cross_site_cookie,crossSubdomainCookie:t.cross_subdomain_cookie,secureCookie:t.secure_cookie,ignoreDnt:t.ignore_dnt})},Qe.prototype.opt_in_tracking=function(e){e=C.extend({enable_persistence:!0},e),this._gdpr_call_func(ie,e),this._gdpr_update_persistence(e)},Qe.prototype.opt_out_tracking=function(e){(e=C.extend({clear_persistence:!0,delete_user:!0},e)).delete_user&&this.people&&this.people._identify_called()&&(this.people.delete_user(),this.people.clear_charges()),this._gdpr_call_func(oe,e),this._gdpr_update_persistence(e)},Qe.prototype.has_opted_in_tracking=function(e){return this._gdpr_call_func(se,e)},Qe.prototype.has_opted_out_tracking=function(e){return this._gdpr_call_func(ae,e)},Qe.prototype.clear_opt_in_out_tracking=function(e){e=C.extend({enable_persistence:!0},e),this._gdpr_call_func(fe,e),this._gdpr_update_persistence(e)},Qe.prototype.report_error=function(e,t){R.error.apply(R.error,arguments);try{t||e instanceof Error||(e=new Error(e)),this.get_config("error_reporter")(e,t)}catch(t){R.error(t)}},Qe.prototype.init=Qe.prototype.init,Qe.prototype.reset=Qe.prototype.reset,Qe.prototype.disable=Qe.prototype.disable,Qe.prototype.time_event=Qe.prototype.time_event,Qe.prototype.track=Qe.prototype.track,Qe.prototype.track_links=Qe.prototype.track_links,Qe.prototype.track_forms=Qe.prototype.track_forms,Qe.prototype.track_pageview=Qe.prototype.track_pageview,Qe.prototype.register=Qe.prototype.register,Qe.prototype.register_once=Qe.prototype.register_once,Qe.prototype.unregister=Qe.prototype.unregister,Qe.prototype.identify=Qe.prototype.identify,Qe.prototype.alias=Qe.prototype.alias,Qe.prototype.name_tag=Qe.prototype.name_tag,Qe.prototype.set_config=Qe.prototype.set_config,Qe.prototype.get_config=Qe.prototype.get_config,Qe.prototype.get_property=Qe.prototype.get_property,Qe.prototype.get_distinct_id=Qe.prototype.get_distinct_id,Qe.prototype.toString=Qe.prototype.toString,Qe.prototype.opt_out_tracking=Qe.prototype.opt_out_tracking,Qe.prototype.opt_in_tracking=Qe.prototype.opt_in_tracking,Qe.prototype.has_opted_out_tracking=Qe.prototype.has_opted_out_tracking,Qe.prototype.has_opted_in_tracking=Qe.prototype.has_opted_in_tracking,Qe.prototype.clear_opt_in_out_tracking=Qe.prototype.clear_opt_in_out_tracking,Qe.prototype.get_group=Qe.prototype.get_group,Qe.prototype.set_group=Qe.prototype.set_group,Qe.prototype.add_group=Qe.prototype.add_group,Qe.prototype.remove_group=Qe.prototype.remove_group,Qe.prototype.track_with_groups=Qe.prototype.track_with_groups,Qe.prototype.start_batch_senders=Qe.prototype.start_batch_senders,Qe.prototype.stop_batch_senders=Qe.prototype.stop_batch_senders,Ne.prototype.properties=Ne.prototype.properties,Ne.prototype.update_search_keyword=Ne.prototype.update_search_keyword,Ne.prototype.update_referrer_info=Ne.prototype.update_referrer_info,Ne.prototype.get_cross_subdomain=Ne.prototype.get_cross_subdomain,Ne.prototype.clear=Ne.prototype.clear;var et={},tt=function(){Be.init=function(e,r,n){if(n)return Be[n]||(Be[n]=et[n]=Je(e,r,n),Be[n]._loaded()),Be[n];var i=Be;et.mixpanel?i=et.mixpanel:e&&((i=Je(e,r,We))._loaded(),et.mixpanel=i),Be=i,1===xe&&(t.mixpanel=Be),C.each(et,(function(e,t){t!==We&&(Be[t]=e)})),Be._=C}};var rt=(xe=0,Be=new Qe,tt(),Be.init(),function(){function e(){e.done||(e.done=!0,Ye=!0,Ve=!1,C.each(et,(function(e){e._dom_loaded()})))}if(S.addEventListener)"complete"===S.readyState?e():S.addEventListener("DOMContentLoaded",e,!1);else if(S.attachEvent){S.attachEvent("onreadystatechange",e);var r=!1;try{r=null===t.frameElement}catch(e){}S.documentElement.doScroll&&r&&function t(){try{S.documentElement.doScroll("left")}catch(e){return void setTimeout(t,1)}e()}()}C.register_event(t,"load",e,!0)}(),Be);e.exports=rt},365:function(e,t,r){"use strict";var n=r(764).Buffer,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.parse=t.injection=t.isIntercept=t.checkRequestHeader=t.isInterceptSite=t.formatM3u8=t.parseM3u8=t.fetch=t.open=void 0;const u=a(r(248));u.default.mode="worker";const c=r(278),l=s(r(903));t.parse=l.default;const f=r(814),h=s(r(905)),p=a(r(619)),d=a(r(40)),y=a(r(421));let g;const _=new c.Torrent;async function m(e,t){return l.default.parse(e,t)}function b(){return!/\.(youtube|google|facebook|twitter|jd|qq|iqiy|youku|bilibili)\.com/i.test(location.hostname)}function v(e,t){let r=n.alloc(0);if(t instanceof ArrayBuffer){let e=new DataView(t),i=[];for(let t=0;t<e.byteLength;t++)i.push(e.getUint8(t));r=n.from(i)}else r=n.from(t);_.seed(e,r)}t.open=function(e){_.once("open",(()=>{console.info("open===============>"),e()}))},t.fetch=async function(e,t){let r=e instanceof Request?e.url:e,i=e instanceof Request?e.method:t?t.method:"GET";i=i||"GET",(t=Object.assign({},e instanceof Request?e:{},t)).headers=Object.assign({},t.headers);let o=await async function(e,t,r){if(!/^GET$/i.test(t))return!1;let n="m3u8playlist-"+h.md5(e);return!!await y.default.get(n)||(0,l.mayHandlePlaylist)(e,t,r)}(r,i,"");if(o){let e=await y.default.get(r);if(e&&e.length>128)return console.info("m3u8 playlist from cache",r),new Response(n.from(e),{status:200})}let s=await(0,f.fetch)(r,t).catch((e=>new Response("",{status:500})));if(s.ok||(s=await _.fetch(r,t).catch((e=>new Response("",{status:500})))),console.info("fetch",r,s.status),s.ok){let e=s.headers.get("content-type")||"";if((0,l.mayHandlePlaylist)(r,i,e)){let e=await s.clone().text();y.default.set(r,e),console.info("m3u8 playlist set cache",r),y.default.set("m3u8playlist-"+h.md5(r),!0)}}return s},(async()=>{const e=`https://cdn.jsdelivr.net/npm/ivideos@${d.default.version}/dist/ivideos.worker.js?v=${d.default.version}`;let t=await(0,f.fetch)(e).then((e=>e.text())).catch((e=>""));if((!t||t.length<1024)&&(t=await(0,f.fetch)(`https://a.ivideos.one/go?url=${encodeURIComponent(e)}`).then((e=>e.text())).catch((e=>""))),!t||t.length<1024)return console.warn("fetch worker error");let r=new Blob([t],{type:"text/javascript"}),n=URL.createObjectURL(r),i=new Worker(n);g=new p.default(i)})(),t.parseM3u8=m,t.formatM3u8=async function(e,t){return g?new Promise((r=>{null==g||g.request("ivideos.formatM3u8",{url:e,m3u8:t},(({m3u8:e})=>{r(e||"")}))})):l.default.formatM3u8(e,t)},t.isInterceptSite=b;let w=f.fetch,k=XMLHttpRequest.prototype.open,S=XMLHttpRequest.prototype.send,E=new Set;new Map;function T(e){return!e.range&&("function"!=typeof e.get||!e.get("range"))}function O(e,t,r){try{if(!b())return!1;t=(null==t?void 0:t.trim())||"";let n=e;n instanceof globalThis.Request&&(e=n.url),e=/^\/\//.test(e)?location.protocol+e:e;let i=h.suffix(e),o=E.has(e);if(o=o||u.default.videoChunkSuffix.includes(i),E.size>0&&!E.has(e)&&u.default.videoChunkSuffix.includes(i)&&E.clear(),o)return!0;let s=new URL(e);if(!/^GET$/i.test(t))return!1;if(/(googleapis|googlevideo|)\.com/i.test(s.hostname))return!1;if(r)return/(video|image|octet-stream)/i.test(r);if(/\/api\//i.test(e))return!1;if(E.size<1)return["png","jpg","jpeg"].includes(i)}catch(t){console.warn("isIntercept",t,e)}return!1}async function x(e,t){let r=t||{},i=e instanceof Request?e.url:e.toString(),o=e instanceof Request?e.headers:r.headers,s=(e instanceof Request?e.method:r.method)||"GET";i=h.urlPatch(i);let a="";r.headers&&("function"==typeof(null==o?void 0:o.get)?a=(null==o?void 0:o.get("content-type"))||"":o&&(a=o["content-type"]));let u=O(i,s,a);if(u&&(u=T(o)),!u){if((0,l.mayHandlePlaylist)(i,s)){let e=await y.default.get(i);if(e&&e.length>128)return console.info("m3u8 playlist from cache",i),new Response(n.from(e),{status:200})}let r=await w(e,t).catch((e=>new Response("",{status:500})));if((0,l.mayHandlePlaylist)(i,s)&&(r.ok||(r=await _.fetch(i).catch((e=>new Response("",{status:500})))),(0,l.mayHandlePlaylist)(i,s,r.headers.get("content-type")||""))){let e=await r.clone().text().catch((e=>"")),t=l.default.parse(i,e);t.length>10&&(console.info("m3u8 playlist set cache",i),y.default.set(i,e),E=new Set(t),_.setPlayList(t,i))}return r}return _.setLastChunkIndex(i),new Promise((async r=>{let n=await _.getChunk(i);if(n){if((n.byteLength||n.length)>0){let e=new Response(n,{headers:{"content-type":"video/mp2t"},status:200,statusText:"OK"});return Object.defineProperties(e,{url:{value:i}}),r(e)}}let o=await w(e,t).catch((async e=>new Response("",{status:500,statusText:e.message||""}))),s=o.headers.get("content-type")||"";O(this.url,this.method,s)&&([200,206].includes(o.status)?o.clone().arrayBuffer().then((e=>v(i,e))):_.fetch(i)),r(o)}))}t.checkRequestHeader=T,t.isIntercept=O;class B extends XMLHttpRequest{constructor(){super(),this.method="GET",this._headers={},this._isHandle=!1,this._handleCallbacks=[];let e=!1;const t=async t=>{let r=this.url;e=!0;let i=this.getResponseHeader("content-type")||"";if([200,206].includes(t.target.status)){this._isHandle=!0;let e=this.response;if(null==e)return;if((0,l.mayHandlePlaylist)(r,this.method,i)){let i=n.from(e).toString(),o=await m(r,i);return o.length>10&&(E=new Set(o),_.setPlayList(o,r)),void this._handleCallbacks.forEach((e=>e(t)))}O(r,this.method,i)&&v(r,e)}else O(this.url,this.method,i)&&_.fetch(r);this._handleCallbacks.forEach((e=>{try{e.bind(this)(t)}catch(e){console.info("handle error",e,t)}}))};super.addEventListener("load",(r=>{e||t(r)})),super.addEventListener("readystatechange",(r=>{e||4==this.readyState&&t(r)}));const r=async()=>{O(this.url,this.method)&&_.fetch(this.url)};this.addEventListener("timeout",r),this.addEventListener("abort",r)}addEventListener(e,t){if("load"==e||"readystatechange"==e)return this._handleCallbacks.push(t);super.addEventListener(e,t)}removeEventListener(e,t){if("load"!=e&&"readystatechange"!=e)super.removeEventListener(e,t);else{let e=this._handleCallbacks.findIndex((e=>e==t));this._handleCallbacks.splice(e,1)}}setRequestHeader(e,t){e=e.toLowerCase(),this._headers[e]=t,super.setRequestHeader(e,t)}open(e,t,r=!0,n,i){return t=h.urlPatch(t),this.method=e||"GET",this.url=t,k.bind(this)(e,t,r,n,i),this}isIntercept(){let e=O(this.url,this.method);return e&&(e=T(this._headers)),e}async send(e){let t=this.url;if(!this.isIntercept()){if((0,l.mayHandlePlaylist)(t,this.method)){let e=await y.default.get(t);if(e&&e.length>128)return console.info("m3u8 playlist from cache",t),void this.writeResponse(n.from(e));_.fetch(t).then((async e=>{if(200==e.status){let r=await e.arrayBuffer(),i=n.from(r);r.byteLength>128&&(console.info("m3u8 playlist set cache",t),y.default.set(t,i.toString()))}}))}return S.bind(this)(e)}{_.setLastChunkIndex(t);let r=await _.getChunk(t);if(r){(r.byteLength||r.length)>1024?this.writeResponse(r):S.bind(this)(e)}else S.bind(this)(e)}}writeResponse(e){Object.defineProperties(this,{readyState:{value:4,enumerable:!0},response:{value:e},responseText:{value:e},status:{value:200},statusText:{value:"OK"}});let t=new Event("readystatechange"),r=new Event("load");const n={target:{value:this,enumerable:!0},returnValue:{value:!0,enumerable:!0},srcElement:{value:this,enumerable:!0}};Object.defineProperties(r,n),Object.defineProperties(t,n),setTimeout((()=>{this.dispatchEvent(t),this.dispatchEvent(r)}),10)}}function A(){if(b())try{Object.defineProperty(window,"XMLHttpRequest",{value:B}),Object.defineProperty(window,"fetch",{value:x})}catch(e){}}t.injection=A,A()},248:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=({NODE_ENV:"production",appVersion:"2.1.0"}||{}).appVersion||"",n=["p0.ivideos.one","p1.ivideos.one"];t.default={appVersion:r,isProd:true,mode:"plugin",logLevel:2,videoChunkSuffix:["ts","m4s","mp4"],videoListSuffix:["m3u8"],get peerServer(){return n[Math.floor(Math.random()*n.length)]},mixpanelToken:"17bbce2e5b921333cec9ae737232b638",iceServers:[{urls:["stun:stun1.l.google.com:19302","stun:stun.l.google.com:19302","stun:stun2.l.google.com:19302","stun:stun3.l.google.com:19302","stun:stun4.l.google.com:19302"]},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp",ip:""}],icePasswordSecret:"C5TwyHpWu3DV/++xLsfSR2yQWEMhg6pXmNoRnvnL1y2bGd83v9gwpHG3M+yXAYxdsIhkIywmfWnqKh5ulQBV9kvJ9WEE85/00RhZe0hrQLrBBlAMOLOygLlFTSd2lv15BT+ixdzZDynowzIbahOmh73MSZqtZgjbT7aNJDuEgrW+KzT38aBz4VR/q1K8F1/4jy8QkrhiB+k14mPTrvyZFqVTckSLHI7+bdBBOc/73jo2wJPdocZbyiVlZ6xOzYUK1ORCd8IVYM7u53jm8h2BfK+0xChMqZFcaG9KihI9H9bj+kanhu2oPHSJnRognHVRDgMJXj6jMeDrWgIN5SIUfg=="}},619:function(e,t,r){"use strict";var n=r(764).Buffer,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.IVideos=t.Request=void 0;const u=a(r(729)),c=s(r(905));class l{constructor(e){this.worker=e,this.tasks=new Map;let t=this.tasks;e.addEventListener("message",(e=>{let r=e.data;if("ivideos.response"==r.cmd){let e=r.sid,n=t.get(e);t.delete(e),n&&n(r.data)}}))}request(e,t,r){let n=this.tasks,i=c.buildSN(12);r&&n.set(i,(e=>{n.delete(i),r&&r(e)}));let o=location.href.replace(/[#].*$/,"");this.worker instanceof Worker?this.worker.postMessage({sid:i,router:e,data:t,headers:{refer:o}}):this.worker.postMessage({sid:i,router:e,data:t,headers:{refer:o}},"/")}}t.Request=l;class f extends u.default{constructor(e){super(),this._open=!1,this.on("open",(()=>{this._open=!0})),e&&this.init(e)}get open(){return this._open}init(e){this._request=new l(e),this.emit("open")}request(e,t,r){return this._request.request(e,t,r)}fetch(e,t){return new Promise((r=>{if(!this._request||!this._request.worker){let e=new Response("",{status:500,statusText:"",headers:{}});return r(e),void(t&&t(e))}this._request.request("ivideos.fetch",e,(e=>{[200,206].includes(e.status)&&e.data&&/buffer/i.test(e.data.type)&&(e.data=n.from(e.data.data));let i=204!=e.status?e.data:null,o=new Response(i,{status:e.status,statusText:e.statusText,headers:e.headers});r(o),t&&t(o)}))}))}get(e,t){return new Promise((r=>{this._request.request("ivideos.get",{url:e},(e=>{t&&t(e),r(e)}))}))}async delete(e){this._request.request("ivideos.delete",{url:e})}async seed(e,t){this._request.request("ivideos.seed",{url:e,data:t})}async setPlayList(e,t){this._request.request("ivideos.setPlayList",e,t)}}t.IVideos=f,t.default=f},260:function(e,t,r){"use strict";var n=r(764).Buffer,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const u=a(r(729)),c=s(r(905)),l=a(r(631));let f=c.logger;const h=a(r(90)),p=a(r(248));globalThis.navigator;class d extends u.default{constructor(e){super(),this.ifetch=e,this.loadeds=[],this.urls=[],this.indexs=new Map,this.limit=20,this.loading=new Set,this.expandLimit=0,this.isReady=!1,this.seedLastChunkIndex=0,this.receives=new Map,this._receiveChunkCount=0,this.dlCount=0,this.on("peer",(e=>{})),this.on("receive",(({peerId:e})=>{this._receiveChunkCount++;let t=this.receives.get(e)||0;this.receives.set(e,++t)})),this.once("ready",(()=>{this.download(this.urls[this.seedLastChunkIndex],{lastIndex:this.seedLastChunkIndex,offset:0,limit:this.limit})})),self.addEventListener("resize",(()=>{var e;if(this.canvas){let t=null===(e=self.document)||void 0===e?void 0:e.querySelector("video");t&&(this.canvas.style.visibility="visible",this.canvas.width=Math.floor(.96*t.offsetWidth),this.canvas.style.left=Math.ceil(.02*t.offsetWidth)+"px",this.drawProcess(-1,this.seedLastChunkIndex))}})),this.on("seed",(({index:e})=>{this.drawProcess(e,this.seedLastChunkIndex)})),this.on("showProcess",(e=>{this.showProcess()}))}setPlaylist(e){this.playlist=e}setExpandLimit(e=0){this.expandLimit=e}get hasPlaylist(){return this.urls.length>0&&/^(http|blob)/i.test(this.playlist)}get receiveChunkCount(){return this._receiveChunkCount}hasLoading(e){return this.loading.has(e)}init(e){var t;e.length<2||(this.urls=e,c.inContext()&&(null===(t=h.default.runtime)||void 0===t||t.onMessage.addListener((e=>{let t=e.data;if(!t)return;let r=t.data;if("ivideos.loadChunk"===t.cmd){let e=r.url;this.download(e,{lastIndex:this.seedLastChunkIndex,offset:0,limit:1})}}))),f.info("set playlist",e.length),this.loadeds=[],e.forEach(((e,t)=>{this.loadeds[t]=0,this.indexs.set(e,t)})),this.showProcess())}inIndex(e){return this.indexs.get(e)||0}addUrl(e){this.inIndex(e)>=0||(this.urls.push(e),this.indexs.set(e,this.urls.length-1))}async fetch(e,t){let r=(null==t?void 0:t.method)||"GET",i=(null==t?void 0:t.headers)||new Headers,o=null==t?void 0:t.body,s=this.inIndex(e),a=(null==t?void 0:t.timeout)||15e3,u=Date.now(),c=this.hasUrl(e)&&/^GET$/i.test(r);if(c){if(this.hasLoading(e))return new Response(null,{status:500});this.loading.add(e)}if(!this.ifetch.open)return new Response("no open",{status:500});let l=await this.ifetch.fetch(e,{timeout:a,cache:c,headers:i,body:o,process:async()=>{if(!c)return!0;if(s<this.seedLastChunkIndex)return!1;return!await this.hasChunk(e)}}).then((async t=>(/^2/i.test(t.status+"")||(t.abort(),t=await this.ifetch.fetch(e,{timeout:15e3,cache:!0,process:async()=>{if(!this.hasUrl(e))return!0;if(s<this.seedLastChunkIndex)return!1;return!await this.hasChunk(e)}})),t))).catch((e=>new Response(null,{status:500,statusText:null==e?void 0:e.message})));if([200,206].includes(l.status)&&/GET/i.test(r)&&this.hasUrl(e)){let t=n.from(await l.clone().arrayBuffer());this.isOk(l,t)&&c&&(this.showLog(l,{startTime:u,chunk:t,url:e}),this.seed(e,t))}return this.loading.delete(e),l.clone()}download(e,t){let r=this.inIndex(e)+t.offset,n=r+t.limit,i=this.urls.slice(r,n);Date.now();i.forEach((async e=>{await this.fetch(e).catch((e=>{}))}))}showLog(e,t){try{let r=e.status,n=t.url,i=e.ttl,o=e.headers.get("peer")||"",s=e.headers.get("country")||"",a=parseInt(e.headers.get("content-length")||"")||-1,u=this.inIndex(n);if(1==this.loadeds[u]||u<this.seedLastChunkIndex)return;let c=[200,206].includes(r)&&t.chunk.byteLength>1024;if(c){++this.dlCount;const e=Math.max(Math.ceil(100*this.dlCount/this.urls.length),1);f.info(o,s,c+"/"+r,n,this.dlCount+"/"+e+"%","index/"+this.seedLastChunkIndex+"/"+u+"/"+this.urls.length,"ttl/"+i+"/"+(Date.now()-t.startTime),"content-length/"+t.chunk.byteLength+"/"+a)}}catch(e){}}destroy(){}async hasChunk(e){let t=c.buildChunkId(e);return l.default.has(t)}hasUrl(e){return this.inIndex(e)>=0}async setLastChunkIndex(e){if(!this.isReady)return this.isReady=!0,void this.emit("ready");this.hasUrl(e)||this.addUrl(e);let t=this.inIndex(e);if(Math.abs(t-this.seedLastChunkIndex)>10)try{f.info("clear queue=>",t-this.seedLastChunkIndex),this.ifetch.clear()}catch(e){}this.seedLastChunkIndex=t,this.batchDownload()}get enableBatchDownload(){let e=(globalThis.navigator||{}).connection||{downlink:3};return(parseInt(e.downlink)||3)<=4}batchDownload(){if(!this.enableBatchDownload)return;let e=this.urls[this.seedLastChunkIndex],t=this.seedLastChunkIndex;if(!(t<0)&&e)if(t<8)this.download(e,{lastIndex:this.seedLastChunkIndex,offset:0,limit:20});else{let t="plugin"==p.default.mode?12:0;this.download(e,{lastIndex:this.seedLastChunkIndex,offset:t,limit:this.limit+this.expandLimit})}}isOk(e,t){let r=e.headers||{},n=parseInt(r.get?r.get("content-length"):r["content-length"])||-1;return!![200,206].includes(e.status)&&(t.byteLength==n||n<0)}async getChunk(e,t){let r=c.buildChunkId(e);return t&&(r=t+"-"+r),await l.default.getChunk(r)||n.alloc(0)}async requestPlaylist(e,t){let r=setTimeout((()=>t("")),15e3),n=await this.fetch(e).then((e=>(clearTimeout(r),200!=e.status?"":e.text())));t(n)}async seed(e,t){try{this.loading.delete(e);let r=c.buildChunkId(e);t=n.isBuffer(t)?t:n.from(t);let i=this.inIndex(e);if(!t)return!1;if(0==i){if(t.byteLength<1)return!1}else if(i>0&&t.byteLength<12288)return!1;if(t&&t.byteLength>1024)return this.loadeds[i]=1,l.default.setChunk(r,t),this.emit("seed",{url:e,index:i,data:t}),!0}catch(e){f.warn("seed error",e,t)}return!1}async showProcess(){let e=document.querySelector(".ivprocess");if(e)return void(this.canvas=e);let t=document.querySelector("video");if(!t)return void setTimeout((()=>this.showProcess()),1e3);e=document.createElement("canvas"),f.info("=====show process======",this.urls.length);const r=Math.ceil(.02*t.offsetWidth);let n;if(Object.assign(e.style,{"z-index":99999,position:"absolute",top:"2px",left:r+"px"}),e.width=Math.floor(.96*t.offsetWidth),e.height=12,e.className="ivprocess",t.addEventListener("mouseenter",(()=>{n&&clearTimeout(n),e.style.visibility="visible"})),t.addEventListener("mouseout",(()=>{n&&clearTimeout(n),n=setTimeout((()=>{e.style.visibility="hidden"}),3e3)})),t.parentElement){t.parentElement.insertBefore(e,t),t.parentElement.style.position||(t.parentElement.style.position="relative")}this.canvas=e,await new Promise((e=>{let t=setInterval((()=>{this.create2DContext()&&(clearInterval(t),this.drawProcess(0,0),e(void 0))}),1e3)}))}create2DContext(){try{var e=this.canvas.getContext("2d");if(!e)return;return this.canvasCtx=e,e}catch(e){return}}drawProcess(e,t=0){let r=this.urls.length,n=this.canvas;if(!this.canvasCtx){if(!n)return;if(!this.create2DContext())return}let i=this.canvasCtx,o=n.offsetWidth-3,s=Math.floor(o/2);s=s>=r?r:s;const a=Math.floor(o/s);let u=["rgba(4, 87, 51, 0.5)","rgba(20, 102, 255, 0.2)"],c=e<0?r:e+5;for(let r=Math.max(e-5,0);r<c;r++){if(r==t)continue;let e=this.loadeds[r],n=Math.floor(r/s),o=r%s*a,c=3*n;i.fillStyle=e?u[n%2]:"rgba(0, 0, 0, 0)",i.fillRect(o,c,a,3)}let l=t%s*a,f=3*Math.floor(t/s);i.fillStyle="rgba(255, 0, 0, 1)",i.fillRect(l,f,a,3)}}t.default=d},336:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(r(729)),u=o(r(905)),c=s(r(497)),l=s(r(631)),f=s(r(484)),h=s(r(90)),p=s(r(248));class d extends a.default{constructor(){var e;super(),this.clients=new Map,window==window.top&&(window.addEventListener("beforeunload",(()=>{this.destroy()})),window.addEventListener("close",(()=>{this.destroy()})),this.init(),null===(e=h.default.runtime)||void 0===e||e.onMessage.addListener(((e,t,r)=>{var n;if(e.router)switch(e.router){case"ivideos.daemon":this.init(),r({});break;case"ivideos.isOpen":r({isOpen:!!(null===(n=this.peer)||void 0===n?void 0:n.open)})}})))}get id(){var e;return(null===(e=this.peer)||void 0===e?void 0:e.id)||""}async init(){if(window!=window.top)return;let e=await this.getDeviceInfo();if(e.daemon)return;let t=u.md5(e.daemonId+"-"+(0,f.default)().format("YYYYMMWW"));this.makePeer({peerId:t,host:p.default.peerServer,port:443})}async makePeer(e){var t;let r=e.peerId,n=u.md5("secret"+r),i=n.slice(0,8),o=n.slice(12,20);console.info("peer==>",r,i,o);let s=new c.default(r,{secure:!0,token:r.slice(14,22),host:e.host,port:e.port,handshakeMode:"all",debug:0,username:i,password:o});s.acceptFactor.on("accept",(({handle:e,socket:t})=>{e||console.info("accept close",t.peer),e||t.destroy()})),null===(t=s.acceptFactor.accepts.get("wrtc"))||void 0===t||t.on("accept",(({id:e,ttl:t,chunk:r})=>{t>=2e3&&console.info("accept",e,t,(null==r?void 0:r.byteLength)||0)})),this.peer=s,s.on("open",(e=>{console.info("===daemon",s.id),this.start();let t=setInterval((()=>{s.open?this.start():clearInterval(t)}),6e4)})),s.once("disconnected",(()=>{})),s.once("close",(()=>{this.destroy(),this.clients.clear()}))}async getChunk(e,t){return e=u.buildChunkId(e),t&&(e=t+"-"+e),await l.default.getChunk(e)}start(){return new Promise((e=>{y({router:"/startDaemon",data:{}},(t=>{e(t)}))}))}stop(){return new Promise((e=>{y({router:"/stopDaemon",data:{}},(t=>{e(t)}))}))}getDeviceInfo(){return new Promise((e=>{h.default.runtime?y({router:"/deviceInfo",data:{}},(t=>{e(t||{daemon:!0})})):e({deviceId:"",daemon:!0,peers:[],daemonId:u.md5(u.buildSN(12))})}))}destroy(){this.clients.forEach((e=>{var t;null===(t=e.socket)||void 0===t||t.destroy()})),this.clients.clear();let e=this.peer;e&&(this.stop(),e.removeAllListeners("disconnected"),e.removeAllListeners("connection"),e.destroy(),this.peer=void 0)}}function y(e,t){var r;try{null===(r=h.default.runtime)||void 0===r||r.sendMessage(e,{},t)}catch(e){}}t.default=d},278:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Daemon=t.Torrent=void 0;const i=n(r(177));t.Torrent=i.default;const o=n(r(336));t.Daemon=o.default,t.default=i.default},903:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.mayHandlePlaylist=void 0;const a=s(r(248)),u=o(r(905)),c=o(r(724));t.default=c,t.mayHandlePlaylist=function(e,t,r){try{if(!/^GET$/i.test(t))return!1;let n=e;n instanceof globalThis.Request&&(e=n.url),e=/^\/\//.test(e)?location.protocol+e:e;let i=u.suffix(e);if(r&&/(mpegurl)/i.test(r))return!0;if(a.default.videoChunkSuffix.includes(i))return!1;if(a.default.videoListSuffix.includes(i))return!0}catch(t){console.info("===>mayHandlePlaylist",t.message,e)}return!1}},724:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.parseQQM3u8=t.parseM3u8=t.formatM3u8=t.parse=void 0;const s=o(r(905));t.parse=function(e,t){try{let r=new URL(e),n=s.prefix(e);return/\.l\.qq\.com$/.test(r.hostname)&&"/proxyhttp"==r.pathname?[]:a(t,n)}catch(e){console.warn("parse error",e.message)}return[]};function a(e,t){if(!e.includes("#EXTINF"))return[];let r=/^https?:/.test(t)?new URL(t):void 0,n=(null==r?void 0:r.origin)||t;return e.split(/[\r\n]/).filter((e=>!!e)).map((e=>e=e.replace(/(^.*URI=['"]+)|(['"]+$)/g,""))).filter((e=>!/^#/i.test(e))).map((e=>/^\//i.test(e)?n+e:/^https?:/i.test(e)?e:t+"/"+e))}t.formatM3u8=function(e,t){t=t.trim();let r=new URL(e),n=s.prefix(e),i=(null==r?void 0:r.origin)||n;return t.split(/[\r\n]/).filter((e=>!!e)).map((e=>{if(!e)return"";if(e=e.trim(),/URI=/i.test(e)){let t=(e.match(/URI=["' ]+(((http|https|blob):)?[^"']+)["' ]+/i)||[])[1];if(t){let r=t;/^(http|https|blob):/i.test(t)||(r=/^\//i.test(t)?i+r:n+"/"+r),e=e.replace(t,r)}return e}return/^#/i.test(e)||/^(https|http|blob):/i.test(e)?e:/^\//i.test(e)?i+e:n+"/"+e})).filter((e=>!!e)).join("\r\n")},t.parseM3u8=a,t.parseQQM3u8=function(e,t){var r,n,i,o;try{if(0==e.errCode&&e.vinfo){let s=JSON.parse(e.vinfo);if((null===(n=null===(r=null==s?void 0:s.vl)||void 0===r?void 0:r.vi)||void 0===n?void 0:n.length)>0){return a(null===(o=null===(i=null==s?void 0:s.vl)||void 0===i?void 0:i.vi[0].ul)||void 0===o?void 0:o.m3u8,t)}}}catch(e){console.warn("parseQQM3u8 error",e.message)}return[]}},177:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(r(497)),u=s(r(729)),c=r(764),l=s(r(248)),f=o(r(905)),h=s(r(344)),p=s(r(631)),d=s(r(260)),y=s(r(674));let g=f.logger;const _=s(r(90)),m=r(497),b=s(r(484)),v=r(814);g.info("run mode",l.default.mode);l.default.iceServers;const w=Math.floor(2*Math.random());class k extends u.default{constructor(e){super(),this.daemon=e,this._isOpen=!1,this.urls=[],this.loadingBack=new Map,this.loadBackAvgTTL=0,this.peerServer={host:"p0.iee.one",port:443},h.default.getInfo((async t=>{g.info("info===========",location.href,t);const r=(await new Promise((t=>{let r=(0,m.deviceId)(),n=f.md5(r+"-"+(0,b.default)().format("YYYYMMDD"));f.inContext()?_.default.runtime.sendMessage({router:"/deviceInfo",data:{}},(e=>t(e))):t({peerServer:this.peerServer,ip:y.default.ip||"",deviceId:r,daemon:e,daemonId:n,appVersion:l.default.appVersion})}))||{}).peerServer;Object.assign(this.peerServer,r);let n=Date.now(),i=setInterval((async()=>{if(!("worker"==t.env||!!globalThis.document.querySelector("video")))return;if(Date.now()-n>=6e4)return clearInterval(i);clearInterval(i),this.url=t.url,this.title=t.title||"";let e=this.mid||f.buildMediaId(this.url);this.mid=e,p.default.setMedia(e),this.init(e)}),100)})),this.on("ready",(()=>{this.url&&y.default.play({title:this.title,m3u8:this.playlist,url:this.url}),setTimeout((()=>this.removeListener("ready")))}))}get ua(){return(null===navigator||void 0===navigator?void 0:navigator.userAgent)||""}get open(){return this._isOpen}initPeers(){let e=f.md5("secret"+this.peerId),t=e.slice(0,8),r=e.slice(12,20),n=this.peerId.slice(14,22),i=new a.default(this.peerId,{secure:!0,debug:0,host:l.default.peerServer,port:443,handshakeMode:"all",token:n,username:t,password:r});i.acceptFactor.on("accept",(e=>{if(!e.handle)return g.info("accept close",e.socket.peer),void e.socket.destroy()}));let o=new m.IFetch(i,{apikey:"ivideos",secret:"g35S152AORUWePWZjezQ8UVZXV5nbTxCkW87ZU+L6gVULjFTL+MP8vgJjBnvhwZM3f0HRhxAECVEWjOjjvuo0SIsV6nZcdQTNHJL/nVb4u2r3qLLSdXIF8A1iipDevmbhYTWrGinuJ7P8xvNJFDwlz9VPQA3zEEDEh8RDSlff6+GpcKcXLtuiWTT0oLkGpS+9ms+abeBv2H8SFafsK7EyfR0DCAtfL2qjxR94bzaYpAeOMGWC2pYumN36+6gyk5NZv8YxukmBArgrWwd36EBCA6kx9sjYLM2JzDOK5XmsXkCe9zlmMW12IhzUej693C0MiG2pnbDsjqSSii5R5qT5w==",server:`https://${l.default.peerServer}`});this.ifetch=o,this.attach=new d.default(this.ifetch),i.once("open",(()=>{this.attach.on("seed",(async()=>{}))})),i.once("open",(async()=>{g.info(`============= open peer ${this.peerId}:${i.username}:${i.password} ===============`),this.hasPlaylist&&this.emit("ready"),this._isOpen=!0})),o.once("open",(()=>{this.emit("open")})),this.initEventPeer(i)}hasVideo(){return!!document.querySelector("video")}async init(e){this.mid=f.buildMediaId(e||this.mid);let t="peer-"+this.mid,r=await p.default.getObject(t)||f.buildPeerId(this.mid);await p.default.setObject(t,r),this.peerId=r,this.initPeers(),this.hasPlaylist&&this.emit("ready")}initEventPeer(e){let t=e.id||"",r=!1;const n=()=>{r||(r=!0,setTimeout((()=>r=!1),1e4),globalThis.removeEventListener("close",n),globalThis.removeEventListener("beforeunload",n),e.destroy(),this.attach.destroy())};e.on("disconnected",(r=>{g.debug("==== peer disconnected ",t),setTimeout((()=>e.reconnect()),5e3)})),globalThis.addEventListener("beforeunload",(()=>n())),globalThis.addEventListener("close",(()=>n())),e.once("close",n)}get hasPlaylist(){return this.urls.length>0&&/^(http|blob)/i.test(this.playlist)}setPlayList(e,t){this.playlist=t,this.urls=e,this.hasPlaylist&&this.emit("ready"),this.attach?(this.attach.init(e),this.attach.setPlaylist(t)):setTimeout((()=>this.setPlayList(e,t)),200)}async setLastChunkIndex(e){var t,r,n,i;let o=(null===(t=this.attach)||void 0===t?void 0:t.inIndex(e))||this.urls.findIndex((t=>t==e));if(this.hasPlaylist){if((o<5||(null===(r=this.attach)||void 0===r?void 0:r.seedLastChunkIndex)<5)&&this.fetch(e),o%2==w&&o>1)for(let e=0;e<4;e++)this.fetch(this.urls[o+5+9*e]),this.fetch(this.urls[o+6+9*e])}else null===(n=this.attach)||void 0===n||n.addUrl(e),this.fetch(e);this.attach&&(null===(i=this.attach)||void 0===i||i.setLastChunkIndex(e))}async seed(e,t){var r;this.loadingBack.delete(e),t&&e&&(t=c.Buffer.isBuffer(t)?t:c.Buffer.from(t))&&t.byteLength>0&&(null===(r=this.attach)||void 0===r||r.seed(e,t))}async getChunk(e,t){if(this.attach)return this.attach.getChunk(e,t);{let r=f.buildChunkId(e);return t&&(r=t+"-"+r),p.default.getChunk(r)}}async hasChunk(e){let t=f.buildChunkId(e);return p.default.has(t)}clearPlayList(){}async fetch(e,t){var r;if(!e||!this.attach)return new Response("no data",{status:404});try{let n=(null==t?void 0:t.method)||"GET",i=await(null===(r=this.attach)||void 0===r?void 0:r.hasUrl(e))&&/^GET$/i.test(n);if(/^GET$/i.test(n)){let t=await this.getChunk(e);if(t&&t.byteLength>0)return new Response(t,{status:200})}let o=Date.now();return new Promise((async r=>{var n;if(f.inContext()){let s=setTimeout((async()=>{let n=await this.attach.fetch(e,t);[200,206].includes(n.status)&&r(n)}),5e3);null===(n=_.default.runtime)||void 0===n||n.sendMessage({router:"/fetch",data:Object.assign(Object.assign({},t),{url:e})},(async n=>{let a=null==n?void 0:n.data;if(i){let i=!1;if(this.loadBackAvgTTL=(this.loadBackAvgTTL+Date.now()-o)/2,[200,206].includes(null==n?void 0:n.status)&&a){let t=/buffer/i.test(a.type)?c.Buffer.from(a.data):c.Buffer.from(a);t.byteLength>=1024&&(i=!0,this.seed(e,t))}if(!i){let n=await this.attach.fetch(e,t);if([200,206].includes(n.status))return clearTimeout(s),this.loadingBack.delete(e),void r(n)}}clearTimeout(s),this.loadingBack.delete(e);let u=new Headers;for(let e in(null==n?void 0:n.headers)||{})u.append(e,n.headers[e]);let l=new Response(a,{status:(null==n?void 0:n.status)||500,headers:u});try{Object.defineProperty(l,"url",{value:e})}catch(e){}r(l)}))}else{let n=await(0,v.fetch)(e,Object.assign(Object.assign({},t),{timeout:3e3})).catch((e=>new Response("error",{status:500})));n.ok||(n=await this.attach.fetch(e,t)),this.loadingBack.delete(e),r(n)}}))}catch(t){return this.loadingBack.delete(e),new Response(null==t?void 0:t.message,{status:500})}}clear(){var e;p.default.clear(),null===(e=_.default.storage)||void 0===e||e.session.set({playlist:[]})}isSupports(){var e,t=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,r=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia||navigator.mediaDevices&&(null===(e=navigator.mediaDevices)||void 0===e?void 0:e.getUserMedia),n=window.WebSocket;return!!t&&!!r&&!!n}}t.default=k},90:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=globalThis.chrome||globalThis.browser||{};t.default=r},814:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetch=t.XResponse=void 0;const r=globalThis.fetch;class n extends Response{constructor(e,t){super(e.body,{headers:e.headers,status:e.status,statusText:e.statusText}),this.response=e,this.controller=t}get url(){return this.response.url}abort(){var e;null===(e=this.controller)||void 0===e||e.abort()}}async function i(e,t){let i=new AbortController,o=i.signal,s=e instanceof Request?e.url:e;if(t=t||{},e instanceof Request)for(let r in e)t[r]=e[r];delete t.url;let a=t.timeout||15e3;t.signal=o;let u=!0,c=setTimeout((()=>{u&&i.abort()}),a||15e3),l=await r(s,t).then((e=>(u=!1,c&&clearTimeout(c),e)));return new n(l,i)}t.XResponse=n,t.fetch=i,t.default=i},905:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.logger=t.setIntervalx=t.downloadClick=t.prefix=t.suffix=t.formatTTL=t.formatSize=t.md5=t.wait=t.urlPatch=t.racePromise=t.inContext=t.buildMediaId=t.buildChunkId=t.buildPeerId=t.buildSN=void 0;const i=n(r(568)),o=n(r(90)),s=r(296),a=n(r(495));t.logger=a.default;const u=(0,s.customAlphabet)("abcdefghijklmnopqrstwuvxyz0123456789ABCDEFGHIJKLMNOPQRSTWUVXYZ",32);function c(e){try{if(e=(e=e||"").trim(),/^[a-f0-9]{32}$/i.test(e))return e;{let t=new URL(e);if(/.*\.v\.smtcdns\.com$/i.test(t.hostname)){let r=["index","start","end"].map((e=>e+"="+(t.searchParams.get(e)||""))).join("&");e="https://xxxxxxx.v.smtcdns.com"+t.pathname.replace(/.*\//,"")+"?"+r}else if(/.*\.ott\.cibntv\.net$/.test(t.hostname))e="https://xxxxxxx.ott.cibntv.net"+t.pathname;else{/.*\.inter\.71edge\.com$/.test(t.hostname);{let r=["start","end"].map((e=>e+"="+(t.searchParams.get(e)||""))).join("&");e="https://xxxxxxx.iqiyi.com"+t.pathname+"?"+r}}}return f(e)}catch(t){console.warn("build chunkId error",t.message,e)}return""}function l(e){if(e=(e=e||"").trim(),/^[a-f0-9]{32}$/i.test(e))return e;try{if(/^https?:/i.test(e)){let t=new URL(e);e=/\.youtube\.com$/i.test(t.hostname)?"https://www.youtube.com/watch/"+t.searchParams.get("v")+".html":e.replace(/(\?|#).*/g,"")}else e=location.href}catch(t){e=location.href}return f((e=e.trim())+":IVIDEOS-SAVCX")}function f(e){return(0,i.default)(e).toLowerCase()}t.buildSN=function(e=12){return u(e)},t.buildPeerId=function(e){return f((e=e||"")+"-peer-"+u(32))},t.buildChunkId=c,t.buildMediaId=l,t.inContext=function(){var e;return!!(null===o.default||void 0===o.default?void 0:o.default.runtime)&&!!(null===(e=null===o.default||void 0===o.default?void 0:o.default.runtime)||void 0===e?void 0:e.sendMessage)&&!!(null===o.default||void 0===o.default?void 0:o.default.storage)},t.racePromise=function(e){return new Promise(((t,r)=>{let n=!1,i=setTimeout((()=>{n=!0,t(void 0)}),18e4);e.forEach((async e=>{let r=await e.then((e=>e)).catch((e=>{}));n||null!=r&&null!=r&&(n=!0,clearTimeout(i),t(r))}))}))},t.urlPatch=function(e){try{if(/^\/\//i.test(e))return location.protocol+e;if(/^\/[a-z0-9_-]/.test(e))return location.origin+e}catch(e){}return e},t.wait=async function(e=1){return new Promise((t=>setTimeout((()=>t()),e)))},t.md5=f,t.formatSize=function(e){return e>1073741824?Math.ceil(e/1024/1024/1024*100)/100+"G":e>1048576?Math.ceil(e/1024/1024*100)/100+"M":e>1024?Math.ceil(e/1024*100)/100+"K":e+"B"},t.formatTTL=function(e){if(e<1e3)return e+"ms";e=Math.ceil(e/1e3);let t=Math.floor(e/86400),r=Math.floor(e%86400/3600),n=Math.floor(e%3600/60),i=e%60;return t>0?`${t}D:${r}H:${n}m:${i}s`:r>0?`${r}H:${n}m:${i}s`:n>0?`${n}m:${i}s`:`${i}s`},t.suffix=function(e){try{if("string"!=typeof e)return"";let t=new URL(e).pathname.replace(/[\?#].*$/,"").replace(/^.*\//g,"").toLowerCase();return t=t.includes(".")?t.replace(/^.*\./g,""):"",/^[a-z0-9]+$/i.test(t)?t:""}catch(e){}return""},t.prefix=function(e){if("string"!=typeof e)return"";let t=e.replace(/\?.*$/,"").replace(/\/[^\/\?]+\.[a-z0-9]+$/,"");return t=t.replace(/[\/]+$/,""),t},t.downloadClick=function(e){if(e&&!(e.length<1)){var t=new Blob(e.map((e=>e.buffer)),{type:"video/mp4"});console.info("download",t);var r=document.createElement("a"),n=URL.createObjectURL(t),i=`${document.title}.mp4`;r.href=n,r.download=i,r.click(),setTimeout((()=>URL.revokeObjectURL(n)),1e3),console.info("click download",n)}};class h{constructor(){this.isClose=!1}handle(e,t){return this.pid=setTimeout((async()=>{if(!this.isClose){try{if("AsyncFunction"===e.constructor.name){let t=e();t.catch&&t.catch((e=>console.error(e)))}else e()}catch(e){console.error(e)}this.handle(e,t)}}),t),this}close(){this.isClose=!0,clearTimeout(this.pid)}}t.setIntervalx=function(e,t){let r=new h;return r.handle(e,t),r};const p={buildChunkId:c,buildMediaId:l,md5:f};t.default=p},421:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=new(n(r(552)).default)("ivideos");(async()=>{let e="key-start-time";setTimeout((async()=>async function(){let t=await i.get(e);t=parseInt(t),t?Date.now()-t>=864e5&&i.clear({}):i.set(e,Date.now())}()),1e3)})(),t.default=i},495:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(484)),o=n(r(248)),s="YYYY-MM-DD HH:mm:ss";const a=new class{info(...e){o.default.logLevel>=2&&console.info((0,i.default)().format(s),...e)}debug(...e){o.default.logLevel>=4&&console.debug((0,i.default)().format(s),...e)}log(...e){o.default.logLevel>=3&&console.log((0,i.default)().format(s),...e)}warn(...e){o.default.logLevel>=1&&console.warn((0,i.default)().format(s),...e)}error(...e){console.error((0,i.default)().format(s),...e)}};t.default=a},344:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.sendToPage=void 0;const a=o(r(905)),u=s(r(90)),c=s(r(248)),l=r(497),f=!/^https?:\/\//i.test(location.href);const h=new class{constructor(){var e;this.tasks=new Map;let t=this.tasks;null===(e=globalThis.window)||void 0===e||e.addEventListener("message",(e=>{let r=e.data;if("ivideos.response"==r.cmd){let e=r.sid,n=t.get(e);t.delete(e),n&&n(r.data)}}))}request(e,t,r,n="/"){var i;if(f&&u.default.tabs)null===(i=null===u.default||void 0===u.default?void 0:u.default.tabs)||void 0===i||i.getCurrent((n=>{n&&n.id&&u.default.tabs.sendMessage(n.id,{router:e,data:t,headers:{}},(e=>{r&&r(e)}))}));else{let i=this.tasks,o=a.buildSN(12);r&&i.set(o,(e=>{i.delete(o),r&&r(e)}));let s=location.href.replace(/[#].*$/,"");postMessage({sid:o,router:e,data:t,headers:{refer:s}},n),window!=window.parent&&(setTimeout((()=>window.parent.postMessage({sid:o,router:e,data:t,headers:{refer:s}},n)),100),window.parent!=window.top&&setTimeout((()=>{var r;return null===(r=window.top)||void 0===r?void 0:r.postMessage({sid:o,router:e,data:t,headers:{refer:s}},n)}),200))}}};function p(e,t,r,n){h.request(e,t,r,n)}t.sendToPage=p;const d={getInfo(e){console.info("getInfo",c.default.mode,a.inContext(),(0,l.deviceId)()),"plugin"==c.default.mode?p("ivideos.info",{},e,"*"):e({title:"ivideos",url:location.href,env:"worker",deviceId:(0,l.deviceId)()})},getDeviceInfo(e){p("ivideos.deviceInfo",{},(t=>{t&&t.deviceId?e&&e(t):setTimeout((()=>{d.getDeviceInfo(e)}),200)}),"/")}};t.default=d},674:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.buildSN=void 0;const a=s(r(891)),u=r(296),c=s(r(729)),l=o(r(905)),f=s(r(90)),h=(0,u.customAlphabet)("abcdefghijklmnopqrstwuvxyz0123456789ABCDEFGHIJKLMNOPQRSTWUVXYZ",32);t.buildSN=function(e=12){return h(e)},a.default.init("17bbce2e5b921333cec9ae737232b638",{debug:!1,ip:!0,ignore_dnt:!0});const p={NODE_ENV:"production",appVersion:"2.1.0"}||{};class d extends c.default{constructor(){var e;super(),this.appVersion=p.appVersion||"";let t=this;try{l.inContext()?null===(e=null===f.default||void 0===f.default?void 0:f.default.runtime)||void 0===e||e.sendMessage({router:"/deviceInfo",data:{}},(e=>{e&&e.deviceId&&(t.deviceId=e.deviceId,t.ip=e.ip,t.emit("ready",e))})):globalThis.addEventListener("load",(()=>{t.emit("ready",{deviceId:""})}))}catch(e){}this.once("ready",(e=>{this.isTop&&a.default.identify(e.deviceId)}))}set ip(e){var t;try{this._ip=e,null===(t=globalThis.localStorage)||void 0===t||t.setItem("ip",e)}catch(e){}}get ip(){return this._ip}get isTop(){return globalThis.window===globalThis.top}setAppVersion(e){this.appVersion=e}register(e){e&&this.isTop&&(this.deviceId=e,this.emit("ready",{deviceId:e}))}play(e){let t=new URL(e.url);e.host=t.host,this.track("play",e)}open(e){this.isTop&&(e=Object.assign({},e),this.track("open",Object.assign({url:location.href,host:location.hostname,title:document.title,source:"plugin"},e)))}install(e){this.deviceId?this.track("install",Object.assign(Object.assign({},e),{appVersion:this.appVersion})):this.once("ready",(()=>this.track("install",Object.assign(Object.assign({},e),{appVersion:this.appVersion}))))}installSW(){this.track("installSW",{appVersion:this.appVersion})}startup(){this.deviceId?this.track("startup",{appVersion:this.appVersion}):this.once("ready",(()=>this.track("startup",{appVersion:this.appVersion})))}track(e,t){a.default.track(e,Object.assign(Object.assign({},t),{appVersion:this.appVersion,t:Date.now(),language:navigator.language,clientXp:this.ip,$user_id:this.deviceId,distinct_id:this.deviceId}))}}const y=new d;t.default=y},631:function(e,t,r){"use strict";var n=r(764).Buffer,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const a=s(r(678));class u{constructor(e){if(this.totalSize=0,this.count=0,globalThis.localStorage){globalThis.localStorage.getItem("mid")!=e&&this.clear(),globalThis.localStorage.setItem("mid",e)}else this.clear();self.addEventListener("close",(async()=>this.clear()))}key(e){return/^[a-z0-9]{32}$/i.test(e),e}async getPlaylist(){let e=this.key("playlist");return await a.get(e)||[]}async setPlaylist(e){let t=this.key("playlist");a.set(t,e)}async get(e){e=this.key(e);let t=await a.get(e);if(/buffer/i.test(null==t?void 0:t.type)&&(t=n.from(t.data)),t&&t.byteLength>0){return(await a.get(e+"-size")||0)==t.byteLength?t:n.alloc(0)}return t||n.alloc(0)}async set(e,t){e=this.key(e),await this.has(e)||(this.totalSize+=t.byteLength,this.count++),null==a||a.set(e,t),await a.set(e+"-size",t.byteLength)}getObject(e){return a.get(e)}setObject(e,t){return a.set(e,t)}async delete(e){e=this.key(e);let t=await this.get(e);t&&(this.totalSize-=t.byteLength,this.count--),null==a||a.del(e)}async has(e){return e=this.key(e),(await a.keys()).includes(e)}async size(){return this.count}clear(){a.clear()}}const c=new class{constructor(){this.hass=new Map,this.playlist=[]}setMedia(e){this.idxStore=new u(e)}async getPlaylist(){var e;let t=this.playlist;return(!t||t.length<1)&&this.idxStore&&(t=await(null===(e=this.idxStore)||void 0===e?void 0:e.getPlaylist())||[]),t}async setPlaylist(e){var t;this.playlist=e,null===(t=this.idxStore)||void 0===t||t.setPlaylist(e)}async getChunk(e){var t;let r=n.alloc(0);try{if(r=await(null===(t=this.idxStore)||void 0===t?void 0:t.get(e)),r.byteLength%4!=0)return this.del(e),n.alloc(0)}catch(e){r=n.alloc(0)}return r}async setChunk(e,t){var r;n.isBuffer(t)||(t=n.from(t)),n.isBuffer(t)||console.info("no buffer",t),t.byteLength>0&&this.hass.set(e,!0),await(null===(r=this.idxStore)||void 0===r?void 0:r.set(e,t))}async del(e){var t;null===(t=this.idxStore)||void 0===t||t.delete(e),this.hass.delete(e)}async has(e){var t;if(this.hass.has(e))return!0;let r=await(null===(t=this.idxStore)||void 0===t?void 0:t.has(e))||!1;return r&&this.hass.set(e,!0),r}async clear(){var e;null===(e=this.idxStore)||void 0===e||e.clear()}async size(){var e;return await(null===(e=this.idxStore)||void 0===e?void 0:e.size())}getObject(e){return this.idxStore.getObject(e)}setObject(e,t){return this.idxStore.setObject(e,t)}};t.default=c},678:(e,t,r)=>{"use strict";function n(e){return new Promise(((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)}))}function i(e,t){const r=indexedDB.open(e);r.onupgradeneeded=()=>r.result.createObjectStore(t);const i=n(r);return(e,r)=>i.then((n=>r(n.transaction(t,e).objectStore(t))))}let o;function s(){return o||(o=i("keyval-store","keyval")),o}function a(e,t=s()){return t("readonly",(t=>n(t.get(e))))}function u(e,t,r=s()){return r("readwrite",(r=>(r.put(t,e),n(r.transaction))))}function c(e,t=s()){return t("readwrite",(t=>(e.forEach((e=>t.put(e[1],e[0]))),n(t.transaction))))}function l(e,t=s()){return t("readonly",(t=>Promise.all(e.map((e=>n(t.get(e)))))))}function f(e,t,r=s()){return r("readwrite",(r=>new Promise(((i,o)=>{r.get(e).onsuccess=function(){try{r.put(t(this.result),e),i(n(r.transaction))}catch(e){o(e)}}}))))}function h(e,t=s()){return t("readwrite",(t=>(t.delete(e),n(t.transaction))))}function p(e,t=s()){return t("readwrite",(t=>(e.forEach((e=>t.delete(e))),n(t.transaction))))}function d(e=s()){return e("readwrite",(e=>(e.clear(),n(e.transaction))))}function y(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},n(e.transaction)}function g(e=s()){return e("readonly",(e=>{if(e.getAllKeys)return n(e.getAllKeys());const t=[];return y(e,(e=>t.push(e.key))).then((()=>t))}))}function _(e=s()){return e("readonly",(e=>{if(e.getAll)return n(e.getAll());const t=[];return y(e,(e=>t.push(e.value))).then((()=>t))}))}function m(e=s()){return e("readonly",(t=>{if(t.getAll&&t.getAllKeys)return Promise.all([n(t.getAllKeys()),n(t.getAll())]).then((([e,t])=>e.map(((e,r)=>[e,t[r]]))));const r=[];return e("readonly",(e=>y(e,(e=>r.push([e.key,e.value]))).then((()=>r))))}))}r.r(t),r.d(t,{clear:()=>d,createStore:()=>i,del:()=>h,delMany:()=>p,entries:()=>m,get:()=>a,getMany:()=>l,keys:()=>g,promisifyRequest:()=>n,set:()=>u,setMany:()=>c,update:()=>f,values:()=>_})},296:(e,t,r)=>{"use strict";r.r(t),r.d(t,{customAlphabet:()=>s,customRandom:()=>o,nanoid:()=>a,random:()=>i,urlAlphabet:()=>n});let n="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",i=e=>crypto.getRandomValues(new Uint8Array(e)),o=(e,t,r)=>{let n=(2<<Math.log(e.length-1)/Math.LN2)-1,i=-~(1.6*n*t/e.length);return(o=t)=>{let s="";for(;;){let t=r(i),a=i;for(;a--;)if(s+=e[t[a]&n]||"",s.length===o)return s}}},s=(e,t=21)=>o(e,t,i),a=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),"")},40:e=>{"use strict";e.exports=JSON.parse('{"name":"ivideos","version":"2.1.0","main":"dist/ivideos.js","browser":"dist/ivideos.js","license":"MIT","bin":{},"types":"dist/index.d.ts","scripts":{},"engines":{"node":">=10.0.0"},"keywords":[],"repository":"","dependencies":{},"devDependencies":{},"description":"ivideos - , ivideos - Video Accelerator","files":["dist","package.json","README.md"]}')}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n=r(365);ivideos=n})();