var ivideos;(()=>{var e={497:e=>{(()=>{var t={742:(e,t)=>{"use strict";t.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,o=u(e),s=o[0],a=o[1],c=new i(function(e,t,r){return 3*(t+r)/4-r}(0,s,a)),l=0,h=a>0?s-4:s;for(r=0;r<h;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;return 2===a&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[l++]=255&t),1===a&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=16383,a=0,u=n-i;a<u;a+=s)o.push(c(e,a,a+s>u?u:a+s));return 1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)r[s]=o[s],n[o.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,n){for(var i,o,s=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},764:(e,t,r)=>{"use strict";const n=r(742),i=r(645),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=function(e){return+e!=e&&(e=0),u.alloc(+e)},t.INSPECT_MAX_BYTES=50;const s=2147483647;function a(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return h(e)}return c(e,t,r)}function c(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|g(e,t);let n=a(r);const i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Y(e,Uint8Array)){const t=new Uint8Array(e);return d(t.buffer,t.byteOffset,t.byteLength)}return f(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Y(e,ArrayBuffer)||e&&Y(e.buffer,ArrayBuffer))return d(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(Y(e,SharedArrayBuffer)||e&&Y(e.buffer,SharedArrayBuffer)))return d(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return u.from(n,t,r);const i=function(e){if(u.isBuffer(e)){const t=0|p(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||J(e.length)?a(0):f(e):"Buffer"===e.type&&Array.isArray(e.data)?f(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return l(e),a(e<0?0:0|p(e))}function f(e){const t=e.length<0?0:0|p(e.length),r=a(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function d(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,u.prototype),n}function p(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function g(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Y(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Q(e).length;default:if(i)return n?-1:V(e).length;t=(""+t).toLowerCase(),i=!0}}function _(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,r);case"utf8":case"utf-8":return O(this,t,r);case"ascii":return C(this,t,r);case"latin1":case"binary":return B(this,t,r);case"base64":return T(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function m(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),J(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,n,i){let o,s=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){let n=-1;for(o=r;o<a;o++)if(c(e,o)===c(t,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===u)return n*s}else-1!==n&&(o-=o-n),n=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){let r=!0;for(let n=0;n<u;n++)if(c(e,o+n)!==c(t,n)){r=!1;break}if(r)return o}return-1}function b(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;const o=t.length;let s;for(n>o/2&&(n=o/2),s=0;s<n;++s){const n=parseInt(t.substr(2*s,2),16);if(J(n))return s;e[r+s]=n}return s}function w(e,t,r,n){return X(V(t,e.length-r),e,r,n)}function k(e,t,r,n){return X(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function S(e,t,r,n){return X(Q(t),e,r,n)}function E(e,t,r,n){return X(function(e,t){let r,n,i;const o=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function T(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function O(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;for(;i<r;){const t=e[i];let o=null,s=t>239?4:t>223?3:t>191?2:1;if(i+s<=r){let r,n,a,u;switch(s){case 1:t<128&&(o=t);break;case 2:r=e[i+1],128==(192&r)&&(u=(31&t)<<6|63&r,u>127&&(o=u));break;case 3:r=e[i+1],n=e[i+2],128==(192&r)&&128==(192&n)&&(u=(15&t)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(u=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return function(e){const t=e.length;if(t<=x)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=x));return r}(n)}t.kMaxLength=s,u.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return function(e,t,r){return l(e),e<=0?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)}(e,t,r)},u.allocUnsafe=function(e){return h(e)},u.allocUnsafeSlow=function(e){return h(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(Y(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),Y(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=u.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(Y(t,Uint8Array))i+t.length>n.length?(u.isBuffer(t)||(t=u.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!u.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},u.byteLength=g,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)y(this,t,t+1);return this},u.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},u.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},u.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?O(this,0,e):_.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(e,t,r,n,i){if(Y(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0);const a=Math.min(o,s),c=this.slice(n,i),l=e.slice(t,r);for(let e=0;e<a;++e)if(c[e]!==l[e]){o=c[e],s=l[e];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return w(this,e,t,r);case"ascii":case"latin1":case"binary":return k(this,e,t,r);case"base64":return S(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const x=4096;function C(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function B(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function M(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=G[e[n]];return i}function I(e,t,r){const n=e.slice(t,r);let i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}function P(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function A(e,t,r,n,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function R(e,t,r,n,i){F(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,r}function L(e,t,r,n,i){F(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s>>=8,e[r+2]=s,s>>=8,e[r+1]=s,s>>=8,e[r]=s,r+8}function j(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function D(e,t,r,n,o){return t=+t,r>>>=0,o||j(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function U(e,t,r,n,o){return t=+t,r>>>=0,o||j(e,0,r,8),i.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readBigUInt64LE=K((function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),u.prototype.readBigUInt64BE=K((function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=t,i=1,o=this[e+--n];for(;n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||P(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||P(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readBigInt64LE=K((function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),u.prototype.readBigInt64BE=K((function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),u.prototype.readFloatLE=function(e,t){return e>>>=0,t||P(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||P(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||P(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||P(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||A(this,e,t,r,Math.pow(2,8*r)-1,0);let i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||A(this,e,t,r,Math.pow(2,8*r)-1,0);let i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigUInt64LE=K((function(e,t=0){return R(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=K((function(e,t=0){return L(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);A(this,e,t,r,n-1,-n)}let i=0,o=1,s=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);A(this,e,t,r,n-1,-n)}let i=r-1,o=1,s=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigInt64LE=K((function(e,t=0){return R(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=K((function(e,t=0){return L(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(e,t,r){return D(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return D(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return U(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return U(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{const o=u.isBuffer(e)?e:u.from(e,n),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%s]}return this};const $={};function q(e,t,r){$[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function N(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function F(e,t,r,n,i,o){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new $.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){z(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||W(t,e.length-(r+1))}(n,i,o)}function z(e,t){if("number"!=typeof e)throw new $.ERR_INVALID_ARG_TYPE(t,"number",e)}function W(e,t,r){if(Math.floor(e)!==e)throw z(e,r),new $.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new $.ERR_BUFFER_OUT_OF_BOUNDS;throw new $.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}q("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),q("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),q("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=N(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=N(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const H=/[^+/0-9A-Za-z-_]/g;function V(e,t){let r;t=t||1/0;const n=e.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function Q(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function X(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function Y(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function J(e){return e!=e}const G=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function K(e){return"undefined"==typeof BigInt?Z:e}function Z(){throw new Error("BigInt not supported")}},729:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(e,t,n,o,s){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new i(n,o||e,s),u=r?r+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],a]:e._events[u].push(a):(e._events[u]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,i,o,s){var a=r?r+e:e;if(!this._events[a])return!1;var u,c,l=this._events[a],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,o),!0;case 6:return l.fn.call(l.context,t,n,i,o,s),!0}for(c=1,u=new Array(h-1);c<h;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var f,d=l.length;for(c=0;c<d;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),h){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;case 4:l[c].fn.call(l[c].context,t,n,i);break;default:if(!u)for(f=1,u=new Array(h-1);f<h;f++)u[f-1]=arguments[f];l[c].fn.apply(l[c].context,u)}}return!0},a.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return o(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,i){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||i&&!a.once||n&&a.context!==n||s(this,o);else{for(var u=0,c=[],l=a.length;u<l;u++)(a[u].fn!==t||i&&!a[u].once||n&&a[u].context!==n)&&c.push(a[u]);c.length?this._events[o]=1===c.length?c[0]:c:s(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a},645:(e,t)=>{t.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,l=-7,h=r?i-1:0,f=r?-1:1,d=e[t+h];for(h+=f,o=d&(1<<-l)-1,d>>=-l,l+=a;l>0;o=256*o+e[t+h],h+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+e[t+h],h+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=c}return(d?-1:1)*s*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(t*u-1)*Math.pow(2,i),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;e[r+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[r+d]=255&s,d+=p,s/=256,c-=8);e[r+d-p]|=128*g}},991:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(607));i(r(607),t),t.default=s.default},789:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(793),t),i(r(832),t);const o=r(764);i(r(398),t),globalThis==globalThis.window&&(globalThis.Buffer=o.Buffer)},793:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RTCOfferOptions=t.RTCIceCandidate=t.RTCSessionDescription=t.RTCDataChannel=t.RTCPeerConnection=void 0;const i=n(r(11));t.RTCPeerConnection=i.default.RTCPeerConnection,t.RTCDataChannel=i.default.RTCDataChannel,t.RTCSessionDescription=i.default.RTCSessionDescription,t.RTCIceCandidate=i.default.RTCIceCandidate,t.RTCOfferOptions=i.default.RTCOfferOptions},832:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocket=t.inNode=t.inBrowser=void 0;const i=n(r(241)),o=n(r(729));function s(){return globalThis===globalThis.window}t.inBrowser=s,t.inNode=function(){return!s};class a extends o.default{constructor(e){super(),this.websocket=new i.default(e),this.websocket.addEventListener("message",(e=>this.emit("data",e.data))),this.websocket.addEventListener("close",(()=>this.emit("close"))),this.websocket.addEventListener("error",(e=>this.emit("error",new Error(e.data)))),this.websocket.addEventListener("open",(()=>this.emit("open")))}send(e){this.websocket.send(e)}close(){try{if(!this.websocket)return;this.websocket.removeAllListeners("data"),this.websocket.removeAllListeners("open"),this.websocket.removeAllListeners("error"),this.websocket.removeAllListeners("close"),this.websocket.close()}catch(e){}}get readyState(){return this.websocket.readyState}get binaryType(){return this.websocket.binaryType}get bufferedAmount(){return this.websocket.bufferedAmount}get extensions(){return this.websocket.extensions}get protocol(){return this.websocket.protocol}get url(){return this.websocket.url}get OPEN(){return this.websocket.OPEN}}t.WebSocket=a,t.default=a},913:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={peerVersion:"1.4.6",mtu:16300,inBrowser:globalThis===globalThis.window||!!globalThis.chrome||!!globalThis.browser}},872:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Accept=t.CMD=void 0;const i=n(r(729));!function(e){e[e.HEARTBEAT=0]="HEARTBEAT",e[e.CLOSE=1]="CLOSE",e[e.RESET=2]="RESET",e[e.RESPONSE=11]="RESPONSE"}(t.CMD||(t.CMD={}));class o extends i.default{constructor(e){super(),this.options=Object.assign({},e)}get acceptAuth(){return this.options.auth}async connect(e,t,r,n,i){}splitPasswodArgs(e){let t=e.split("_");return{password:t[0]||"",args:t.slice(1)||[]}}}t.Accept=o,t.default=o},651:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseHeader=t.Connect=void 0;const i=n(r(913));class o{constructor(){}static get(e){if("string"==typeof e&&["ws","xhr"].includes(e))return o.connects.get(e);if(e.length<1)return;let t=o.getProtocol(e.toString());return t?o.connects.get(t):void 0}static has(e){return o.connects.has(e)}static register(e){o.connects.set(e.protocol,e)}static removeAll(){o.connects.clear()}static getProtocol(e){if(i.default.inBrowser){let t=s(e);if(function(e,t){return/^(GET)/i.test(e)&&"websocket"==t.upgrade&&"Upgrade"==t.connection}(e,t))return"ws";if(function(e,t){return/^(GET|POST|HEAD|OPTIONS|PUT|DELETE|TRACE)/i.test(e)&&"websocket"!=t.upgrade&&"Upgrade"!=t.connection}(e,t))return"xhr";throw new Error("no support")}return"direct"}}function s(e){let t=e.split("\r\n"),r={};return t.forEach((e=>{let t=e.split(": ");if(t.length<2)return;let n=t[0]||"",i=t[1]||"";r[n.trim().toLowerCase()]=i.trim()})),r}t.Connect=o,o.connects=new Map,t.parseHeader=s,t.default=o},650:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AcceptFactor=t.Accept=void 0;const i=n(r(729)),o=r(689),s=r(872);Object.defineProperty(t,"Accept",{enumerable:!0,get:function(){return s.Accept}});const a=n(r(651)),u=r(52),c=r(832),l=r(488),h=r(497);class f extends i.default{constructor(e){super(),this.ipeer=e,this.accepts=new Map;let t=new o.WrtcAccept({timeout:e.options.acceptTimeout||3e5,auth:async({username:t,password:r})=>!e.username||e.username==t&&e.password==r});this.register(t),(0,c.inBrowser)()?(a.default.has("ws")||a.default.register(new l.WSConnect),a.default.has("xhr")||a.default.register(new h.XHRConnect)):a.default.register(new u.DirectConnect)}register(e){if(this.accepts.has(e.protocol)){let t=this.accepts.get(e.protocol);null==t||t.removeAllListeners("read"),null==t||t.removeAllListeners("write")}else e.options=Object.assign({},e.options);return this.accepts.set(e.protocol,e),this}remove(e){this.accepts.delete(e)}registerConnect(e){a.default.register(e)}async accept(e){let t=await e.read(1e4),r=this.accepts.values();if(t.byteLength<1)return void e.destroy();let n=!1;for(let i of r)if(n=await i.isAccept(e,t),n)return this.emit("accept",{handle:!0,peer:e.peer,socket:e}),void i.handle(e,t);n||this.emit("accept",{handle:!1,peer:e.peer,socket:e})}}t.AcceptFactor=f,f.WrtcAccept=o.WrtcAccept,t.default=f},52:function(e,t,r){"use strict";var n=r(764).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DirectSocket=t.DirectConnect=void 0;const o=i(r(651)),s=i(r(390)),a=r(789);class u extends o.default{constructor(){super(),this.protocol="direct"}connect(e,t){let r=new c;r.connect(e,(()=>{t&&t(r)}))}}t.DirectConnect=u;class c extends s.default{constructor(){super(),this.socket=new a.Socket,this.protocol="direct"}connect(e,t){let r=!1,n=setTimeout((()=>!r&&this.socket.emit("timeout")),5e3);return this.socket.connect(e.port,e.host,(()=>{clearTimeout(n),r=!0,t&&t(this),this.emit("open")})),this.socket.on("data",(e=>{1!=e.byteLength&&(this.emit("read",{size:e.byteLength}),this.emit("data",e))})),this.socket.once("close",(()=>this.emit("close"))),this.socket.once("error",(e=>this.emit("error",e))),this.socket.once("timeout",(()=>this.emit("error",new Error("timeout")))),this}async write(e){return this.socket.write(e),this.emit("write",{size:e.byteLength}),this}async end(e){return e&&this.socket.end(e),this.socket.destroy(),this}async read(e=0){return new Promise((t=>{let r,i=!1;function o(e){r&&clearTimeout(r),i||(i=!0,t(e))}e>0&&(r=setTimeout((()=>{this.removeListener("data",o),i||(i=!0,t(n.alloc(0)))}),e)),this.once("data",o)}))}destroy(e){return this.socket.destroy(e),this.removeAllListeners(),this}}t.DirectSocket=c},689:function(e,t,r){"use strict";var n=r(764).Buffer,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.buildConnectChunk=t.buildHttpProxyAuth=t.parseHttpUser=t.WrtcAccept=void 0;const a=s(r(872)),u=s(r(651));class c extends a.default{constructor(e){super(e),this.acceptList=[],this.protocol="wrtc"}on(e,t){return"reset"==e?(this.onReset=t,this):(super.on(e,t),this)}once(e,t){return"reset"==e?(this.onReset=t,this):(super.once(e,t),this)}addAcceptSocket(e){this.acceptList.findIndex((t=>t==e))<0&&this.acceptList.push(e),e.once("close",(()=>{let t=this.acceptList.findIndex((t=>t==e));this.acceptList.splice(t,1)}))}async isAccept(e,t){return this.isSupport(t.toString())}async handle(e,t){var r;e.setTimeout(this.options.timeout||3e5),this.addAcceptSocket(e.socket);let i=t.toString(),o=(0,u.parseHeader)(i),s=null===(r=o.host)||void 0===r?void 0:r.split(":"),c=s[0],h=parseInt(s[1])||80;if(!c)return void e.write(n.from("WRTC-WEB/1.0 500 badheader"),!0);let f=l(o["proxy-authorization"]);if(!await this.acceptAuth({username:f.username,password:f.password,protocol:this.protocol}))return void e.write("WRTC/1.0 407 authfail",!0);await e.write(n.from("WRTC-WEB/1.0 200 Connection Established\r\n\r\n"));let d=Date.now(),p=await e.read(5e3);this.emit("accept",{chunk:p,ttl:Date.now()-d,id:e.peer});let g=u.default.get(p);if(!g)return e.destroy(new Error("nosupport protocol"));const _=t=>{e.once("close",(()=>t.end())),e.once("error",(()=>e.destroy())),t.once("close",(()=>{e.write(n.from([a.CMD.CLOSE]))})),t.once("error",(e=>t.destroy(e))),e.on("data",(async r=>{if(1!=r.byteLength)try{t.write(r)}catch(t){e.emit("error",t)}else switch(r[0]){case a.CMD.CLOSE:return t.removeAllListeners(),void t.destroy();case a.CMD.RESET:return t.removeAllListeners(),t.destroy(),e.removeAllListeners(),await e.write(n.from([a.CMD.RESPONSE])),void(this.onReset&&this.onReset(e.clone()))}})),t.on("data",(t=>{e.write(t).catch((e=>{}))}))};if(/^(ws|xhr)$/i.test(g.protocol)){let e=(0,u.parseHeader)(p.toString()),t=p.toString().split("\r\n")[0].split(" "),r=t[0],i=t[1];t[2],g.connect({url:i,host:c,port:h,init:{method:r,headers:e}},(e=>{if(_(e),/^(POST|PUT)$/i.test(r)){let t=p.toString().split("\r\n\r\n")[1];t&&t.length>0&&e.write(n.from(t))}}))}else g.connect({host:c,port:h},(e=>{_(e),e.write(p)}));this.on("reset",(async e=>{let t=await e.read(3e3);t.byteLength<=1?e.destroy():(this.removeListener("reset"),this.handle(e,t))}))}isSupport(e){return/^WRTC\//i.test(e)}}function l(e){try{let t=(e=e||"").trim().split(" ")[1]||"",r=n.from(t,"base64").toString().split(":"),i=r[0]||"",o=function(e){let t=e.split("_");return{password:t[0]||"",args:t.slice(1)||[]}}(r[1]||"");return{username:i||"",password:o.password||"",args:o.args||[]}}catch(e){return{username:"",password:"",args:[]}}}function h(e){let t=e.password||"";return e.username+":"+t}t.WrtcAccept=c,t.parseHttpUser=l,t.buildHttpProxyAuth=h,t.buildConnectChunk=function(e){let t=!!e.username,r=n.from(h({username:e.username||"",password:e.password||""})).toString("base64");return n.concat([n.from(`CONNECT ${e.host}:${e.port} HTTP/1.1\r\n`),n.from(`Host: ${e.host}:${e.port}\r\n`),n.from("Proxy-Connection: keep-alive\r\n"),n.from(t?`Proxy-Authorization: Basic ${r}\r\n`:""),n.from("\r\n")])}},488:function(e,t,r){"use strict";var n=r(764).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WSSocket=t.WSConnect=void 0;const o=i(r(651)),s=i(r(390)),a=r(789);class u extends o.default{constructor(){super(),this.protocol="ws"}connect(e,t){let r=new c;r.connect(e,(()=>{t&&t(r)}))}}t.WSConnect=u;class c extends s.default{constructor(){super(),this.protocol="ws"}connect(e,t){let r=e.url||"",n=!1;this.socket=new a.WebSocket(r);let i=setTimeout((()=>!n&&this.socket.emit("error",new Error("timeout"))),5e3);return this.socket.once("open",(()=>{clearTimeout(i),n=!0,t&&t(this),this.emit("open")})),this.socket.on("data",(e=>{1!=e.byteLength&&(this.emit("read",{size:e.byteLength}),this.emit("data",e))})),this.socket.once("close",(()=>this.emit("close"))),this.socket.once("error",(e=>this.emit("error",e))),this}async write(e){return this.socket.send(e),this.emit("write",{size:e.byteLength}),this}async end(e){return e&&this.socket.send(e),this.socket.close(),this}async read(e=0){return new Promise((t=>{let r,i=!1;function o(e){r&&clearTimeout(r),i||(i=!0,t(e))}e>0&&(r=setTimeout((()=>{this.removeListener("data",o),i||(i=!0,t(n.alloc(0)))}),e)),this.once("data",o)}))}destroy(e){return e&&this.end(n.from(e.message||"")),this.socket.close(),this.removeAllListeners(),this}}t.WSSocket=c},497:function(e,t,r){"use strict";var n=r(764).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.XHRSocket=t.XHRConnect=void 0;const o=i(r(651)),s=r(789),a=i(r(390)),u=r(228);class c extends o.default{constructor(){super(),this.protocol="xhr"}connect(e,t){let r=new l;r.connect(e,(()=>{t&&t(r)}))}}t.XHRConnect=c;class l extends a.default{constructor(){super(),this.protocol="xhr"}connect(e,t){let r=e.url||"";const{readable:i,writable:o}=new s.TransformStream,a=o.getWriter(),c=i.getReader();let l,h=Object.assign({},e.init);this.writeable=a,this.readable=c,/^(POST|PUT)$/i.test(h.method)&&(l=c);let f=Object.assign({timeout:15e3,method:"GET"},e.init,{body:l}),d=setTimeout((()=>this.writeable.abort(new Error("timeout"))),5e3);return t&&t(this),function(e,t){let r=new AbortController,n=r.signal,i=e instanceof Request?e.url:e;if(t=t||{},e instanceof Request)for(let r in e)t[r]=e[r];delete t.url;let o=t.timeout||15e3;t.signal=n;let a=!0,u=setTimeout((()=>{a&&r.abort()}),o||15e3);return(0,s.fetch)(i,t).then((e=>(a=!1,u&&clearTimeout(u),e)))}(r,f).then((async e=>{var t;if(clearTimeout(d),!/^2/i.test(e.status+""))return this.destroy(new Error(`HTTP/1.1 ${e.status} ${e.statusText}`));this.readable=null===(t=e.body)||void 0===t?void 0:t.getReader();let r=[`HTTP/1.1 ${e.status} ${e.statusText}`];for(e.headers.forEach(((e,t)=>r.push(t+": "+e))),r.push("\r\n");;)try{let{done:e,value:t}=await this.readable.read();if(t){let e=r.length>0?n.concat([n.from(r.join("\r\n")),t]):t;r=[],this.emit("read",{size:e.byteLength});let i=e.byteLength||e.length;const o=u.util.chunkedMTU-256;for(let t=0;t<i;t+=o){let r=e.slice(t,t+o);this.emit("data",r)}}if(e)return void setTimeout((()=>this.destroy()),1)}catch(e){this.destroy(e)}})).catch((e=>{clearTimeout(d),this.emit("error",e)})),/^(POST|PUT)$/i.test(f.method)||this.writeable.close(),this}async write(e){return this.writeable.write(e).catch(),this.emit("write",{size:e.byteLength}),this}async end(e){try{e&&await this.writeable.write(e).catch(),this.writeable.close().catch()}catch(e){}return this}async read(e=0){return new Promise((async t=>{let r,i=!1;e>0&&(r=setTimeout((()=>{i||(i=!0,t(n.alloc(0)))}),e));let o=await this.readable.read();o.done||(this.destroy(),t(n.alloc(0)));let s=o.value;i=!0,t(s||n.alloc(0))}))}destroy(e){try{this.writeable.close().catch((e=>{})),this.readable.cancel().catch((e=>{})),this.emit("close"),this.removeAllListeners()}catch(e){}}}t.XHRSocket=l},390:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.XSocket=t.CMD=void 0;const i=n(r(729));!function(e){e[e.HEARTBEAT=0]="HEARTBEAT",e[e.CLOSE=1]="CLOSE",e[e.RESET=2]="RESET",e[e.RESPONSE=11]="RESPONSE"}(t.CMD||(t.CMD={}));class o extends i.default{constructor(){super()}}t.XSocket=o,t.default=o},45:function(e,t,r){"use strict";var n=r(764).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.API=void 0;const o=i(r(961)),s=i(r(913)),a=i(r(993)),u=i(r(294)),c=a.default.createCipher("C5TwyHpWu3DV/++xLsfSR2yQWEMhg6pXmNoRnvnL1y2bGd83v9gwpHG3M+yXAYxdsIhkIywmfWnqKh5ulQBV9kvJ9WEE85/00RhZe0hrQLrBBlAMOLOygLlFTSd2lv15BT+ixdzZDynowzIbahOmh73MSZqtZgjbT7aNJDuEgrW+KzT38aBz4VR/q1K8F1/4jy8QkrhiB+k14mPTrvyZFqVTckSLHI7+bdBBOc/73jo2wJPdocZbyiVlZ6xOzYUK1ORCd8IVYM7u53jm8h2BfK+0xChMqZFcaG9KihI9H9bj+kanhu2oPHSJnRognHVRDgMJXj6jMeDrWgIN5SIUfg==");t.API=class{constructor(e){this._options=e}_buildRequest(e){const t=this._options.secure?"https":"http",{host:r,port:n,path:i,key:o}=this._options,a=new URL(`${t}://${r}:${n}${i}${o}/${e}`);return a.searchParams.set("ts",`${Date.now()}${Math.random()}`),a.searchParams.set("version",s.default.peerVersion),(0,u.default)(a.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(200!==e.status)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){throw o.default.error("Error retrieving ID",e),new Error("Could not get an ID from the server.")}}async getIceServers(){let e={list:[{urls:["stun:stun1.l.google.com:19302","stun:stun.l.google.com:19302"]},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp",ip:""}]};try{const t=this._options.secure?"https":"http",{host:r,port:i,path:o,key:s}=this._options,a=await(0,u.default)({url:`${t}://${r}:${i}/api/ices`,timeout:5e3}).then((e=>e.json())).catch((e=>({status:500})));if(200==a.status){let{data:t}=a,r=(null==t?void 0:t.list)||[];r.forEach((e=>{e.credential&&(e.credential=c.decode(n.from(e.credential,"base64"),37).toString())})),e.list=r.length>0?r:e.list,e.ip=t.ip}}catch(e){console.info("err",e)}return e.list=e.list.sort(((e,t)=>e.username&&Math.floor(2*Math.random())?1:-1)),e.list}}},482:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseConnection=void 0;const i=n(r(729));class o extends i.default{constructor(e,t,r){super(),this.peer=e,this.provider=t,this.options=r,this._open=!1,this.metadata=r.metadata}get open(){return this._open}}t.BaseConnection=o},198:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerMessageType=t.SocketEventType=t.SerializationType=t.PeerErrorType=t.ConnectionType=void 0,function(e){e.Data="data",e.Media="media"}(t.ConnectionType||(t.ConnectionType={})),function(e){e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc"}(t.PeerErrorType||(t.PeerErrorType={})),function(e){e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json",e.String="string"}(t.SerializationType||(t.SerializationType={})),function(e){e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close"}(t.SocketEventType||(t.SocketEventType={})),function(e){e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE",e.Pull="pull"}(t.ServerMessageType||(t.ServerMessageType={}))},586:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(729));class o extends i.default{constructor(e){super(),this.options=Object.assign(e,{pingInterval:5e3,wsRunTime:3e5},e)}}t.default=o},393:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(409)),o=r(3),s=n(r(586)),a=r(198);class u extends s.default{constructor(e){var t,r,n,s,u,c;super(e),this.host=e.host,this.wsScoket=new o.WSSocket(e),this.xhrSocket=new i.default(this.wsScoket,e),e.wsRunTime>0&&this.wsScoket.setWsRunTime(e.wsRunTime);let l=!1;const h=e=>{if(e.type==a.ServerMessageType.Open){if(l)return;l=!0,this.emit("message",e)}else this.emit("message",e)};null===(t=this.wsScoket)||void 0===t||t.on("message",h),null===(r=this.xhrSocket)||void 0===r||r.on("message",h),null===(n=this.wsScoket)||void 0===n||n.on("disconnected",(()=>this.emit("disconnected"))),null===(s=this.xhrSocket)||void 0===s||s.on("disconnected",(()=>this.emit("disconnected"))),null===(u=this.wsScoket)||void 0===u||u.on("close",(()=>this.emit("close"))),null===(c=this.xhrSocket)||void 0===c||c.on("close",(()=>this.emit("close")))}async start(e,t,r="all"){this.mode=r,this.wsScoket.on("close",(()=>{this.xhrSocket.start(e,t)})),"ws"==r?(this.wsScoket.setForever(),this.wsScoket&&this.wsScoket.start(e,t)):"xhr"==r?this.xhrSocket&&this.xhrSocket.start(e,t):"forever"==r?(this.wsScoket.setForever(),this.wsScoket&&this.wsScoket.start(e,t),setTimeout((()=>{this.xhrSocket&&this.xhrSocket.start(e,t)}),6e4)):(this.wsScoket.start(e,t),setTimeout((()=>{this.xhrSocket&&this.xhrSocket.start(e,t)}),6e4))}get id(){return this.xhrSocket.id}get open(){var e;return(null===(e=this.xhrSocket)||void 0===e?void 0:e.open)||this.wsScoket.open}async reconnect(){var e,t;null===(e=this.xhrSocket)||void 0===e||e.reconnect(),null===(t=this.wsScoket)||void 0===t||t.reconnect()}send(e){!this.wsScoket||!this.wsScoket.open&&this.xhrSocket.open?this.xhrSocket&&this.xhrSocket.open&&this.xhrSocket.send(e):this.wsScoket.send(e)}close(){this.destroy()}destroy(){var e,t;null===(e=this.wsScoket)||void 0===e||e.close(),null===(t=this.xhrSocket)||void 0===t||t.close()}}t.default=u},3:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WSSocket=void 0;const i=n(r(961)),o=r(198),s=n(r(913)),a=r(789),u=n(r(586));class c extends u.default{constructor(e){super(e),this._open=!1,this._opening=!1,this._messagesQueue=[],this.previousTime=0,this._isForever=!1,this._wsRunTime=3e5;const t=e.secure?"wss://":"ws://";this._baseUrl=t+e.host+":"+e.port+e.path+"peerjs?key="+e.key+`&username=${e.username||""}&password=${e.password||""}`}get id(){return this._id}setWsRunTime(e=12e4){this._wsRunTime=e}config(e,t){this._id=e,this._token=t}setForever(){this._isForever=!0}async start(e,t){var r;this._id=e,this._token=t;const n=`${this._baseUrl}&id=${e}&token=${t}&resource=${(null===(r=globalThis.location)||void 0===r?void 0:r.hostname)||""}`;this.open||this._opening||(this._opening=!0,this._socket=new a.WebSocket(n+"&version="+s.default.peerVersion),this._socket.on("data",(e=>{try{this.previousTime=Date.now(),e=JSON.parse(e),i.default.log("Server message received:",e)}catch(t){return void i.default.log("Invalid server message",e)}this.emit("message",e)})),this._socket.once("error",(()=>{this.close()})),this._socket.once("close",(()=>{i.default.log("Socket closed."),this._cleanup(),this._open=!1,this._opening=!1})),this._socket.on("open",(()=>{this.open||(this._opening=!1,this._open=!0,this.previousTime=Date.now(),this._sendQueuedMessages(),i.default.log("Socket open"),this._scheduleHeartbeat(),this._wsCloseTimer=setInterval((()=>{this._isForever||this.open&&this.previousTime+this._wsRunTime<Date.now()&&this.close()}),1e4))})))}async reconnect(){this.open||this._opening||!this._id||this.start(this._id,this._token)}get open(){return!!this._socket&&1===this._socket.readyState&&this._open}get use(){return!!this.id}get pingInterval(){return this.options.pingInterval}_scheduleHeartbeat(){this._wsPingTimer=setTimeout((()=>{this._sendHeartbeat()}),this.pingInterval)}_sendHeartbeat(){if(!this.open)return void i.default.log("Cannot send heartbeat, because socket closed");const e=JSON.stringify({type:o.ServerMessageType.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const t of e)this.send(t)}send(e){if(!this.id||!this.open)return void this._messagesQueue.push(e);if(!e.type)return void this.emit("error",new Error("Invalid message"));const t=JSON.stringify(e);this._socket.send(t)}close(){this._cleanup()}_cleanup(){this.open&&(this._open=!1,this._socket&&(this._socket.close(),this._socket.removeAllListeners("data"),this._socket.removeAllListeners("close"),this._socket.removeAllListeners("error"),this._socket.removeAllListeners("open"),this._socket=void 0),clearTimeout(this._wsPingTimer),clearInterval(this._wsCloseTimer))}}t.WSSocket=c},409:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(961)),o=r(198),s=n(r(586)),a=n(r(294));class u extends s.default{constructor(e,t){super(t),this._messagesQueue=[],this._open=!1,this.key=t.key;const r=t.secure?"https://":"http://";this._baseUrl=r+t.host+":"+t.port,this.wsSocket=e,globalThis.window?globalThis.addEventListener("beforeunload",(()=>this.close())):globalThis.process&&globalThis.process.addListener("beforeExit",(()=>this.close())),this.once("close",(()=>{this._sendLevel()}))}newUrl(e){return this._baseUrl+"/"+e.replace(/^[\/]+/,"")}get id(){return this._id||""}async start(e,t){var r;if(this._id=e,this.token=t,!this.open)return this._open=!0,200!=(await(0,a.default)(this.newUrl(`/p/${e}/${t}`),{method:"post",data:{type:"open",key:this.key,timeout:5e3,username:this.options.username||"",password:this.options.password||"",resource:(null===(r=globalThis.location)||void 0===r?void 0:r.hostname)||""}}).then((e=>200!=e.status?{status:e.status,msg:e.statusText,data:{}}:e.json())).catch((e=>(console.info("open error",e),{status:500,msg:e.message,data:{}})))).status?(this._open=!1,void this.wsSocket.reconnect()):(this.emit("message",{type:o.ServerMessageType.Open,payload:"",src:""}),this._sendQueuedMessages(),void this._schedulePull())}async reconnect(){this.start(this.id,this.token)}_schedulePull(e=8e3){this._wsPingTimer=setTimeout((()=>{this._sendPull()}),e)}async _sendLevel(){const e={type:o.ServerMessageType.Leave};await(0,a.default)(this.newUrl(`/p/leave/${this._id}`),{method:"post",data:e,timeout:3e3}).catch((e=>{}))}async _sendPull(){var e,t,r,n;if(this.open){if(1!=(null===(e=this.wsSocket)||void 0===e?void 0:e.open)){const e={type:o.ServerMessageType.Pull,key:this.key,token:this.token,username:this.options.username||"",password:this.options.password||"",resource:(null===(t=globalThis.location)||void 0===t?void 0:t.hostname)||""};let s=await(0,a.default)(this.newUrl(`/p/${this._id}`),{method:"post",data:e,timeout:5e3}).then((e=>200==e.status?e.json():{status:e.status,msg:e.statusText})).catch((e=>({status:500,msg:e.message})));if(200==s.status&&s.data&&s.data.type)return i.default.log("Server message received:",JSON.stringify(s.data)),this.emit("message",s.data),"OPEN"!=(null===(r=s.data)||void 0===r?void 0:r.type)&&(null===(n=this.wsSocket)||void 0===n||n.reconnect()),void this._schedulePull(2e3);200!=s.status&&i.default.error("Server message received error:",s.status,s.msg)}this._schedulePull()}else i.default.log("Cannot send heartbeat, because socket closed")}get open(){return this._open}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const t of e)this.send(t)}send(e){if(!this._id||!this.open)return void this._messagesQueue.push(e);if(!e.type)return void this.emit("error",new Error("Invalid message"));const t=Object.assign(Object.assign({},e),{key:this.key});(0,a.default)(this.newUrl(`/p/${this._id}`),{method:"post",data:t})}close(){this.open&&(this._cleanup(),this.emit("disconnected"),this.emit("close"))}_cleanup(){clearTimeout(this._wsPingTimer)}}t.default=u},961:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.LogLevel=void 0,function(e){e[e.Disabled=0]="Disabled",e[e.Errors=1]="Errors",e[e.Warnings=2]="Warnings",e[e.All=3]="All"}(r=t.LogLevel||(t.LogLevel={})),t.default=new class{constructor(){this._logLevel=r.Disabled}get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=r.All&&this._print(r.All,...e)}warn(...e){this._logLevel>=r.Warnings&&this._print(r.Warnings,...e)}error(...e){this._logLevel>=r.Errors&&this._print(r.Errors,...e)}setLogFunction(e){this._print=e}_print(e,...t){const n=["ipeer: ",...t];for(let e in n)n[e]instanceof Error&&(n[e]="("+n[e].name+") "+n[e].message);e>=r.All?console.log(...n):e>=r.Warnings?console.warn("WARNING",...n):e>=r.Errors&&console.error("ERROR",...n)}}},416:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MediaConnection=void 0;const i=r(228),o=n(r(961)),s=r(198),a=r(482);class u extends a.BaseConnection{constructor(e,t,r){super(e,t,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||u.ID_PREFIX+i.util.randomToken()}get type(){return s.ConnectionType.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}addStream(e){o.default.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const t=e.type,r=e.payload;switch(e.type){case s.ServerMessageType.Answer:this._negotiator.handleSDP(t,r.sdp),this._open=!0;break;case s.ServerMessageType.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:o.default.warn(`Unrecognized message type:${t} from peer:${this.peer}`)}}answer(e,t={}){if(this._localStream)return void o.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");if(!e)return o.default.warn("answer stream is null");this._localStream=e,t&&t.sdpTransform&&(this.options.sdpTransform=t.sdpTransform),this._negotiator.startConnection(Object.assign(Object.assign({},this.options._payload),{_stream:e}));const r=this.provider._getMessages(this.connectionId);for(let e of r)this.handleMessage(e);this._open=!0}destroy(){this._negotiator&&this._negotiator.cleanup(),this.provider,this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}t.MediaConnection=u,u.ID_PREFIX="mc_"},333:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Negotiator=void 0;const i=r(228),o=n(r(961)),s=r(198),a=r(789);t.Negotiator=class{constructor(e){this.socket=e}startConnection(e){const t=this._startPeerConnection();if(this.socket.peerConnection=t,this.socket.type===s.ConnectionType.Media&&e._stream&&this._addTracksToConnection(e._stream,t),e.originator){if(this.socket.type===s.ConnectionType.Data){const r=this.socket;e.reliable=e.reliable||!0;const n={ordered:!!e.reliable},i=t.createDataChannel(r.label,n);r.initialize(i)}this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){o.default.log("Creating RTCPeerConnection.");const e=new a.RTCPeerConnection(this.socket.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const t=this.socket.peer,r=this.socket.connectionId,n=this.socket.type,a=this.socket.provider;o.default.log("Listening for ICE candidates."),e.onicecandidate=e=>{e.candidate&&e.candidate.candidate&&(o.default.log(`Received ICE candidates for ${t}:`,e.candidate),a.wssocket.send({type:s.ServerMessageType.Candidate,payload:{candidate:e.candidate,type:n,connectionId:r},dst:t}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":o.default.log("iceConnectionState is failed, closing connections to "+t),this.socket.emit("error",new Error("Negotiation of connection to "+t+" failed.")),this.socket.destroy();break;case"closed":o.default.log("iceConnectionState is closed, closing connections to "+t),this.socket.emit("error",new Error("Connection to "+t+" closed.")),this.socket.destroy();break;case"disconnected":o.default.log("iceConnectionState changed to disconnected on the connection with "+t);break;case"completed":e.onicecandidate=i.util.noop}this.socket.emit("iceStateChanged",e.iceConnectionState)},o.default.log("Listening for data channel"),e.ondatachannel=e=>{o.default.log("Received data channel");const n=e.channel;a.getConnection(t,r).initialize(n)},o.default.log("Listening for remote stream"),e.ontrack=e=>{o.default.log("Received remote stream"),e.streams[0];const n=a.getConnection(t,r);o.default.log("no support stream"),null==n||n.type,s.ConnectionType.Media}}cleanup(){o.default.log("Cleaning up PeerConnection to "+this.socket.peer);const e=this.socket.peerConnection;if(!e)return;this.socket.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const t="closed"!==e.signalingState;let r=!1;if(this.socket.type===s.ConnectionType.Data){const e=this.socket.dataChannel;e&&(r=!!e.readyState&&"closed"!==e.readyState)}(t||r)&&e.close()}async _makeOffer(){const e=this.socket.peerConnection,t=this.socket.provider;try{if(!e)throw new Error("no peerConnection");const r=await e.createOffer(this.socket.options.constraints);o.default.log("Created offer."),this.socket.options.sdpTransform&&"function"==typeof this.socket.options.sdpTransform&&(r.sdp=this.socket.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),o.default.log("Set localDescription:",r,`for:${this.socket.peer}`);let n={sdp:r,type:this.socket.type,connectionId:this.socket.connectionId,metadata:this.socket.metadata,browser:i.util.browser};if(this.socket.type===s.ConnectionType.Data){const e=this.socket;n=Object.assign(Object.assign({},n),{label:e.label,reliable:e.reliable,serialization:e.serialization})}t.wssocket.send({type:s.ServerMessageType.Offer,payload:n,dst:this.socket.peer})}catch(e){"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"!=e&&(t.emitError(s.PeerErrorType.WebRTC,e),o.default.log("Failed to setLocalDescription, ",e))}}catch(e){t.emitError(s.PeerErrorType.WebRTC,e),o.default.log("Failed to createOffer, ",e)}}async _makeAnswer(){const e=this.socket.peerConnection,t=this.socket.provider;try{if(!e)throw new Error("no peerConnection");const r=await e.createAnswer();o.default.log("Created answer."),this.socket.options.sdpTransform&&"function"==typeof this.socket.options.sdpTransform&&(r.sdp=this.socket.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),o.default.log("Set localDescription:",r,`for:${this.socket.peer}`),t.wssocket.send({type:s.ServerMessageType.Answer,payload:{sdp:r,type:this.socket.type,connectionId:this.socket.connectionId,browser:i.util.browser},dst:this.socket.peer})}catch(e){t.emitError(s.PeerErrorType.WebRTC,e),o.default.log("Failed to setLocalDescription, ",e)}}catch(e){t.emitError(s.PeerErrorType.WebRTC,e),o.default.log("Failed to create answer, ",e)}}async handleSDP(e,t){t=new a.RTCSessionDescription(t);const r=this.socket.peerConnection,n=this.socket.provider;o.default.log("Setting remote description",t);const i=this;try{if(!r)throw new Error("no peerConnection");await r.setRemoteDescription(t),o.default.log(`Set remoteDescription:${e} for:${this.socket.peer}`),"OFFER"===e&&await i._makeAnswer()}catch(e){n.emitError(s.PeerErrorType.WebRTC,e),o.default.log("Failed to setRemoteDescription, ",e)}}async handleCandidate(e){o.default.log("handleCandidate:",e);const t=e.candidate,r=e.sdpMLineIndex,n=e.sdpMid,i=this.socket.peerConnection,u=this.socket.provider;try{if(!i)throw new Error("no peerConnection");await i.addIceCandidate(new a.RTCIceCandidate({sdpMid:n,sdpMLineIndex:r,candidate:t})),o.default.log(`Added ICE candidate for:${this.socket.peer}`)}catch(e){u.emitError(s.PeerErrorType.WebRTC,e),o.default.log("Failed to handleCandidate, ",e)}}_addTracksToConnection(e,t){if(o.default.log(`add tracks from stream ${e.id} to peer connection`),!t.addTrack)return o.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach((r=>{t.addTrack(r,e)}))}_addStreamToMediaConnection(e,t){o.default.log(`add stream ${e.id} to media connection ${t.connectionId}`),t.addStream(e)}}},890:(e,t,r)=>{"use strict";var n=r(764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.Packer=void 0;const i=r(789),o=r(847);class s{constructor(e){this.index=0,this.index=0,this.dataBuffer=e,this.length=this.dataBuffer.byteLength}unpack(){var e,t=this.unpack_uint8();if(t<128)return t;if((224^t)<32)return(224^t)-32;if((e=160^t)<=15)return this.unpack_raw(e);if((e=176^t)<=15)return this.unpack_string(e);if((e=144^t)<=15)return this.unpack_array(e);if((e=128^t)<=15)return this.unpack_map(e);switch(t){case 192:return null;case 193:case 212:case 213:case 214:case 215:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 216:return e=this.unpack_uint16(),this.unpack_string(e);case 217:return e=this.unpack_uint32(),this.unpack_string(e);case 218:return e=this.unpack_uint16(),this.unpack_raw(e);case 219:return e=this.unpack_uint32(),this.unpack_raw(e);case 220:return e=this.unpack_uint16(),this.unpack_array(e);case 221:return e=this.unpack_uint32(),this.unpack_array(e);case 222:return e=this.unpack_uint16(),this.unpack_map(e);case 223:return e=this.unpack_uint32(),this.unpack_map(e)}}unpack_uint8(){var e=255&this.dataBuffer[this.index];return this.index++,e}unpack_uint16(){var e=this.read(2),t=256*(255&e[0])+(255&e[1]);return this.index+=2,t}unpack_uint32(){var e=this.read(4),t=256*(256*(256*e[0]+e[1])+e[2])+e[3];return this.index+=4,t}unpack_uint64(){var e=this.read(8),t=256*(256*(256*(256*(256*(256*(256*e[0]+e[1])+e[2])+e[3])+e[4])+e[5])+e[6])+e[7];return this.index+=8,t}unpack_int8(){var e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){var e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){var e=this.unpack_uint32();return e<Math.pow(2,31)?e:e-Math.pow(2,32)}unpack_int64(){var e=this.unpack_uint64();return e<Math.pow(2,63)?e:e-Math.pow(2,64)}unpack_raw(e){if(this.length<this.index+e)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+e+" "+this.length);var t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t}unpack_string(e){for(var t,r,n=this.read(e),i=0,o="";i<e;)(t=n[i])<128?(o+=String.fromCharCode(t),i++):(192^t)<32?(r=(192^t)<<6|63&n[i+1],o+=String.fromCharCode(r),i+=2):(r=(15&t)<<12|(63&n[i+1])<<6|63&n[i+2],o+=String.fromCharCode(r),i+=3);return this.index+=e,o}unpack_array(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=this.unpack();return t}unpack_map(e){for(var t={},r=0;r<e;r++){var n=this.unpack(),i=this.unpack();t[n]=i}return t}unpack_float(){var e=this.unpack_uint32(),t=(e>>23&255)-127;return(0==e>>31?1:-1)*(8388607&e|8388608)*Math.pow(2,t-23)}unpack_double(){var e=this.unpack_uint32(),t=this.unpack_uint32(),r=(e>>20&2047)-1023;return(0==e>>31?1:-1)*((1048575&e|1048576)*Math.pow(2,r-20)+t*Math.pow(2,r-52))}read(e){var t=this.index;if(t+e<=this.length)return this.dataBuffer.slice(t,t+e);throw new Error("BinaryPackFailure: read index out of range")}}class a{constructor(){this.bufferBuilder=new o.BufferBuilder}getBuffer(){return this.bufferBuilder.getBuffer()}pack(e){var t=typeof e;if("undefined"===t||null==e)this.bufferBuilder.append(192);else if("string"===t)this.pack_string(e);else if("number"===t)Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if("boolean"===t)!0===e?this.bufferBuilder.append(195):!1===e&&this.bufferBuilder.append(194);else if(e instanceof n)this.pack_bin(e);else if(/^Buffer$/i.test(e.type)&&e.data&&(e.data.length||e.data.byteLength)>0)e=n.from(e),this.pack_bin(e);else{if("object"!==t)throw new Error('Type "'+t+'" not yet supported');if(null===e)this.bufferBuilder.append(192);else{var r=e.constructor;if(r==Array)this.pack_array(e);else if(r==i.Blob||r==i.File||e instanceof i.Blob||e instanceof i.File)this.pack_bin(e);else if(e instanceof ArrayBuffer||r==ArrayBuffer)this.pack_bin(n.from(e));else if("BYTES_PER_ELEMENT"in e)this.pack_bin(n.from(e));else if(r==Object||r.toString().startsWith("class"))this.pack_object(e);else if(r==Date)this.pack_string(e.toString());else{if("function"!=typeof e.toBinaryPack)throw new Error('Type "'+r.toString()+'" not yet supported');this.bufferBuilder.append(e.toBinaryPack())}}}this.bufferBuilder.flush()}pack_bin(e){var t=e.byteLength||e.length;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this.bufferBuilder.append(218),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(219),this.pack_uint32(t)}this.bufferBuilder.append(e)}pack_string(e){var t=function(e){return e.length>600?n.from(e).byteLength:e.replace(/[^\u0000-\u007F]/g,u).length}(e);if(t<=15)this.pack_uint8(176+t);else if(t<=65535)this.bufferBuilder.append(216),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(217),this.pack_uint32(t)}this.bufferBuilder.append(e)}pack_array(e){var t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this.bufferBuilder.append(220),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(221),this.pack_uint32(t)}for(var r=0;r<t;r++)this.pack(e[r])}pack_integer(e){if(e>=-32&&e<=127)this.bufferBuilder.append(255&e);else if(e>=0&&e<=255)this.bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this.bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this.bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this.bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this.bufferBuilder.append(210),this.pack_int32(e);else if(e>=-0x8000000000000000&&e<=0x8000000000000000)this.bufferBuilder.append(211),this.pack_int64(e);else{if(!(e>=0&&e<=0x10000000000000000))throw new Error("Invalid integer");this.bufferBuilder.append(207),this.pack_uint64(e)}}pack_double(e){var t=0;e<0&&(t=1,e=-e);var r=Math.floor(Math.log(e)/Math.LN2),n=e/Math.pow(2,r)-1,i=Math.floor(n*Math.pow(2,52)),o=Math.pow(2,32),s=t<<31|r+1023<<20|i/o&1048575,a=i%o;this.bufferBuilder.append(203),this.pack_int32(s),this.pack_int32(a)}pack_object(e){var t=Object.keys(e).length;if(t<=15)this.pack_uint8(128+t);else if(t<=65535)this.bufferBuilder.append(222),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(223),this.pack_uint32(t)}for(var r in e)e.hasOwnProperty(r)&&(this.pack(r),this.pack(e[r]))}pack_uint8(e){this.bufferBuilder.append(e)}pack_uint16(e){this.bufferBuilder.append(e>>8),this.bufferBuilder.append(255&e)}pack_uint32(e){var t=4294967295&e;this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t)}pack_uint64(e){var t=e/Math.pow(2,32),r=e%Math.pow(2,32);this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t),this.bufferBuilder.append((4278190080&r)>>>24),this.bufferBuilder.append((16711680&r)>>>16),this.bufferBuilder.append((65280&r)>>>8),this.bufferBuilder.append(255&r)}pack_int8(e){this.bufferBuilder.append(255&e)}pack_int16(e){this.bufferBuilder.append((65280&e)>>8),this.bufferBuilder.append(255&e)}pack_int32(e){this.bufferBuilder.append(e>>>24&255),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e)}pack_int64(e){var t=Math.floor(e/Math.pow(2,32)),r=e%Math.pow(2,32);this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t),this.bufferBuilder.append((4278190080&r)>>>24),this.bufferBuilder.append((16711680&r)>>>16),this.bufferBuilder.append((65280&r)>>>8),this.bufferBuilder.append(255&r)}}function u(e){var t=e.charCodeAt(0);return t<=2047?"00":t<=65535?"000":t<=2097151?"0000":t<=67108863?"00000":"000000"}t.Packer=a;const c={unpack:function(e){return new s(e).unpack()},pack:function(e){var t=new a;return t.pack(e),t.getBuffer()}};t.default=c},847:(e,t,r)=>{"use strict";var n=r(764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.BufferBuilder=t.binaryFeatures=void 0,t.binaryFeatures={},t.binaryFeatures.useBlobBuilder=!0,t.binaryFeatures.useArrayBufferView=!t.binaryFeatures.useBlobBuilder&&!0,t.BufferBuilder=class{constructor(){this._pieces=[],this._parts=[]}append(e){"number"==typeof e?this._pieces.push(e):(this.flush(),e=e instanceof n?e:n.from(e),this._parts.push(e))}flush(){this._pieces.length>0&&(this._parts.push(n.from(this._pieces)),this._pieces=[])}getBuffer(){return this.flush(),n.concat(this._parts)}}},370:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(890));t.default=i.default},75:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Peer=void 0;const a=r(729),u=r(228),c=o(r(928)),l=s(r(961)),h=s(r(393)),f=r(416),d=r(803),p=r(198),g=r(45),_=s(r(650)),y=s(r(95));class m extends a.EventEmitter{constructor(e,t){var r;let n;super(),this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map,e&&e.constructor==Object?t=e:e&&(n=e.toString()),t=Object.assign({debug:0,host:u.util.CLOUD_HOST,port:u.util.CLOUD_PORT,path:"/",key:m.DEFAULT_KEY,token:u.util.randomToken(),config:u.util.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",handshakeMode:"all",wsRunTime:12e4},t),this._options=t,this.acceptFactor=new _.default(this),"/"===this._options.host&&(this._options.host=window.location.hostname),this._options.path&&("/"!==this._options.path[0]&&(this._options.path="/"+this._options.path),"/"!==this._options.path[this._options.path.length-1]&&(this._options.path+="/")),void 0===this._options.secure&&this._options.host!==u.util.CLOUD_HOST?this._options.secure=u.util.isSecure():this._options.host==u.util.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&l.default.setLogFunction(this._options.logFunction),this._username=this.options.username||"ipeer",this._password=this.options.password||t.token||(null==n?void 0:n.substring(8,16))||c.buildSN(8),l.default.logLevel=this._options.debug||0,this._api=new g.API(t),u.util.initICE(this._api),this._wssocket=this._createServerConnection(),u.util.supports.audioVideo||u.util.supports.data?!n||u.util.validateId(n)?(n?this._initialize(n):this._api.retrieveId().then((e=>this._initialize(e))).catch((e=>this._abort(p.PeerErrorType.ServerError,e))),globalThis.window==globalThis?(globalThis.addEventListener("close",(()=>this.destroy())),globalThis.addEventListener("beforeunload",(()=>this.destroy()))):null===(r=globalThis.process)||void 0===r||r.on("beforeExit",(()=>this.destroy()))):this._delayedAbort(p.PeerErrorType.InvalidID,`ID "${n}" is invalid`):this._delayedAbort(p.PeerErrorType.BrowserIncompatible,"The current browser does not support WebRTC")}get id(){return this._id}get username(){return this._username}get password(){return this._password}get uuid(){return this._id+":"+this.server}get options(){return this._options}get open(){return this._open}get wssocket(){return this._wssocket}get lastServerId(){return this._lastServerId}get server(){return this.options.host+":"+this.options.port}get connections(){const e=Object.create(null);for(let[t,r]of this._connections)e[t]=r;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}_createServerConnection(){const e=new h.default({secure:this._options.secure,host:this._options.host,port:this._options.port,path:this._options.path,key:this._options.key,pingInterval:this._options.pingInterval,wsRunTime:this._options.wsRunTime,username:this.username,password:this.password});return e.on(p.SocketEventType.Message,(e=>{this._handleMessage(e)})),e.on(p.SocketEventType.Error,(e=>{this._abort(p.PeerErrorType.SocketError,e)})),e.on(p.SocketEventType.Disconnected,(()=>{this.disconnected||(this.emitError(p.PeerErrorType.Network,"Lost connection to server."),this.disconnect())})),e.on(p.SocketEventType.Close,(()=>{this.disconnected||this._abort(p.PeerErrorType.SocketClosed,"Underlying socket is already closed.")})),e}_initialize(e){this._id=e,this.wssocket.start(e,this._options.token,this._options.handshakeMode)}_handleMessage(e){const t=e.type,r=e.payload,n=e.src;switch(t){case p.ServerMessageType.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id||"");break;case p.ServerMessageType.Error:this._abort(p.PeerErrorType.ServerError,r.msg);break;case p.ServerMessageType.IdTaken:this._abort(p.PeerErrorType.UnavailableID,`ID "${this.id}" is taken`);break;case p.ServerMessageType.InvalidKey:this._abort(p.PeerErrorType.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case p.ServerMessageType.Leave:l.default.log(`Received leave message from ${n}`),this._cleanupPeer(n),this._connections.delete(n);break;case p.ServerMessageType.Expire:this.emitError(p.PeerErrorType.PeerUnavailable,`Could not connect to peer ${n}`);let i=e.dst,o=this.getConnectionByServiceId(n,i),s=new Error(`Could not connect to peer ${n}`);if(o)null==o||o.emit("error",s);else{let e=this._connections.get(n)||[];null==e||e.forEach((e=>e.emit("error",s)))}break;case p.ServerMessageType.Offer:{const e=r.connectionId;let t=this.getConnection(n,e);if(t&&(t.destroy(),l.default.warn(`Offer received for existing Connection ID:${e}`)),r.type===p.ConnectionType.Media)this.emitError(p.PeerErrorType.PeerUnavailable,`no support MediaConnection ${n}`);else{if(r.type!==p.ConnectionType.Data)return void l.default.warn(`Received malformed connection type:${r.type}`);{let i=new d.Socket(n,this,{connectionId:e,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});t=i,this._addConnection(n,i),i.once("open",(()=>{this.emit("connection",i),this.acceptFactor.accept(new y.default(i)),setTimeout((()=>i.emit("open",i)),100)}))}}const i=this._getMessages(e);for(let e of i)null==t||t.handleMessage(e);break}default:{if(!r)return void l.default.warn(`You received a malformed message from ${n} of type ${t}`);const i=r.connectionId,o=this.getConnection(n,i);o&&o.peerConnection?o.handleMessage(e):i?this._storeMessage(i,e):l.default.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,t){var r;this._lostMessages.has(e)||this._lostMessages.set(e,[]),null===(r=this._lostMessages.get(e))||void 0===r||r.push(t)}_getMessages(e){const t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]}connect(e,t={}){this.disconnected&&(l.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(p.PeerErrorType.Disconnected,"Cannot connect to new Peer after disconnecting from server."));const r=new d.Socket(e,this,t);return this._addConnection(e,r),r}call(e,t,r={}){if(this.disconnected&&(l.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(p.PeerErrorType.Disconnected,"Cannot connect to new Peer after disconnecting from server.")),!t){let e=new Error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");throw l.default.error(e),e}return new f.MediaConnection(e,this,Object.assign(Object.assign({},r),{_stream:t}))}_addConnection(e,t){var r;l.default.log(`add connection ${t.type}:${t.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),null===(r=this._connections.get(e))||void 0===r||r.push(t)}_removeConnection(e){const t=this._connections.get(e.peer);if(t){const r=t.indexOf(e);-1!==r&&t.splice(r,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,t){const r=this._connections.get(e);if(!r)return null;for(let e of r)if(e.connectionId===t)return e;return null}getConnectionByServiceId(e,t){const r=this._connections.get(e);if(!r)return null;for(let e of r)if(e.serverId===t)return e;return null}_delayedAbort(e,t){setTimeout((()=>{this._abort(e,t)}),0)}_abort(e,t){l.default.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()}emitError(e,t){let r;l.default.error("Error:",t),r="string"==typeof t?new Error(t):t,r.type=e,this.emit("error",r)}destroy(){this.destroyed||(l.default.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(let e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.wssocket.removeAllListeners()}_cleanupPeer(e){const t=this._connections.get(e);if(t)for(let e of t)null==e||e.destroy()}disconnect(){if(this.disconnected)return;const e=this.id;l.default.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.wssocket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e||"")}reconnect(){if(this.disconnected&&!this.destroyed)l.default.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(this.disconnected||this.open)throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`);l.default.error("In a hurry? We're still trying to make the initial connection!")}}registerAccept(e){this.acceptFactor.register(e)}removeAccept(e){this.acceptFactor.remove(e)}}t.Peer=m,m.DEFAULT_KEY="peerjs",t.default=m},740:function(e,t,r){"use strict";var n=r(764).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SecretSocket=void 0;const o=i(r(993)),s=i(r(729));class a extends s.default{constructor(e,t){super(),this.ttl=6e4,this.lastExecTime=Date.now(),this.socket=e,this.cipher=o.default.createCipher(t),e.on("data",(e=>this.handleData(e))),e.once("open",(()=>{this.lastExecTime=Date.now(),this.emit("open",this)})),e.once("close",(()=>this.emit("close"))),e.once("error",(e=>this.emit("error",e))),e.on("iceStateChanged",(e=>this.emit("iceStateChanged",e))),e.on("timeout",(()=>this.emit("timeout")))}get peer(){return this.socket.peer}get uuid(){return this.socket.uuid}get open(){return this.socket.open}get provider(){return this.socket.provider}get mtu(){return this.socket.mtu}setTimeout(e){this.ttl=e;let t=setInterval((()=>{this.lastExecTime+this.ttl<Date.now()&&(clearInterval(t),this.destroy())}),this.ttl)}handleData(e){var t;void 0!==globalThis.window&&/firefox/i.test(null===(t=globalThis.navigator)||void 0===t?void 0:t.userAgent)&&(e=n.from(e));let r=e.byteLength;if(r<2)return e;let i=e[0]^e[r-1];return e=n.concat([e.slice(0,1),this.cipher.decode(e.slice(1,r-1),i),e.slice(r-1)]),this.emit("data",e),e}async read(e){let t=await this.socket.read(e);return t&&t.byteLength>0?this.handleData(t):t}async end(e){await this.write(e),this.destroy()}async write(e){let t=e instanceof n?e:n.from(e),r=t.byteLength;if(r>2){let e=t[0]^t[r-1];t=n.concat([t.slice(0,1),this.cipher.encode(t.slice(1,r-1),e),t.slice(r-1)])}this.socket.write(t)}pipe(e){return this.socket.pipe(e)}destroy(e){this.socket.destroy(e)}}t.SecretSocket=a},95:function(e,t,r){"use strict";var n=r(764).Buffer,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SerialSocket=void 0;const u=a(r(729)),c=s(r(928)),l=a(r(370)),h=a(r(993)).default.createCipher("lqWM5Dhkq9sZ4xOOaKzU4HqY0U6GXK+6jeKj4QtBR/Cq3wboI9yD9et8Zm0o+4jGYvyTA19vH0U+/iSz0xYSDZmE1coyRGpRAE0mpFYnWr5TezSt0FTdnnchm3KxmhBlCp1hAnkpHQGUzqh1ifG3cC5/GJ872pGBPLl+kvfmoZw5PcjSOhtCSnjyUD+pB0O9rnNZ/WtnwsEikE9xtGPptrXXVwUtMEjsCQ+PM6BgVfnu7/Yeouo1vKdGF/P6lyqyps+VyWwaXkmHxCzewIVSgBFpikC4uwj4FDFdJRX0sEt0zNZM58UO2M2CIHbH2VjLW+U3v8Mr/y/tHDZuDIt9BA==");let f=1;class d extends u.default{constructor(e){super(),this.socket=e,this.ttl=6e4,this.lastExecTime=Date.now(),this._cacheTTL=0,this._chunkedData={},this.socket=e,e.on("data",(e=>this.handleData(e))),e.once("open",(()=>{this.lastExecTime=Date.now(),this.emit("open",this)})),e.once("close",(()=>{this._chunkedData={},this.emit("close")})),e.once("error",(e=>{this.emit("error",e)})),e.on("iceStateChanged",(e=>this.emit("iceStateChanged",e))),e.once("timeout",(()=>this.emit("timeout")))}get peer(){return this.socket.peer}get uuid(){return this.socket.uuid}get open(){return this.socket.open}get provider(){return this.socket.provider}get mtu(){return this.socket.mtu}set cacheTTL(e){this._cacheTTL=e}get cacheTTL(){return this._cacheTTL}setTimeout(e){this.ttl=e;let t=setInterval((()=>{this.lastExecTime+this.ttl<Date.now()&&(clearInterval(t),this.destroy(new Error("timeout")))}),this.ttl)}heartbeat(){if(!this.open)return;let e=Date.now(),t=Math.ceil(this.ttl/2),r=this.ttl>=1e3?this.ttl-500:this.ttl;if(r>0){this.socket.on("data",(()=>e=Date.now()));let i=setInterval((()=>{if(!this.open)return clearInterval(i);const r=Date.now()-e;if(r>=this.ttl)return this.socket.emit("timeout"),void this.socket.destroy();r>=t&&this.write(n.from([0]))}),r);this.socket.once("close",(()=>clearInterval(i)))}}handleData(e){var t;let r,i;void 0!==globalThis.window&&/firefox/i.test(null===(t=globalThis.navigator)||void 0===t?void 0:t.userAgent)&&(e=n.from(e));try{let t=1===c.bit2Int(e.slice(0,1)),o=c.bit2Int(e.slice(1,2));const s=o;let a=h.decode(e.slice(2,2+o),s);if(a.byteLength<1)return n.alloc(0);let u=JSON.parse(a.toString()),f=c.bit2Int(e.slice(2+o,4+o)),d=e.slice(4+o,4+o+f);if(d=t?h.decode(d,s):d,r=u.id,this._chunkedData[r]||(this._chunkedData[r]={list:[],total:0,startTime:Date.now()}),i=this._chunkedData[r],i.list.push({data:d,idx:u.idx,total:e.byteLength}),i.total+=f,this.cacheTTL>0&&i.startTime+this.cacheTTL<Date.now()&&(i.list=[]),i.total>=u.total){let t=i.list.sort(((e,t)=>e.idx-t.idx)),o=n.concat(t.map((e=>e.data)));try{delete this._chunkedData[r];let e=n.alloc(0);return o.byteLength<i.total||(e=l.default.unpack(o)),this.emit("data",e),e}catch(e){delete this._chunkedData[r],this.emit("error",e)}}}catch(e){i&&(i.list=[]),this.emit("error",e)}return n.alloc(0)}async read(e){return new Promise((t=>{let r;r=e>0?setTimeout((()=>t(n.alloc(0))),e):void 0,this.once("data",(e=>{clearTimeout(r),t(e)}))}))}async end(e,t=!0){await this.write(e,t),this.destroy()}async write(e,t=!0){if(f>=d.MAX_COUNT&&(f=1),!this.open)return void this.emit("error",new Error("socket is not open"));const r=this.socket.mtu;let i=f++,o=l.default.pack(e);t=t&&o.byteLength>10240;let s=0;for(let e=0;e>=0&&!(s>=o.byteLength);e++){let a={id:i,idx:e,total:o.byteLength},u=n.from(JSON.stringify(a));if(u.byteLength>255)return void this.emit("error",new Error("send header is large"));const l=u.byteLength;u=h.encode(u,l);let f=r-u.byteLength-4;f=Math.min(f,o.byteLength-s);let d=s+f;if(f<=0)break;let p=t?h.encode(o.slice(s,d),l):o.slice(s,d),g=n.concat([n.from([t?1:0]),n.from(c.int2Bit(u.byteLength,1)),u,n.from(c.int2Bit(f,2)),p]);if(!this.open){this.emit("error",new Error("socket is not open"));break}await this.socket.write(g),s+=f}}pipe(e){return this.socket.pipe(e)}destroy(e){this._chunkedData={},e?(this.write(n.from(e.message)),setTimeout((()=>this.socket.destroy()),10)):this.socket.destroy()}clone(){return this.removeAllListeners(),this.socket.removeAllListeners(),new d(this.socket)}}t.SerialSocket=d,d.MAX_COUNT=8888888888888888,t.default=d},803:function(e,t,r){"use strict";var n=r(764).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Socket=void 0;const o=r(228),s=i(r(961)),a=r(333),u=r(198),c=i(r(913)),l=i(r(729));class h{constructor(){this.queue=[]}add(e){this.queue.push(e)}lifo(){return this.queue[0]}pop(){return this.queue.splice(0,1)[0]}clear(){this.queue=[]}get size(){return this.queue.length}}!globalThis.window||globalThis.navigator;class f extends l.default{constructor(e,t,r){super(),this.peer=e,this.options=r,this._open=!1,this.writeable=!1,this.chunkQueue=new h,this.ttl=6e4,this.lastExecTime=Date.now(),this.metadata=r.metadata,this._provider=t,this.connectionId=this.options.connectionId||f.ID_PREFIX+o.util.randomToken(),this.label=this.options.label||this.connectionId,this.serialization=this.options.serialization||u.SerializationType.Binary,this.reliable=!!this.options.reliable,this._serverId=t.lastServerId||void 0,this._negotiator=new a.Negotiator(this),this._negotiator.startConnection(this.options._payload||{originator:!0});let n=r.timeout||6e4;setTimeout((()=>{this.open||(this.emit("timeout"),this.destroy())}),n),this.once("open",(()=>{this.lastExecTime=Date.now()}))}get serverId(){return this._serverId}get uuid(){return this.peer+":"+this.provider.server}get mtu(){return c.default.mtu}get dataChannel(){return this._dc}get type(){return u.ConnectionType.Data}get bufferSize(){var e;return(null===(e=this.dataChannel)||void 0===e?void 0:e.bufferedAmount)||0}get open(){return this._open&&"open"==this.dataChannel.readyState}get provider(){return this._provider}initialize(e){this._dc=e,this._configureDataChannel(),setInterval((()=>{this._doNext()}),10)}setTimeout(e){this.ttl=e;let t=setInterval((()=>{this.lastExecTime+this.ttl<Date.now()&&(clearInterval(t),this.destroy())}),this.ttl)}_configureDataChannel(){this.dataChannel.binaryType="arraybuffer",this.dataChannel.onopen=()=>{s.default.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.writeable=!0,this.emit("open",this)},this.dataChannel.onmessage=e=>{try{this.lastExecTime=Date.now(),this.handleReceiveData(n.from(e.data))}catch(t){s.default.error(`DC#${this.connectionId} dc onmessage:`,e.data),this.emit("error",t)}},this.dataChannel.onclose=()=>{this.dataChannel.onclose=null,this._open=!1,this.writeable=!1,s.default.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.emit("close"),this.clear()},this.dataChannel.onerror=e=>{var t;this.dataChannel.onerror=null,this.emit("error",new Error((null===(t=e.error)||void 0===t?void 0:t.message)||"dataChannel error")),this.removeListener("error")},this.once("error",(()=>{this.chunkQueue.clear()})),this.once("close",(()=>{this.chunkQueue.clear()}))}handleReceiveData(e){this.emit("data",e)}clear(){this.chunkQueue.clear(),this._provider&&this._provider._removeConnection(this),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onerror=null),this.removeAllListeners()}destroy(e){this._open=!1;try{e&&this.dataChannel.send(n.from(e.message))}catch(e){}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=void 0),this.dataChannel&&this.dataChannel.close(),this.clear()}pipe(e){return this.on("data",(t=>e.write(t))),this.once("close",(()=>e.destroy())),e}async read(e=0){return new Promise((t=>{let r,i=e=>{clearTimeout(r),t(n.from(e))};e>0&&(r=setTimeout((()=>{this.removeListener("data",i),t(n.alloc(0))}),e)),this.once("data",i)}))}async write(e){if(!this.open){let e=new Error("socket is not open. You should listen for the `open` event before sending messages.");return void this.emit("error",e)}let t=n.isBuffer(e)?e:n.from(e);return this.isWrite(t)&&this.chunkQueue.size<1?this.write0(t):(this.chunkQueue.add(t),new Promise((e=>{setTimeout((()=>e()),1)})))}async end(e){await this.write(e),this.dataChannel.close()}async write0(e){return new Promise((t=>{this._send(e,(()=>t()))}))}async _doNext(){let e=this.chunkQueue.lifo();e&&this.isWrite(e)&&(this.chunkQueue.pop(),await this.write0(e))}isWrite(e){return!!this.writeable&&this.dataChannel.bufferedAmount+e.byteLength<=f.MAX_BUFFERED_AMOUNT/2}async _send(e,t){if(!this.open)return super.emit("error",new Error("socket is not open. You should listen for the `open` event before sending messages.")),void this.chunkQueue.clear();if(e.byteLength>this.mtu){let r=this._splitChunk(e);for(let e of r)await d(1),await this.write0(e);t&&t()}else{try{this.dataChannel.send(e),this._doNext()}catch(e){return this.chunkQueue.clear(),void this.emit("error",e)}t&&t()}}handleMessage(e){var t,r;const n=e.payload;switch(e.type){case u.ServerMessageType.Answer:null===(t=this._negotiator)||void 0===t||t.handleSDP(e.type,n.sdp);break;case u.ServerMessageType.Candidate:null===(r=this._negotiator)||void 0===r||r.handleCandidate(n.candidate);break;default:s.default.warn("Unrecognized message type:",e.type,"from peer:",this.peer)}}_splitChunk(e){let t=this.mtu,r=Math.ceil(e.byteLength/t),n=[];for(let i=0;i<r;i++)n.push(e.slice(t*i,Math.min(t*(i+1),e.byteLength)));return n}}async function d(e=1){return new Promise((t=>{setTimeout((()=>t()),e)}))}t.Socket=f,f.ID_PREFIX="dc_",f.MAX_BUFFERED_AMOUNT=134217728},722:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Supports=void 0;const i=r(789),o=(null===(n=globalThis.navigator)||void 0===n?void 0:n.platform)||"Win32";function s(e,t,r){var n=e.match(t);if(n&&n.length>=r){let e=n[r];if("string"==typeof e)return parseInt(e,10)}return 0}t.Supports=new class{constructor(){this.isIOS=["iPad","iPhone","iPod"].includes(o),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605,this.browser=function(){const e=globalThis;var t={browser:"",version:0,supportsUnifiedPlan:!1};if(void 0===e||!e.navigator)return t.browser="node",t;var r=e.navigator;if(r.mozGetUserMedia)t.browser="firefox",t.version=s(r.userAgent,/Firefox\/(\d+)\./,1);else if(r.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=s(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!r.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=s(r.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}()}isWebRTCSupported(){return void 0!==i.RTCPeerConnection}isBrowserSupported(){const e=this.getBrowser(),t=this.getVersion();return!!this.supportedBrowsers.includes(e)&&("chrome"===e?t>=this.minChromeVersion:"firefox"===e?t>=this.minFirefoxVersion:"safari"===e&&!this.isIOS&&t>=this.minSafariVersion)}getBrowser(){return this.browser.browser}getVersion(){return this.browser.version}isUnifiedPlanSupported(){const e=this.getBrowser(),t=this.getVersion();if("chrome"===e&&t<this.minChromeVersion)return!1;if("firefox"===e&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let r,n=!1;try{r=new i.RTCPeerConnection,null==r||r.addTransceiver("audio"),n=!0}catch(e){}finally{null==r||r.close()}return n}toString(){return`Supports:\n    browser:${this.getBrowser()}\n    version:${this.getVersion()}\n    isIOS:${this.isIOS}\n    isWebRTCSupported:${this.isWebRTCSupported()}\n    isBrowserSupported:${this.isBrowserSupported()}\n    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}}},228:function(e,t,r){"use strict";var n=r(764).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.util=void 0;const o=i(r(370)),s=r(722),a=r(789),u={iceServers:[{urls:["stun:stun1.l.google.com:19302","stun:stun.l.google.com:19302"]},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};let c=!1;t.util=new class{constructor(){this.CLOUD_HOST="p0.iee.one",this.CLOUD_PORT=443,this.MAX_COUNT=8888888888888888,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=u,this.browser=s.Supports.getBrowser(),this.browserVersion=s.Supports.getVersion(),this.supports=function(){const e={browser:s.Supports.isBrowserSupported(),webRTC:s.Supports.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!e.webRTC)return e;let t;try{if(t=new a.RTCPeerConnection(u),!t)throw new Error("peer connect is null");let r;e.audioVideo=!0;try{r=t.createDataChannel("_PEERJSTEST",{ordered:!0}),e.data=!0,e.reliable=!!r.ordered;try{r.binaryType="blob",e.binaryBlob=!s.Supports.isIOS}catch(e){}}catch(e){}finally{null==r||r.close()}}catch(e){}finally{null==t||t.close()}return e}(),this.pack=o.default.pack,this.unpack=o.default.unpack,this._dataCount=1}noop(){}validateId(e){return!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e)}chunk(e){"buffer"==e.type&&(e=n.from(e.buffer));const r=[],i=e.byteLength,o=Math.ceil(i/t.util.chunkedMTU);let s=0,a=0;for(this._dataCount>=this.MAX_COUNT&&(this._dataCount=1);a<i;){const n=Math.min(i,a+t.util.chunkedMTU),u=e.slice(a,n),c={__peerData:this._dataCount,n:s,data:u,total:o};r.push(c),a=n,s++}return this._dataCount++,r}blobToArrayBuffer(e,t){const r=new FileReader;return r.onload=function(e){e.target&&t(e.target.result)},r.readAsArrayBuffer(e),r}binaryStringToArrayBuffer(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=255&e.charCodeAt(r);return t.buffer}randomToken(){return Math.random().toString(36).slice(2)}isSecure(){var e;return"https:"===(null===(e=globalThis.location)||void 0===e?void 0:e.protocol)}initICE(e){async function t(){let t=await e.getIceServers();return t&&t.length>0&&(u.iceServers=t,c=!0),t}c||((async()=>{setInterval((()=>t()),6e5)})(),t())}}},607:function(e,t,r){"use strict";var n=r(764).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.IPeer=t.Connect=t.XHRSocket=t.WSSocket=t.AcceptCMD=t.Accept=t.XSocket=t.SecretSocket=t.SerialSocket=t.Socket=t.Buffer=void 0;var o=r(764);Object.defineProperty(t,"Buffer",{enumerable:!0,get:function(){return o.Buffer}});const s=i(r(75));t.IPeer=s.default;var a=r(803);Object.defineProperty(t,"Socket",{enumerable:!0,get:function(){return a.Socket}});var u=r(95);Object.defineProperty(t,"SerialSocket",{enumerable:!0,get:function(){return u.SerialSocket}});var c=r(740);Object.defineProperty(t,"SecretSocket",{enumerable:!0,get:function(){return c.SecretSocket}});var l=r(390);Object.defineProperty(t,"XSocket",{enumerable:!0,get:function(){return l.XSocket}});var h=r(872);Object.defineProperty(t,"Accept",{enumerable:!0,get:function(){return h.Accept}}),Object.defineProperty(t,"AcceptCMD",{enumerable:!0,get:function(){return h.CMD}}),globalThis.Buffer=n;var f=r(488);Object.defineProperty(t,"WSSocket",{enumerable:!0,get:function(){return f.WSSocket}});var d=r(497);Object.defineProperty(t,"XHRSocket",{enumerable:!0,get:function(){return d.XHRSocket}});var p=r(651);Object.defineProperty(t,"Connect",{enumerable:!0,get:function(){return p.Connect}}),t.default=s.default},993:(e,t,r)=>{"use strict";var n=r(764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e,t){this.encodeSecret=e,this.decodeSecret=t,this.secret=e.toString("base64")}static createCipher(e){"string"==typeof e&&(e=n.from(e,"base64"));let t=n.alloc(256);for(let r=0;r<t.length;r++){let n=e[r];t.writeUInt8(r,n)}return new i(e,t)}buildVersion(e=2){e=Math.floor(e);let t=0;for(let r=(e=Math.min(e,4))-1;r>=0;r--)t+=Math.floor(256*Math.random())<<8*r;return t}buildFace(){return Math.floor(256*Math.random())}decode(e,t=99){return t%=256,!e||e.byteLength<1?n.alloc(0):(e.forEach(((r,n)=>{let i=this.decodeSecret[r];i=t<=0?i:i^t,e[n]=i})),e)}encode(e,t=99){return t%=256,!e||e.byteLength<1?n.alloc(0):(e.forEach(((r,n)=>{r=t<=0?r:r^t;let i=this.encodeSecret[r];e[n]=i})),e)}}t.default=i},294:function(e,t,r){"use strict";var n=r(764).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Response=void 0;const o=i(r(218));class s{constructor(e){this.res=e}get status(){return this.res instanceof Error?500:this.res.status}get statusText(){return this.res instanceof Error?this.res.message:this.res.statusText}async buffer(){return n.from(this.res instanceof Error?this.res.message:this.res.data)}async text(){return(await this.buffer()).toString()}async json(){return JSON.parse(await this.text())}}t.Response=s,t.default=async function(e,t){return t="object"==typeof e?e:Object.assign({},t),t=Object.assign({timeout:15e3},t),e="string"==typeof e?e:t.url||"",t.url=e,t.data=t.data||t.body,await(0,o.default)(Object.assign({responseType:"arraybuffer"},t)).then((e=>new s(e))).catch((e=>new s(e)))}},928:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.splitChunk=t.buffer2array=t.cycle=t.random2Int=t.bit2Int=t.int2Bit=t.string2Bit=t.wait=t.buildSN=t.buildPeerId=void 0;const i=n(r(913));t.buildPeerId=function(){return Math.random().toString(36).slice(2)};const o=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];t.buildSN=function(e=8){let t=[];for(let r=0;r<e;r++)t.push(o[Math.floor(Math.random()*o.length)]);return t.join("")},t.wait=async function(e){return new Promise((t=>{setTimeout((()=>t()),e)}))},t.string2Bit=function(e,t=6){return(e=e.substring(0,t)).split("").map((e=>e.charCodeAt(0)))},t.int2Bit=function(e,t=6){let r=Array(6);e=Math.floor(e%281474976710656);let n=Math.floor(e/Math.pow(2,32)),i=Math.floor(e%Math.pow(2,32));for(let e=5;e>=0;e--)r[e]=e>=2?i>>8*(6-e-1)&255:n>>(6-e-1)%4*8&255;return r.slice(6-Math.min(t,6))},t.bit2Int=function(e){e=e.slice(Math.max(e.length-6,0));let t=0,r=0,n=0;for(let t=0;t<e.length;t++){let i=8*(e.length-t-1),o=e[t];i>=32?n+=Math.pow(2,32)*(o<<i%32):i<=24&&(r+=24==i?o*Math.pow(2,24):o<<i)}return t=n+r,t},t.random2Int=function(e){return Math.floor(Math.random()*(e+1))},t.cycle=function(e=5,t){let r;return e=Math.max(e,1),function n(){r=setTimeout((()=>{try{t&&t(),n()}catch(e){}}),1e3*e)}(),{stop(){clearTimeout(r)}}},t.buffer2array=function(e,t){let r=[],n=t||e.length;n=Math.min(n,e.length);for(let t=0;t<n;t++)r.push(e[t]);return r},t.splitChunk=function(e){let t=i.default.mtu,r=Math.ceil(e.byteLength/t),n=[];for(let i=0;i<r;i++)n.push(e.slice(t*i,Math.min(t*(i+1),e.byteLength)));return n}},398:(e,t,r)=>{const n=r(756).Z;e.exports={File:globalThis.File,Blob:globalThis.Blob,fetch:globalThis.fetch,TransformStream:globalThis.TransformStream,WritableStreamDefaultWriter:globalThis.WritableStreamDefaultWriter,ReadableStreamDefaultReader:globalThis.ReadableStreamDefaultReader,Socket:n}},756:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(390),i=r.n(n),o=r(764).Buffer;class s extends(i()){constructor(){super()}connect(e,t){return this}async write(e){return this}async end(e){return this}async read(e){return o.alloc(0)}destroy(e){}}const a=s},11:e=>{e.exports={RTCPeerConnection:globalThis.RTCPeerConnection,RTCDataChannel:globalThis.RTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate,RTCOfferOptions:globalThis.RTCOfferOptions}},241:e=>{e.exports=globalThis.WebSocket},218:(e,t,r)=>{"use strict";var n=r(764).Buffer;function i(e,t){return function(){return e.apply(t,arguments)}}const{toString:o}=Object.prototype,{getPrototypeOf:s}=Object,a=(u=Object.create(null),e=>{const t=o.call(e);return u[t]||(u[t]=t.slice(8,-1).toLowerCase())});var u;const c=e=>(e=e.toLowerCase(),t=>a(t)===e),l=e=>t=>typeof t===e,{isArray:h}=Array,f=l("undefined"),d=c("ArrayBuffer"),p=l("string"),g=l("function"),_=l("number"),y=e=>null!==e&&"object"==typeof e,m=e=>{if("object"!==a(e))return!1;const t=s(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},v=c("Date"),b=c("File"),w=c("Blob"),k=c("FileList"),S=c("URLSearchParams");function E(e,t,{allOwnKeys:r=!1}={}){if(null==e)return;let n,i;if("object"!=typeof e&&(e=[e]),h(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{const i=r?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let s;for(n=0;n<o;n++)s=i[n],t.call(null,e[s],s,e)}}function T(e,t){t=t.toLowerCase();const r=Object.keys(e);let n,i=r.length;for(;i-- >0;)if(n=r[i],t===n.toLowerCase())return n;return null}const O="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:r.g,x=e=>!f(e)&&e!==O,C=(B="undefined"!=typeof Uint8Array&&s(Uint8Array),e=>B&&e instanceof B);var B;const M=c("HTMLFormElement"),I=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),P=c("RegExp"),A=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};E(r,((r,i)=>{!1!==t(r,i,e)&&(n[i]=r)})),Object.defineProperties(e,n)};var R={isArray:h,isArrayBuffer:d,isBuffer:function(e){return null!==e&&!f(e)&&null!==e.constructor&&!f(e.constructor)&&g(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{const t="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||o.call(e)===t||g(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&d(e.buffer),t},isString:p,isNumber:_,isBoolean:e=>!0===e||!1===e,isObject:y,isPlainObject:m,isUndefined:f,isDate:v,isFile:b,isBlob:w,isRegExp:P,isFunction:g,isStream:e=>y(e)&&g(e.pipe),isURLSearchParams:S,isTypedArray:C,isFileList:k,forEach:E,merge:function e(){const{caseless:t}=x(this)&&this||{},r={},n=(n,i)=>{const o=t&&T(r,i)||i;m(r[o])&&m(n)?r[o]=e(r[o],n):m(n)?r[o]=e({},n):h(n)?r[o]=n.slice():r[o]=n};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&E(arguments[e],n);return r},extend:(e,t,r,{allOwnKeys:n}={})=>(E(t,((t,n)=>{r&&g(t)?e[n]=i(t,r):e[n]=t}),{allOwnKeys:n}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let i,o,a;const u={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)a=i[o],n&&!n(a,e,t)||u[a]||(t[a]=e[a],u[a]=!0);e=!1!==r&&s(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:a,kindOfTest:c,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(h(e))return e;let t=e.length;if(!_(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:M,hasOwnProperty:I,hasOwnProp:I,reduceDescriptors:A,freezeMethods:e=>{A(e,((t,r)=>{if(g(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];g(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))}))},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach((e=>{r[e]=!0}))};return h(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,(function(e,t,r){return t.toUpperCase()+r})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:T,global:O,isContextDefined:x,toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if(y(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[n]=e;const i=h(e)?[]:{};return E(e,((e,t)=>{const o=r(e,n+1);!f(o)&&(i[t]=o)})),t[n]=void 0,i}}return e};return r(e,0)}};function L(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}R.inherits(L,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:R.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const j=L.prototype,D={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{D[e]={value:e}})),Object.defineProperties(L,D),Object.defineProperty(j,"isAxiosError",{value:!0}),L.from=(e,t,r,n,i,o)=>{const s=Object.create(j);return R.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),L.call(s,e.message,t,r,n,i),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};var U="object"==typeof self?self.FormData:window.FormData;function $(e){return R.isPlainObject(e)||R.isArray(e)}function q(e){return R.endsWith(e,"[]")?e.slice(0,-2):e}function N(e,t,r){return e?e.concat(t).map((function(e,t){return e=q(e),!r&&t?"["+e+"]":e})).join(r?".":""):t}const F=R.toFlatObject(R,{},null,(function(e){return/^is[A-Z]/.test(e)}));function z(e,t,r){if(!R.isObject(e))throw new TypeError("target must be an object");t=t||new(U||FormData);const i=(r=R.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!R.isUndefined(t[e])}))).metaTokens,o=r.visitor||h,s=r.dots,a=r.indexes,u=(r.Blob||"undefined"!=typeof Blob&&Blob)&&(c=t)&&R.isFunction(c.append)&&"FormData"===c[Symbol.toStringTag]&&c[Symbol.iterator];var c;if(!R.isFunction(o))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(R.isDate(e))return e.toISOString();if(!u&&R.isBlob(e))throw new L("Blob is not supported. Use a Buffer instead.");return R.isArrayBuffer(e)||R.isTypedArray(e)?u&&"function"==typeof Blob?new Blob([e]):n.from(e):e}function h(e,r,n){let o=e;if(e&&!n&&"object"==typeof e)if(R.endsWith(r,"{}"))r=i?r:r.slice(0,-2),e=JSON.stringify(e);else if(R.isArray(e)&&function(e){return R.isArray(e)&&!e.some($)}(e)||R.isFileList(e)||R.endsWith(r,"[]")&&(o=R.toArray(e)))return r=q(r),o.forEach((function(e,n){!R.isUndefined(e)&&null!==e&&t.append(!0===a?N([r],n,s):null===a?r:r+"[]",l(e))})),!1;return!!$(e)||(t.append(N(n,r,s),l(e)),!1)}const f=[],d=Object.assign(F,{defaultVisitor:h,convertValue:l,isVisitable:$});if(!R.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!R.isUndefined(r)){if(-1!==f.indexOf(r))throw Error("Circular reference detected in "+n.join("."));f.push(r),R.forEach(r,(function(r,i){!0===(!(R.isUndefined(r)||null===r)&&o.call(t,r,R.isString(i)?i.trim():i,n,d))&&e(r,n?n.concat(i):[i])})),f.pop()}}(e),t}function W(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function H(e,t){this._pairs=[],e&&z(e,this,t)}const V=H.prototype;function Q(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function X(e,t,r){if(!t)return e;const n=r&&r.encode||Q,i=r&&r.serialize;let o;if(o=i?i(t,r):R.isURLSearchParams(t)?t.toString():new H(t,r).toString(n),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}V.append=function(e,t){this._pairs.push([e,t])},V.toString=function(e){const t=e?function(t){return e.call(this,t,W)}:W;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var Y=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){R.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},J={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},G="undefined"!=typeof URLSearchParams?URLSearchParams:H,K=FormData;const Z=(()=>{let e;return("undefined"==typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&"undefined"!=typeof window&&"undefined"!=typeof document})(),ee="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts;var te={isBrowser:!0,classes:{URLSearchParams:G,FormData:K,Blob},isStandardBrowserEnv:Z,isStandardBrowserWebWorkerEnv:ee,protocols:["http","https","file","blob","url","data"]};function re(e){function t(e,r,n,i){let o=e[i++];const s=Number.isFinite(+o),a=i>=e.length;return o=!o&&R.isArray(n)?n.length:o,a?(R.hasOwnProp(n,o)?n[o]=[n[o],r]:n[o]=r,!s):(n[o]&&R.isObject(n[o])||(n[o]=[]),t(e,r,n[o],i)&&R.isArray(n[o])&&(n[o]=function(e){const t={},r=Object.keys(e);let n;const i=r.length;let o;for(n=0;n<i;n++)o=r[n],t[o]=e[o];return t}(n[o])),!s)}if(R.isFormData(e)&&R.isFunction(e.entries)){const r={};return R.forEachEntry(e,((e,n)=>{t(function(e){return R.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),n,r,0)})),r}return null}const ne={"Content-Type":void 0},ie={transitional:J,adapter:["xhr","http"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,i=R.isObject(e);if(i&&R.isHTMLForm(e)&&(e=new FormData(e)),R.isFormData(e))return n&&n?JSON.stringify(re(e)):e;if(R.isArrayBuffer(e)||R.isBuffer(e)||R.isStream(e)||R.isFile(e)||R.isBlob(e))return e;if(R.isArrayBufferView(e))return e.buffer;if(R.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return z(e,new te.classes.URLSearchParams,Object.assign({visitor:function(e,t,r,n){return te.isNode&&R.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((o=R.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return z(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||n?(t.setContentType("application/json",!1),function(e,t,r){if(R.isString(e))try{return(0,JSON.parse)(e),R.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||ie.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(e&&R.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(e){if(r){if("SyntaxError"===e.name)throw L.from(e,L.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:te.classes.FormData,Blob:te.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};R.forEach(["delete","get","head"],(function(e){ie.headers[e]={}})),R.forEach(["post","put","patch"],(function(e){ie.headers[e]=R.merge(ne)}));var oe=ie;const se=R.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ae=Symbol("internals");function ue(e){return e&&String(e).trim().toLowerCase()}function ce(e){return!1===e||null==e?e:R.isArray(e)?e.map(ce):String(e)}function le(e,t,r,n){return R.isFunction(n)?n.call(this,t,r):R.isString(t)?R.isString(n)?-1!==t.indexOf(n):R.isRegExp(n)?n.test(t):void 0:void 0}class he{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function i(e,t,r){const i=ue(t);if(!i)throw new Error("header name must be a non-empty string");const o=R.findKey(n,i);(!o||void 0===n[o]||!0===r||void 0===r&&!1!==n[o])&&(n[o||t]=ce(e))}const o=(e,t)=>R.forEach(e,((e,r)=>i(e,r,t)));return R.isPlainObject(e)||e instanceof this.constructor?o(e,t):R.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z]+$/.test(e.trim())?o((e=>{const t={};let r,n,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),r=e.substring(0,i).trim().toLowerCase(),n=e.substring(i+1).trim(),!r||t[r]&&se[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)})),t})(e),t):null!=e&&i(t,e,r),this}get(e,t){if(e=ue(e)){const r=R.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(R.isFunction(t))return t.call(this,e,r);if(R.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=ue(e)){const r=R.findKey(this,e);return!(!r||t&&!le(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function i(e){if(e=ue(e)){const i=R.findKey(r,e);!i||t&&!le(0,r[i],i,t)||(delete r[i],n=!0)}}return R.isArray(e)?e.forEach(i):i(e),n}clear(){return Object.keys(this).forEach(this.delete.bind(this))}normalize(e){const t=this,r={};return R.forEach(this,((n,i)=>{const o=R.findKey(r,i);if(o)return t[o]=ce(n),void delete t[i];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,r)=>t.toUpperCase()+r))}(i):String(i).trim();s!==i&&delete t[i],t[s]=ce(n),r[s]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return R.forEach(this,((r,n)=>{null!=r&&!1!==r&&(t[n]=e&&R.isArray(r)?r.join(", "):r)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach((e=>r.set(e))),r}static accessor(e){const t=(this[ae]=this[ae]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=ue(e);t[n]||(function(e,t){const r=R.toCamelCase(" "+t);["get","set","has"].forEach((n=>{Object.defineProperty(e,n+r,{value:function(e,r,i){return this[n].call(this,t,e,r,i)},configurable:!0})}))}(r,e),t[n]=!0)}return R.isArray(e)?e.forEach(n):n(e),this}}he.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),R.freezeMethods(he.prototype),R.freezeMethods(he);var fe=he;function de(e,t){const r=this||oe,n=t||r,i=fe.from(n.headers);let o=n.data;return R.forEach(e,(function(e){o=e.call(r,o,i.normalize(),t?t.status:void 0)})),i.normalize(),o}function pe(e){return!(!e||!e.__CANCEL__)}function ge(e,t,r){L.call(this,null==e?"canceled":e,L.ERR_CANCELED,t,r),this.name="CanceledError"}R.inherits(ge,L,{__CANCEL__:!0});var _e=te.isStandardBrowserEnv?{write:function(e,t,r,n,i,o){const s=[];s.push(e+"="+encodeURIComponent(t)),R.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),R.isString(n)&&s.push("path="+n),R.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function ye(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var me=te.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let r;function n(r){let n=r;return e&&(t.setAttribute("href",n),n=t.href),t.setAttribute("href",n),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return r=n(window.location.href),function(e){const t=R.isString(e)?n(e):e;return t.protocol===r.protocol&&t.host===r.host}}():function(){return!0};function ve(e,t){let r=0;const n=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let i,o=0,s=0;return t=void 0!==t?t:1e3,function(a){const u=Date.now(),c=n[s];i||(i=u),r[o]=a,n[o]=u;let l=s,h=0;for(;l!==o;)h+=r[l++],l%=e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),u-i<t)return;const f=c&&u-c;return f?Math.round(1e3*h/f):void 0}}(50,250);return i=>{const o=i.loaded,s=i.lengthComputable?i.total:void 0,a=o-r,u=n(a);r=o;const c={loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:u||void 0,estimated:u&&s&&o<=s?(s-o)/u:void 0,event:i};c[t?"download":"upload"]=!0,e(c)}}const be={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,r){let n=e.data;const i=fe.from(e.headers).normalize(),o=e.responseType;let s;function a(){e.cancelToken&&e.cancelToken.unsubscribe(s),e.signal&&e.signal.removeEventListener("abort",s)}R.isFormData(n)&&(te.isStandardBrowserEnv||te.isStandardBrowserWebWorkerEnv)&&i.setContentType(!1);let u=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",r=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(t+":"+r))}const c=ye(e.baseURL,e.url);function l(){if(!u)return;const n=fe.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());!function(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new L("Request failed with status code "+r.status,[L.ERR_BAD_REQUEST,L.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}((function(e){t(e),a()}),(function(e){r(e),a()}),{data:o&&"text"!==o&&"json"!==o?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:n,config:e,request:u}),u=null}if(u.open(e.method.toUpperCase(),X(c,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=l:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(l)},u.onabort=function(){u&&(r(new L("Request aborted",L.ECONNABORTED,e,u)),u=null)},u.onerror=function(){r(new L("Network Error",L.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const n=e.transitional||J;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(new L(t,n.clarifyTimeoutError?L.ETIMEDOUT:L.ECONNABORTED,e,u)),u=null},te.isStandardBrowserEnv){const t=(e.withCredentials||me(c))&&e.xsrfCookieName&&_e.read(e.xsrfCookieName);t&&i.set(e.xsrfHeaderName,t)}void 0===n&&i.setContentType(null),"setRequestHeader"in u&&R.forEach(i.toJSON(),(function(e,t){u.setRequestHeader(t,e)})),R.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),o&&"json"!==o&&(u.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&u.addEventListener("progress",ve(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",ve(e.onUploadProgress)),(e.cancelToken||e.signal)&&(s=t=>{u&&(r(!t||t.type?new ge(null,e,u):t),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(s),e.signal&&(e.signal.aborted?s():e.signal.addEventListener("abort",s)));const h=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(c);h&&-1===te.protocols.indexOf(h)?r(new L("Unsupported protocol "+h+":",L.ERR_BAD_REQUEST,e)):u.send(n||null)}))}};R.forEach(be,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));function we(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ge(null,e)}function ke(e){return we(e),e.headers=fe.from(e.headers),e.data=de.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),(e=>{e=R.isArray(e)?e:[e];const{length:t}=e;let r,n;for(let i=0;i<t&&(r=e[i],!(n=R.isString(r)?be[r.toLowerCase()]:r));i++);if(!n){if(!1===n)throw new L(`Adapter ${r} is not supported by the environment`,"ERR_NOT_SUPPORT");throw new Error(R.hasOwnProp(be,r)?`Adapter '${r}' is not available in the build`:`Unknown adapter '${r}'`)}if(!R.isFunction(n))throw new TypeError("adapter is not a function");return n})(e.adapter||oe.adapter)(e).then((function(t){return we(e),t.data=de.call(e,e.transformResponse,t),t.headers=fe.from(t.headers),t}),(function(t){return pe(t)||(we(e),t&&t.response&&(t.response.data=de.call(e,e.transformResponse,t.response),t.response.headers=fe.from(t.response.headers))),Promise.reject(t)}))}const Se=e=>e instanceof fe?e.toJSON():e;function Ee(e,t){t=t||{};const r={};function n(e,t,r){return R.isPlainObject(e)&&R.isPlainObject(t)?R.merge.call({caseless:r},e,t):R.isPlainObject(t)?R.merge({},t):R.isArray(t)?t.slice():t}function i(e,t,r){return R.isUndefined(t)?R.isUndefined(e)?void 0:n(void 0,e,r):n(e,t,r)}function o(e,t){if(!R.isUndefined(t))return n(void 0,t)}function s(e,t){return R.isUndefined(t)?R.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function a(r,i,o){return o in t?n(r,i):o in e?n(void 0,r):void 0}const u={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t)=>i(Se(e),Se(t),!0)};return R.forEach(Object.keys(e).concat(Object.keys(t)),(function(n){const o=u[n]||i,s=o(e[n],t[n],n);R.isUndefined(s)&&o!==a||(r[n]=s)})),r}const Te={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Te[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));const Oe={};Te.transitional=function(e,t,r){function n(e,t){return"[Axios v1.2.6] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,i,o)=>{if(!1===e)throw new L(n(i," has been removed"+(t?" in "+t:"")),L.ERR_DEPRECATED);return t&&!Oe[i]&&(Oe[i]=!0,console.warn(n(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,i,o)}};var xe={assertOptions:function(e,t,r){if("object"!=typeof e)throw new L("options must be an object",L.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const o=n[i],s=t[o];if(s){const t=e[o],r=void 0===t||s(t,o,e);if(!0!==r)throw new L("option "+o+" must be "+r,L.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new L("Unknown option "+o,L.ERR_BAD_OPTION)}},validators:Te};const Ce=xe.validators;class Be{constructor(e){this.defaults=e,this.interceptors={request:new Y,response:new Y}}request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Ee(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:i}=t;let o;void 0!==r&&xe.assertOptions(r,{silentJSONParsing:Ce.transitional(Ce.boolean),forcedJSONParsing:Ce.transitional(Ce.boolean),clarifyTimeoutError:Ce.transitional(Ce.boolean)},!1),void 0!==n&&xe.assertOptions(n,{encode:Ce.function,serialize:Ce.function},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase(),o=i&&R.merge(i.common,i[t.method]),o&&R.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=fe.concat(o,i);const s=[];let a=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const u=[];let c;this.interceptors.response.forEach((function(e){u.push(e.fulfilled,e.rejected)}));let l,h=0;if(!a){const e=[ke.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,u),l=e.length,c=Promise.resolve(t);h<l;)c=c.then(e[h++],e[h++]);return c}l=s.length;let f=t;for(h=0;h<l;){const t=s[h++],r=s[h++];try{f=t(f)}catch(e){r.call(this,e);break}}try{c=ke.call(this,f)}catch(e){return Promise.reject(e)}for(h=0,l=u.length;h<l;)c=c.then(u[h++],u[h++]);return c}getUri(e){return X(ye((e=Ee(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}R.forEach(["delete","get","head","options"],(function(e){Be.prototype[e]=function(t,r){return this.request(Ee(r||{},{method:e,url:t,data:(r||{}).data}))}})),R.forEach(["post","put","patch"],(function(e){function t(t){return function(r,n,i){return this.request(Ee(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}Be.prototype[e]=t(),Be.prototype[e+"Form"]=t(!0)}));var Me=Be;class Ie{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const r=this;this.promise.then((e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null})),this.promise.then=e=>{let t;const n=new Promise((e=>{r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e((function(e,n,i){r.reason||(r.reason=new ge(e,n,i),t(r.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new Ie((function(t){e=t})),cancel:e}}}var Pe=Ie;const Ae={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ae).forEach((([e,t])=>{Ae[t]=e}));var Re=Ae;const Le=function e(t){const r=new Me(t),n=i(Me.prototype.request,r);return R.extend(n,Me.prototype,r,{allOwnKeys:!0}),R.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(Ee(t,r))},n}(oe);Le.Axios=Me,Le.CanceledError=ge,Le.CancelToken=Pe,Le.isCancel=pe,Le.VERSION="1.2.6",Le.toFormData=z,Le.AxiosError=L,Le.Cancel=Le.CanceledError,Le.all=function(e){return Promise.all(e)},Le.spread=function(e){return function(t){return e.apply(null,t)}},Le.isAxiosError=function(e){return R.isObject(e)&&!0===e.isAxiosError},Le.mergeConfig=Ee,Le.AxiosHeaders=fe,Le.formToJSON=e=>re(R.isHTMLForm(e)?new FormData(e):e),Le.HttpStatusCode=Re,Le.default=Le,e.exports=Le}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var o=r[e]={exports:{}};return t[e].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var i=n(991);e.exports=i})()},742:(e,t)=>{"use strict";t.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,o=u(e),s=o[0],a=o[1],c=new i(function(e,t,r){return 3*(t+r)/4-r}(0,s,a)),l=0,h=a>0?s-4:s;for(r=0;r<h;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;2===a&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[l++]=255&t);1===a&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=16383,a=0,u=n-i;a<u;a+=s)o.push(c(e,a,a+s>u?u:a+s));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)r[s]=o[s],n[o.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,n){for(var i,o,s=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},764:(e,t,r)=>{"use strict";const n=r(742),i=r(645),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50;const s=2147483647;function a(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return h(e)}return c(e,t,r)}function c(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|g(e,t);let n=a(r);const i=n.write(e,t);i!==r&&(n=n.slice(0,i));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Y(e,Uint8Array)){const t=new Uint8Array(e);return d(t.buffer,t.byteOffset,t.byteLength)}return f(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Y(e,ArrayBuffer)||e&&Y(e.buffer,ArrayBuffer))return d(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(Y(e,SharedArrayBuffer)||e&&Y(e.buffer,SharedArrayBuffer)))return d(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return u.from(n,t,r);const i=function(e){if(u.isBuffer(e)){const t=0|p(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||J(e.length)?a(0):f(e);if("Buffer"===e.type&&Array.isArray(e.data))return f(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return l(e),a(e<0?0:0|p(e))}function f(e){const t=e.length<0?0:0|p(e.length),r=a(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function d(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,u.prototype),n}function p(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function g(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Y(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Q(e).length;default:if(i)return n?-1:V(e).length;t=(""+t).toLowerCase(),i=!0}}function _(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,r);case"utf8":case"utf-8":return O(this,t,r);case"ascii":return C(this,t,r);case"latin1":case"binary":return B(this,t,r);case"base64":return T(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function m(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),J(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,n,i){let o,s=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){let n=-1;for(o=r;o<a;o++)if(c(e,o)===c(t,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===u)return n*s}else-1!==n&&(o-=o-n),n=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){let r=!0;for(let n=0;n<u;n++)if(c(e,o+n)!==c(t,n)){r=!1;break}if(r)return o}return-1}function b(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;const o=t.length;let s;for(n>o/2&&(n=o/2),s=0;s<n;++s){const n=parseInt(t.substr(2*s,2),16);if(J(n))return s;e[r+s]=n}return s}function w(e,t,r,n){return X(V(t,e.length-r),e,r,n)}function k(e,t,r,n){return X(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function S(e,t,r,n){return X(Q(t),e,r,n)}function E(e,t,r,n){return X(function(e,t){let r,n,i;const o=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function T(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function O(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;for(;i<r;){const t=e[i];let o=null,s=t>239?4:t>223?3:t>191?2:1;if(i+s<=r){let r,n,a,u;switch(s){case 1:t<128&&(o=t);break;case 2:r=e[i+1],128==(192&r)&&(u=(31&t)<<6|63&r,u>127&&(o=u));break;case 3:r=e[i+1],n=e[i+2],128==(192&r)&&128==(192&n)&&(u=(15&t)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(u=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return function(e){const t=e.length;if(t<=x)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=x));return r}(n)}t.kMaxLength=s,u.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return function(e,t,r){return l(e),e<=0?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)}(e,t,r)},u.allocUnsafe=function(e){return h(e)},u.allocUnsafeSlow=function(e){return h(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(Y(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),Y(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=u.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(Y(t,Uint8Array))i+t.length>n.length?(u.isBuffer(t)||(t=u.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!u.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},u.byteLength=g,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)y(this,t,t+1);return this},u.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},u.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},u.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?O(this,0,e):_.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(e,t,r,n,i){if(Y(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0);const a=Math.min(o,s),c=this.slice(n,i),l=e.slice(t,r);for(let e=0;e<a;++e)if(c[e]!==l[e]){o=c[e],s=l[e];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return w(this,e,t,r);case"ascii":case"latin1":case"binary":return k(this,e,t,r);case"base64":return S(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const x=4096;function C(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function B(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function M(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=G[e[n]];return i}function I(e,t,r){const n=e.slice(t,r);let i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}function P(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function A(e,t,r,n,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function R(e,t,r,n,i){F(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,r}function L(e,t,r,n,i){F(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s>>=8,e[r+2]=s,s>>=8,e[r+1]=s,s>>=8,e[r]=s,r+8}function j(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function D(e,t,r,n,o){return t=+t,r>>>=0,o||j(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function U(e,t,r,n,o){return t=+t,r>>>=0,o||j(e,0,r,8),i.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readBigUInt64LE=K((function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),u.prototype.readBigUInt64BE=K((function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);let n=t,i=1,o=this[e+--n];for(;n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||P(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||P(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readBigInt64LE=K((function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),u.prototype.readBigInt64BE=K((function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||W(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),u.prototype.readFloatLE=function(e,t){return e>>>=0,t||P(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||P(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||P(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||P(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){A(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){A(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigUInt64LE=K((function(e,t=0){return R(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=K((function(e,t=0){return L(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);A(this,e,t,r,n-1,-n)}let i=0,o=1,s=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);A(this,e,t,r,n-1,-n)}let i=r-1,o=1,s=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||A(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigInt64LE=K((function(e,t=0){return R(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=K((function(e,t=0){return L(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(e,t,r){return D(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return D(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return U(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return U(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{const o=u.isBuffer(e)?e:u.from(e,n),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%s]}return this};const $={};function q(e,t,r){$[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function N(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function F(e,t,r,n,i,o){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new $.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){z(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||W(t,e.length-(r+1))}(n,i,o)}function z(e,t){if("number"!=typeof e)throw new $.ERR_INVALID_ARG_TYPE(t,"number",e)}function W(e,t,r){if(Math.floor(e)!==e)throw z(e,r),new $.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new $.ERR_BUFFER_OUT_OF_BOUNDS;throw new $.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}q("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),q("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),q("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=N(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=N(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const H=/[^+/0-9A-Za-z-_]/g;function V(e,t){let r;t=t||1/0;const n=e.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function Q(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function X(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function Y(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function J(e){return e!=e}const G=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function K(e){return"undefined"==typeof BigInt?Z:e}function Z(){throw new Error("BigInt not supported")}},487:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};e.exports=t},12:e=>{var t,r;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var r=[],n=0;n<e.length;n+=3)for(var i=e[n]<<16|e[n+1]<<8|e[n+2],o=0;o<4;o++)8*n+6*o<=8*e.length?r.push(t.charAt(i>>>6*(3-o)&63)):r.push("=");return r.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],n=0,i=0;n<e.length;i=++n%4)0!=i&&r.push((t.indexOf(e.charAt(n-1))&Math.pow(2,-2*i+8)-1)<<2*i|t.indexOf(e.charAt(n))>>>6-2*i);return r}},e.exports=r},484:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,r=36e5,n="millisecond",i="second",o="minute",s="hour",a="day",u="week",c="month",l="quarter",h="year",f="date",d="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},y=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},m={s:y,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),i=r%60;return(t<=0?"+":"-")+y(n,2,"0")+":"+y(i,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),i=t.clone().add(n,c),o=r-i<0,s=t.clone().add(n+(o?-1:1),c);return+(-(n+(r-i)/(o?i-s:s-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:h,w:u,d:a,D:f,h:s,m:o,s:i,ms:n,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},v="en",b={};b[v]=_;var w=function(e){return e instanceof T},k=function e(t,r,n){var i;if(!t)return v;if("string"==typeof t){var o=t.toLowerCase();b[o]&&(i=o),r&&(b[o]=r,i=o);var s=t.split("-");if(!i&&s.length>1)return e(s[0])}else{var a=t.name;b[a]=t,i=a}return!n&&i&&(v=i),i||!n&&v},S=function(e,t){if(w(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new T(r)},E=m;E.l=k,E.i=w,E.w=function(e,t){return S(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var T=function(){function _(e){this.$L=k(e.locale,null,!0),this.parse(e)}var y=_.prototype;return y.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(E.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(p);if(n){var i=n[2]-1||0,o=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},y.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},y.$utils=function(){return E},y.isValid=function(){return!(this.$d.toString()===d)},y.isSame=function(e,t){var r=S(e);return this.startOf(t)<=r&&r<=this.endOf(t)},y.isAfter=function(e,t){return S(e)<this.startOf(t)},y.isBefore=function(e,t){return this.endOf(t)<S(e)},y.$g=function(e,t,r){return E.u(e)?this[t]:this.set(r,e)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(e,t){var r=this,n=!!E.u(t)||t,l=E.p(e),d=function(e,t){var i=E.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return n?i:i.endOf(a)},p=function(e,t){return E.w(r.toDate()[e].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},g=this.$W,_=this.$M,y=this.$D,m="set"+(this.$u?"UTC":"");switch(l){case h:return n?d(1,0):d(31,11);case c:return n?d(1,_):d(0,_+1);case u:var v=this.$locale().weekStart||0,b=(g<v?g+7:g)-v;return d(n?y-b:y+(6-b),_);case a:case f:return p(m+"Hours",0);case s:return p(m+"Minutes",1);case o:return p(m+"Seconds",2);case i:return p(m+"Milliseconds",3);default:return this.clone()}},y.endOf=function(e){return this.startOf(e,!1)},y.$set=function(e,t){var r,u=E.p(e),l="set"+(this.$u?"UTC":""),d=(r={},r[a]=l+"Date",r[f]=l+"Date",r[c]=l+"Month",r[h]=l+"FullYear",r[s]=l+"Hours",r[o]=l+"Minutes",r[i]=l+"Seconds",r[n]=l+"Milliseconds",r)[u],p=u===a?this.$D+(t-this.$W):t;if(u===c||u===h){var g=this.clone().set(f,1);g.$d[d](p),g.init(),this.$d=g.set(f,Math.min(this.$D,g.daysInMonth())).$d}else d&&this.$d[d](p);return this.init(),this},y.set=function(e,t){return this.clone().$set(e,t)},y.get=function(e){return this[E.p(e)]()},y.add=function(n,l){var f,d=this;n=Number(n);var p=E.p(l),g=function(e){var t=S(d);return E.w(t.date(t.date()+Math.round(e*n)),d)};if(p===c)return this.set(c,this.$M+n);if(p===h)return this.set(h,this.$y+n);if(p===a)return g(1);if(p===u)return g(7);var _=(f={},f[o]=t,f[s]=r,f[i]=e,f)[p]||1,y=this.$d.getTime()+n*_;return E.w(y,this)},y.subtract=function(e,t){return this.add(-1*e,t)},y.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||d;var n=e||"YYYY-MM-DDTHH:mm:ssZ",i=E.z(this),o=this.$H,s=this.$m,a=this.$M,u=r.weekdays,c=r.months,l=function(e,r,i,o){return e&&(e[r]||e(t,n))||i[r].slice(0,o)},h=function(e){return E.s(o%12||12,e,"0")},f=r.meridiem||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:E.s(a+1,2,"0"),MMM:l(r.monthsShort,a,c,3),MMMM:l(c,a),D:this.$D,DD:E.s(this.$D,2,"0"),d:String(this.$W),dd:l(r.weekdaysMin,this.$W,u,2),ddd:l(r.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(o),HH:E.s(o,2,"0"),h:h(1),hh:h(2),a:f(o,s,!0),A:f(o,s,!1),m:String(s),mm:E.s(s,2,"0"),s:String(this.$s),ss:E.s(this.$s,2,"0"),SSS:E.s(this.$ms,3,"0"),Z:i};return n.replace(g,(function(e,t){return t||p[e]||i.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(n,f,d){var p,g=E.p(f),_=S(n),y=(_.utcOffset()-this.utcOffset())*t,m=this-_,v=E.m(this,_);return v=(p={},p[h]=v/12,p[c]=v,p[l]=v/3,p[u]=(m-y)/6048e5,p[a]=(m-y)/864e5,p[s]=m/r,p[o]=m/t,p[i]=m/e,p)[g]||m,d?v:E.a(v)},y.daysInMonth=function(){return this.endOf(c).$D},y.$locale=function(){return b[this.$L]},y.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=k(e,t,!0);return n&&(r.$L=n),r},y.clone=function(){return E.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},_}(),O=T.prototype;return S.prototype=O,[["$ms",n],["$s",i],["$m",o],["$H",s],["$W",a],["$M",c],["$y",h],["$D",f]].forEach((function(e){O[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),S.extend=function(e,t){return e.$i||(e(t,T,S),e.$i=!0),S},S.locale=k,S.isDayjs=w,S.unix=function(e){return S(1e3*e)},S.en=b[v],S.Ls=b,S.p={},S}()},729:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(e,t,n,o,s){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new i(n,o||e,s),u=r?r+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],a]:e._events[u].push(a):(e._events[u]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,i,o,s){var a=r?r+e:e;if(!this._events[a])return!1;var u,c,l=this._events[a],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,o),!0;case 6:return l.fn.call(l.context,t,n,i,o,s),!0}for(c=1,u=new Array(h-1);c<h;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var f,d=l.length;for(c=0;c<d;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),h){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;case 4:l[c].fn.call(l[c].context,t,n,i);break;default:if(!u)for(f=1,u=new Array(h-1);f<h;f++)u[f-1]=arguments[f];l[c].fn.apply(l[c].context,u)}}return!0},a.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return o(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,i){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||i&&!a.once||n&&a.context!==n||s(this,o);else{for(var u=0,c=[],l=a.length;u<l;u++)(a[u].fn!==t||i&&!a[u].once||n&&a[u].context!==n)&&c.push(a[u]);c.length?this._events[o]=1===c.length?c[0]:c:s(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a},645:(e,t)=>{t.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,l=-7,h=r?i-1:0,f=r?-1:1,d=e[t+h];for(h+=f,o=d&(1<<-l)-1,d>>=-l,l+=a;l>0;o=256*o+e[t+h],h+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+e[t+h],h+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=c}return(d?-1:1)*s*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(t*u-1)*Math.pow(2,i),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;e[r+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[r+d]=255&s,d+=p,s/=256,c-=8);e[r+d-p]|=128*g}},738:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},568:(e,t,r)=>{var n,i,o,s,a;n=r(12),i=r(487).utf8,o=r(738),s=r(487).bin,(a=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?s.stringToBytes(e):i.stringToBytes(e):o(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var r=n.bytesToWords(e),u=8*e.length,c=1732584193,l=-271733879,h=-1732584194,f=271733878,d=0;d<r.length;d++)r[d]=16711935&(r[d]<<8|r[d]>>>24)|4278255360&(r[d]<<24|r[d]>>>8);r[u>>>5]|=128<<u%32,r[14+(u+64>>>9<<4)]=u;var p=a._ff,g=a._gg,_=a._hh,y=a._ii;for(d=0;d<r.length;d+=16){var m=c,v=l,b=h,w=f;c=p(c,l,h,f,r[d+0],7,-680876936),f=p(f,c,l,h,r[d+1],12,-389564586),h=p(h,f,c,l,r[d+2],17,606105819),l=p(l,h,f,c,r[d+3],22,-1044525330),c=p(c,l,h,f,r[d+4],7,-176418897),f=p(f,c,l,h,r[d+5],12,1200080426),h=p(h,f,c,l,r[d+6],17,-1473231341),l=p(l,h,f,c,r[d+7],22,-45705983),c=p(c,l,h,f,r[d+8],7,1770035416),f=p(f,c,l,h,r[d+9],12,-1958414417),h=p(h,f,c,l,r[d+10],17,-42063),l=p(l,h,f,c,r[d+11],22,-1990404162),c=p(c,l,h,f,r[d+12],7,1804603682),f=p(f,c,l,h,r[d+13],12,-40341101),h=p(h,f,c,l,r[d+14],17,-1502002290),c=g(c,l=p(l,h,f,c,r[d+15],22,1236535329),h,f,r[d+1],5,-165796510),f=g(f,c,l,h,r[d+6],9,-1069501632),h=g(h,f,c,l,r[d+11],14,643717713),l=g(l,h,f,c,r[d+0],20,-373897302),c=g(c,l,h,f,r[d+5],5,-701558691),f=g(f,c,l,h,r[d+10],9,38016083),h=g(h,f,c,l,r[d+15],14,-660478335),l=g(l,h,f,c,r[d+4],20,-405537848),c=g(c,l,h,f,r[d+9],5,568446438),f=g(f,c,l,h,r[d+14],9,-1019803690),h=g(h,f,c,l,r[d+3],14,-187363961),l=g(l,h,f,c,r[d+8],20,1163531501),c=g(c,l,h,f,r[d+13],5,-1444681467),f=g(f,c,l,h,r[d+2],9,-51403784),h=g(h,f,c,l,r[d+7],14,1735328473),c=_(c,l=g(l,h,f,c,r[d+12],20,-1926607734),h,f,r[d+5],4,-378558),f=_(f,c,l,h,r[d+8],11,-2022574463),h=_(h,f,c,l,r[d+11],16,1839030562),l=_(l,h,f,c,r[d+14],23,-35309556),c=_(c,l,h,f,r[d+1],4,-1530992060),f=_(f,c,l,h,r[d+4],11,1272893353),h=_(h,f,c,l,r[d+7],16,-155497632),l=_(l,h,f,c,r[d+10],23,-1094730640),c=_(c,l,h,f,r[d+13],4,681279174),f=_(f,c,l,h,r[d+0],11,-358537222),h=_(h,f,c,l,r[d+3],16,-722521979),l=_(l,h,f,c,r[d+6],23,76029189),c=_(c,l,h,f,r[d+9],4,-640364487),f=_(f,c,l,h,r[d+12],11,-421815835),h=_(h,f,c,l,r[d+15],16,530742520),c=y(c,l=_(l,h,f,c,r[d+2],23,-995338651),h,f,r[d+0],6,-198630844),f=y(f,c,l,h,r[d+7],10,1126891415),h=y(h,f,c,l,r[d+14],15,-1416354905),l=y(l,h,f,c,r[d+5],21,-57434055),c=y(c,l,h,f,r[d+12],6,1700485571),f=y(f,c,l,h,r[d+3],10,-1894986606),h=y(h,f,c,l,r[d+10],15,-1051523),l=y(l,h,f,c,r[d+1],21,-2054922799),c=y(c,l,h,f,r[d+8],6,1873313359),f=y(f,c,l,h,r[d+15],10,-30611744),h=y(h,f,c,l,r[d+6],15,-1560198380),l=y(l,h,f,c,r[d+13],21,1309151649),c=y(c,l,h,f,r[d+4],6,-145523070),f=y(f,c,l,h,r[d+11],10,-1120210379),h=y(h,f,c,l,r[d+2],15,718787259),l=y(l,h,f,c,r[d+9],21,-343485551),c=c+m>>>0,l=l+v>>>0,h=h+b>>>0,f=f+w>>>0}return n.endian([c,l,h,f])})._ff=function(e,t,r,n,i,o,s){var a=e+(t&r|~t&n)+(i>>>0)+s;return(a<<o|a>>>32-o)+t},a._gg=function(e,t,r,n,i,o,s){var a=e+(t&n|r&~n)+(i>>>0)+s;return(a<<o|a>>>32-o)+t},a._hh=function(e,t,r,n,i,o,s){var a=e+(t^r^n)+(i>>>0)+s;return(a<<o|a>>>32-o)+t},a._ii=function(e,t,r,n,i,o,s){var a=e+(r^(t|~n))+(i>>>0)+s;return(a<<o|a>>>32-o)+t},a._blocksize=16,a._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var r=n.wordsToBytes(a(e,t));return t&&t.asBytes?r:t&&t.asString?s.bytesToString(r):n.bytesToHex(r)}},891:e=>{"use strict";var t,r={DEBUG:!1,LIB_VERSION:"2.45.0"};if("undefined"==typeof window){var n={hostname:""};t={navigator:{userAgent:""},document:{location:n,referrer:""},screen:{width:0,height:0},location:n}}else t=window;var i,o,s,a,u,c,l,h,f,d,p,g=Array.prototype,_=Function.prototype,y=Object.prototype,m=g.slice,v=y.toString,b=y.hasOwnProperty,w=t.console,k=t.navigator,S=t.document,E=t.opera,T=t.screen,O=k.userAgent,x=_.bind,C=g.forEach,B=g.indexOf,M=g.map,I=Array.isArray,P={},A={trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},R={log:function(){if(r.DEBUG&&!A.isUndefined(w)&&w)try{w.log.apply(w,arguments)}catch(e){A.each(arguments,(function(e){w.log(e)}))}},warn:function(){if(r.DEBUG&&!A.isUndefined(w)&&w){var e=["Mixpanel warning:"].concat(A.toArray(arguments));try{w.warn.apply(w,e)}catch(t){A.each(e,(function(e){w.warn(e)}))}}},error:function(){if(r.DEBUG&&!A.isUndefined(w)&&w){var e=["Mixpanel error:"].concat(A.toArray(arguments));try{w.error.apply(w,e)}catch(t){A.each(e,(function(e){w.error(e)}))}}},critical:function(){if(!A.isUndefined(w)&&w){var e=["Mixpanel error:"].concat(A.toArray(arguments));try{w.error.apply(w,e)}catch(t){A.each(e,(function(e){w.error(e)}))}}}},L=function(e,t){return function(){return arguments[0]="["+t+"] "+arguments[0],e.apply(R,arguments)}},j=function(e){return{log:L(R.log,e),error:L(R.error,e),critical:L(R.critical,e)}};A.bind=function(e,t){var r,n;if(x&&e.bind===x)return x.apply(e,m.call(arguments,1));if(!A.isFunction(e))throw new TypeError;return r=m.call(arguments,2),n=function(){if(!(this instanceof n))return e.apply(t,r.concat(m.call(arguments)));var i={};i.prototype=e.prototype;var o=new i;i.prototype=null;var s=e.apply(o,r.concat(m.call(arguments)));return Object(s)===s?s:o},n},A.each=function(e,t,r){if(null!=e)if(C&&e.forEach===C)e.forEach(t,r);else if(e.length===+e.length){for(var n=0,i=e.length;n<i;n++)if(n in e&&t.call(r,e[n],n,e)===P)return}else for(var o in e)if(b.call(e,o)&&t.call(r,e[o],o,e)===P)return},A.extend=function(e){return A.each(m.call(arguments,1),(function(t){for(var r in t)void 0!==t[r]&&(e[r]=t[r])})),e},A.isArray=I||function(e){return"[object Array]"===v.call(e)},A.isFunction=function(e){try{return/^\s*\bfunction\b/.test(e)}catch(e){return!1}},A.isArguments=function(e){return!(!e||!b.call(e,"callee"))},A.toArray=function(e){return e?e.toArray?e.toArray():A.isArray(e)||A.isArguments(e)?m.call(e):A.values(e):[]},A.map=function(e,t,r){if(M&&e.map===M)return e.map(t,r);var n=[];return A.each(e,(function(e){n.push(t.call(r,e))})),n},A.keys=function(e){var t=[];return null===e||A.each(e,(function(e,r){t[t.length]=r})),t},A.values=function(e){var t=[];return null===e||A.each(e,(function(e){t[t.length]=e})),t},A.include=function(e,t){var r=!1;return null===e?r:B&&e.indexOf===B?-1!=e.indexOf(t):(A.each(e,(function(e){if(r||(r=e===t))return P})),r)},A.includes=function(e,t){return-1!==e.indexOf(t)},A.inherit=function(e,t){return e.prototype=new t,e.prototype.constructor=e,e.superclass=t.prototype,e},A.isObject=function(e){return e===Object(e)&&!A.isArray(e)},A.isEmptyObject=function(e){if(A.isObject(e)){for(var t in e)if(b.call(e,t))return!1;return!0}return!1},A.isUndefined=function(e){return void 0===e},A.isString=function(e){return"[object String]"==v.call(e)},A.isDate=function(e){return"[object Date]"==v.call(e)},A.isNumber=function(e){return"[object Number]"==v.call(e)},A.isElement=function(e){return!(!e||1!==e.nodeType)},A.encodeDates=function(e){return A.each(e,(function(t,r){A.isDate(t)?e[r]=A.formatDate(t):A.isObject(t)&&(e[r]=A.encodeDates(t))})),e},A.timestamp=function(){return Date.now=Date.now||function(){return+new Date},Date.now()},A.formatDate=function(e){function t(e){return e<10?"0"+e:e}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())},A.strip_empty_properties=function(e){var t={};return A.each(e,(function(e,r){A.isString(e)&&e.length>0&&(t[r]=e)})),t},A.truncate=function(e,t){var r;return"string"==typeof e?r=e.slice(0,t):A.isArray(e)?(r=[],A.each(e,(function(e){r.push(A.truncate(e,t))}))):A.isObject(e)?(r={},A.each(e,(function(e,n){r[n]=A.truncate(e,t)}))):r=e,r},A.JSONEncode=function(e){var t=function(e){var t=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return t.lastIndex=0,t.test(e)?'"'+e.replace(t,(function(e){var t=r[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'},r=function(e,n){var i="",o=0,s="",a="",u=0,c=i,l=[],h=n[e];switch(h&&"object"==typeof h&&"function"==typeof h.toJSON&&(h=h.toJSON(e)),typeof h){case"string":return t(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h)return"null";if(i+="    ",l=[],"[object Array]"===v.apply(h)){for(u=h.length,o=0;o<u;o+=1)l[o]=r(o,h)||"null";return a=0===l.length?"[]":i?"[\n"+i+l.join(",\n"+i)+"\n"+c+"]":"["+l.join(",")+"]",i=c,a}for(s in h)b.call(h,s)&&(a=r(s,h))&&l.push(t(s)+(i?": ":":")+a);return a=0===l.length?"{}":i?"{"+l.join(",")+c+"}":"{"+l.join(",")+"}",i=c,a}};return r("",{"":e})},A.JSONDecode=(u={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},c=function(e){var t=new SyntaxError(e);throw t.at=i,t.text=s,t},l=function(e){return e&&e!==o&&c("Expected '"+e+"' instead of '"+o+"'"),o=s.charAt(i),i+=1,o},h=function(){var e,t="";for("-"===o&&(t="-",l("-"));o>="0"&&o<="9";)t+=o,l();if("."===o)for(t+=".";l()&&o>="0"&&o<="9";)t+=o;if("e"===o||"E"===o)for(t+=o,l(),"-"!==o&&"+"!==o||(t+=o,l());o>="0"&&o<="9";)t+=o,l();if(e=+t,isFinite(e))return e;c("Bad number")},f=function(){var e,t,r,n="";if('"'===o)for(;l();){if('"'===o)return l(),n;if("\\"===o)if(l(),"u"===o){for(r=0,t=0;t<4&&(e=parseInt(l(),16),isFinite(e));t+=1)r=16*r+e;n+=String.fromCharCode(r)}else{if("string"!=typeof u[o])break;n+=u[o]}else n+=o}c("Bad string")},d=function(){for(;o&&o<=" ";)l()},a=function(){switch(d(),o){case"{":return function(){var e,t={};if("{"===o){if(l("{"),d(),"}"===o)return l("}"),t;for(;o;){if(e=f(),d(),l(":"),Object.hasOwnProperty.call(t,e)&&c('Duplicate key "'+e+'"'),t[e]=a(),d(),"}"===o)return l("}"),t;l(","),d()}}c("Bad object")}();case"[":return function(){var e=[];if("["===o){if(l("["),d(),"]"===o)return l("]"),e;for(;o;){if(e.push(a()),d(),"]"===o)return l("]"),e;l(","),d()}}c("Bad array")}();case'"':return f();case"-":return h();default:return o>="0"&&o<="9"?h():function(){switch(o){case"t":return l("t"),l("r"),l("u"),l("e"),!0;case"f":return l("f"),l("a"),l("l"),l("s"),l("e"),!1;case"n":return l("n"),l("u"),l("l"),l("l"),null}c('Unexpected "'+o+'"')}()}},function(e){var t;return s=e,i=0,o=" ",t=a(),d(),o&&c("Syntax error"),t}),A.base64Encode=function(e){var t,r,n,i,o,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=0,u=0,c="",l=[];if(!e)return e;e=A.utf8Encode(e);do{t=(o=e.charCodeAt(a++)<<16|e.charCodeAt(a++)<<8|e.charCodeAt(a++))>>18&63,r=o>>12&63,n=o>>6&63,i=63&o,l[u++]=s.charAt(t)+s.charAt(r)+s.charAt(n)+s.charAt(i)}while(a<e.length);switch(c=l.join(""),e.length%3){case 1:c=c.slice(0,-2)+"==";break;case 2:c=c.slice(0,-1)+"="}return c},A.utf8Encode=function(e){var t,r,n,i,o="";for(t=r=0,n=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,i=0;i<n;i++){var s=e.charCodeAt(i),a=null;s<128?r++:a=s>127&&s<2048?String.fromCharCode(s>>6|192,63&s|128):String.fromCharCode(s>>12|224,s>>6&63|128,63&s|128),null!==a&&(r>t&&(o+=e.substring(t,r)),o+=a,t=r=i+1)}return r>t&&(o+=e.substring(t,e.length)),o},A.UUID=(p=function(){for(var e=1*new Date,t=0;e==1*new Date;)t++;return e.toString(16)+t.toString(16)},function(){var e=(T.height*T.width).toString(16);return p()+"-"+Math.random().toString(16).replace(".","")+"-"+function(){var e,t,r=O,n=[],i=0;function o(e,t){var r,i=0;for(r=0;r<t.length;r++)i|=n[r]<<8*r;return e^i}for(e=0;e<r.length;e++)t=r.charCodeAt(e),n.unshift(255&t),n.length>=4&&(i=o(i,n),n=[]);return n.length>0&&(i=o(i,n)),i.toString(16)}()+"-"+e+"-"+p()});var D=["ahrefsbot","baiduspider","bingbot","bingpreview","facebookexternal","petalbot","pinterest","screaming frog","yahoo! slurp","yandexbot","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google"];A.isBlockedUA=function(e){var t;for(e=e.toLowerCase(),t=0;t<D.length;t++)if(-1!==e.indexOf(D[t]))return!0;return!1},A.HTTPBuildQuery=function(e,t){var r,n,i=[];return A.isUndefined(t)&&(t="&"),A.each(e,(function(e,t){r=encodeURIComponent(e.toString()),n=encodeURIComponent(t),i[i.length]=n+"="+r})),i.join(t)},A.getQueryParam=function(e,t){t=t.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);if(null===r||r&&"string"!=typeof r[1]&&r[1].length)return"";var n=r[1];try{n=decodeURIComponent(n)}catch(e){R.error("Skipping decoding for malformed query param: "+n)}return n.replace(/\+/g," ")},A.cookie={get:function(e){for(var t=e+"=",r=S.cookie.split(";"),n=0;n<r.length;n++){for(var i=r[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return decodeURIComponent(i.substring(t.length,i.length))}return null},parse:function(e){var t;try{t=A.JSONDecode(A.cookie.get(e))||{}}catch(e){}return t},set_seconds:function(e,t,r,n,i,o,s){var a="",u="",c="";if(s)a="; domain="+s;else if(n){var l=W(S.location.hostname);a=l?"; domain=."+l:""}if(r){var h=new Date;h.setTime(h.getTime()+1e3*r),u="; expires="+h.toGMTString()}o&&(i=!0,c="; SameSite=None"),i&&(c+="; secure"),S.cookie=e+"="+encodeURIComponent(t)+u+"; path=/"+a+c},set:function(e,t,r,n,i,o,s){var a="",u="",c="";if(s)a="; domain="+s;else if(n){var l=W(S.location.hostname);a=l?"; domain=."+l:""}if(r){var h=new Date;h.setTime(h.getTime()+24*r*60*60*1e3),u="; expires="+h.toGMTString()}o&&(i=!0,c="; SameSite=None"),i&&(c+="; secure");var f=e+"="+encodeURIComponent(t)+u+"; path=/"+a+c;return S.cookie=f,f},remove:function(e,t,r){A.cookie.set(e,"",-1,t,!1,!1,r)}};var U=null,$=function(e,t){if(null!==U&&!t)return U;var r=!0;try{e=e||window.localStorage;var n="__mplss_"+N(8);e.setItem(n,"xyz"),"xyz"!==e.getItem(n)&&(r=!1),e.removeItem(n)}catch(e){r=!1}return U=r,r};A.localStorage={is_supported:function(e){var t=$(null,e);return t||R.error("localStorage unsupported; falling back to cookie store"),t},error:function(e){R.error("localStorage error: "+e)},get:function(e){try{return window.localStorage.getItem(e)}catch(e){A.localStorage.error(e)}return null},parse:function(e){try{return A.JSONDecode(A.localStorage.get(e))||{}}catch(e){}return null},set:function(e,t){try{window.localStorage.setItem(e,t)}catch(e){A.localStorage.error(e)}},remove:function(e){try{window.localStorage.removeItem(e)}catch(e){A.localStorage.error(e)}}},A.register_event=function(){function e(t){return t&&(t.preventDefault=e.preventDefault,t.stopPropagation=e.stopPropagation),t}return e.preventDefault=function(){this.returnValue=!1},e.stopPropagation=function(){this.cancelBubble=!0},function(t,r,n,i,o){if(t)if(t.addEventListener&&!i)t.addEventListener(r,n,!!o);else{var s="on"+r,a=t[s];t[s]=function(t,r,n){return function(i){if(i=i||e(window.event)){var o,s,a=!0;return A.isFunction(n)&&(o=n(i)),s=r.call(t,i),!1!==o&&!1!==s||(a=!1),a}}}(t,n,a)}else R.error("No valid element provided to register_event")}}();var q=new RegExp('^(\\w*)\\[(\\w+)([=~\\|\\^\\$\\*]?)=?"?([^\\]"]*)"?\\]$');A.dom_query=function(){function e(e){return e.all?e.all:e.getElementsByTagName("*")}var t=/[\t\r\n]/g;function r(e,r){var n=" "+r+" ";return(" "+e.className+" ").replace(t," ").indexOf(n)>=0}function n(t){if(!S.getElementsByTagName)return[];var n,i,o,s,a,u,c,l,h,f,d=t.split(" "),p=[S];for(u=0;u<d.length;u++)if((n=d[u].replace(/^\s+/,"").replace(/\s+$/,"")).indexOf("#")>-1){o=(i=n.split("#"))[0];var g=i[1],_=S.getElementById(g);if(!_||o&&_.nodeName.toLowerCase()!=o)return[];p=[_]}else if(n.indexOf(".")>-1){o=(i=n.split("."))[0];var y=i[1];for(o||(o="*"),s=[],a=0,c=0;c<p.length;c++)for(h="*"==o?e(p[c]):p[c].getElementsByTagName(o),l=0;l<h.length;l++)s[a++]=h[l];for(p=[],f=0,c=0;c<s.length;c++)s[c].className&&A.isString(s[c].className)&&r(s[c],y)&&(p[f++]=s[c])}else{var m=n.match(q);if(m){o=m[1];var v,b=m[2],w=m[3],k=m[4];for(o||(o="*"),s=[],a=0,c=0;c<p.length;c++)for(h="*"==o?e(p[c]):p[c].getElementsByTagName(o),l=0;l<h.length;l++)s[a++]=h[l];switch(p=[],f=0,w){case"=":v=function(e){return e.getAttribute(b)==k};break;case"~":v=function(e){return e.getAttribute(b).match(new RegExp("\\b"+k+"\\b"))};break;case"|":v=function(e){return e.getAttribute(b).match(new RegExp("^"+k+"-?"))};break;case"^":v=function(e){return 0===e.getAttribute(b).indexOf(k)};break;case"$":v=function(e){return e.getAttribute(b).lastIndexOf(k)==e.getAttribute(b).length-k.length};break;case"*":v=function(e){return e.getAttribute(b).indexOf(k)>-1};break;default:v=function(e){return e.getAttribute(b)}}for(p=[],f=0,c=0;c<s.length;c++)v(s[c])&&(p[f++]=s[c])}else{for(o=n,s=[],a=0,c=0;c<p.length;c++)for(h=p[c].getElementsByTagName(o),l=0;l<h.length;l++)s[a++]=h[l];p=s}}return p}return function(e){return A.isElement(e)?[e]:A.isObject(e)&&!A.isUndefined(e.length)?e:n.call(this,e)}}(),A.info={campaignParams:function(){var e="utm_source utm_medium utm_campaign utm_content utm_term".split(" "),t="",r={};return A.each(e,(function(e){(t=A.getQueryParam(S.URL,e)).length&&(r[e]=t)})),r},searchEngine:function(e){return 0===e.search("https?://(.*)google.([^/?]*)")?"google":0===e.search("https?://(.*)bing.com")?"bing":0===e.search("https?://(.*)yahoo.com")?"yahoo":0===e.search("https?://(.*)duckduckgo.com")?"duckduckgo":null},searchInfo:function(e){var t=A.info.searchEngine(e),r="yahoo"!=t?"q":"p",n={};if(null!==t){n.$search_engine=t;var i=A.getQueryParam(e,r);i.length&&(n.mp_keyword=i)}return n},browser:function(e,t,r){return t=t||"",r||A.includes(e," OPR/")?A.includes(e,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":A.includes(e,"IEMobile")||A.includes(e,"WPDesktop")?"Internet Explorer Mobile":A.includes(e,"SamsungBrowser/")?"Samsung Internet":A.includes(e,"Edge")||A.includes(e,"Edg/")?"Microsoft Edge":A.includes(e,"FBIOS")?"Facebook Mobile":A.includes(e,"Chrome")?"Chrome":A.includes(e,"CriOS")?"Chrome iOS":A.includes(e,"UCWEB")||A.includes(e,"UCBrowser")?"UC Browser":A.includes(e,"FxiOS")?"Firefox iOS":A.includes(t,"Apple")?A.includes(e,"Mobile")?"Mobile Safari":"Safari":A.includes(e,"Android")?"Android Mobile":A.includes(e,"Konqueror")?"Konqueror":A.includes(e,"Firefox")?"Firefox":A.includes(e,"MSIE")||A.includes(e,"Trident/")?"Internet Explorer":A.includes(e,"Gecko")?"Mozilla":""},browserVersion:function(e,t,r){var n={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge?\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/CriOS\/(\d+(\.\d+)?)/,"UC Browser":/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,"Firefox iOS":/FxiOS\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,"Android Mobile":/android\s(\d+(\.\d+)?)/,"Samsung Internet":/SamsungBrowser\/(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/}[A.info.browser(e,t,r)];if(void 0===n)return null;var i=e.match(n);return i?parseFloat(i[i.length-2]):null},os:function(){var e=O;return/Windows/i.test(e)?/Phone/.test(e)||/WPDesktop/.test(e)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(e)?"iOS":/Android/.test(e)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Mac/i.test(e)?"Mac OS X":/Linux/.test(e)?"Linux":/CrOS/.test(e)?"Chrome OS":""},device:function(e){return/Windows Phone/i.test(e)||/WPDesktop/.test(e)?"Windows Phone":/iPad/.test(e)?"iPad":/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Android/.test(e)?"Android":""},referringDomain:function(e){var t=e.split("/");return t.length>=3?t[2]:""},properties:function(){return A.extend(A.strip_empty_properties({$os:A.info.os(),$browser:A.info.browser(O,k.vendor,E),$referrer:S.referrer,$referring_domain:A.info.referringDomain(S.referrer),$device:A.info.device(O)}),{$current_url:t.location.href,$browser_version:A.info.browserVersion(O,k.vendor,E),$screen_height:T.height,$screen_width:T.width,mp_lib:"web",$lib_version:r.LIB_VERSION,$insert_id:N(),time:A.timestamp()/1e3})},people_properties:function(){return A.extend(A.strip_empty_properties({$os:A.info.os(),$browser:A.info.browser(O,k.vendor,E)}),{$browser_version:A.info.browserVersion(O,k.vendor,E)})},pageviewInfo:function(e){return A.strip_empty_properties({mp_page:e,mp_referrer:S.referrer,mp_browser:A.info.browser(O,k.vendor,E),mp_platform:A.info.os()})}};var N=function(e){var t=Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10);return e?t.substring(0,e):t},F=/[a-z0-9][a-z0-9-]*\.[a-z]+$/i,z=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,W=function(e){var t=z,r=e.split("."),n=r[r.length-1];(n.length>4||"com"===n||"org"===n)&&(t=F);var i=e.match(t);return i?i[0]:""},H=null,V=null;"undefined"!=typeof JSON&&(H=JSON.stringify,V=JSON.parse),H=H||A.JSONEncode,V=V||A.JSONDecode,A.toArray=A.toArray,A.isObject=A.isObject,A.JSONEncode=A.JSONEncode,A.JSONDecode=A.JSONDecode,A.isBlockedUA=A.isBlockedUA,A.isEmptyObject=A.isEmptyObject,A.info=A.info,A.info.device=A.info.device,A.info.browser=A.info.browser,A.info.browserVersion=A.info.browserVersion,A.info.properties=A.info.properties;var Q=function(){};Q.prototype.create_properties=function(){},Q.prototype.event_handler=function(){},Q.prototype.after_track_handler=function(){},Q.prototype.init=function(e){return this.mp=e,this},Q.prototype.track=function(e,t,r,n){var i=this,o=A.dom_query(e);if(0!==o.length)return A.each(o,(function(e){A.register_event(e,this.override_event,(function(e){var o={},s=i.create_properties(r,this),a=i.mp.get_config("track_links_timeout");i.event_handler(e,this,o),window.setTimeout(i.track_callback(n,s,o,!0),a),i.mp.track(t,s,i.track_callback(n,s,o))}))}),this),!0;R.error("The DOM query ("+e+") returned 0 elements")},Q.prototype.track_callback=function(e,t,r,n){n=n||!1;var i=this;return function(){r.callback_fired||(r.callback_fired=!0,e&&!1===e(n,t)||i.after_track_handler(t,r,n))}},Q.prototype.create_properties=function(e,t){return"function"==typeof e?e(t):A.extend({},e)};var X=function(){this.override_event="click"};A.inherit(X,Q),X.prototype.create_properties=function(e,t){var r=X.superclass.create_properties.apply(this,arguments);return t.href&&(r.url=t.href),r},X.prototype.event_handler=function(e,t,r){r.new_tab=2===e.which||e.metaKey||e.ctrlKey||"_blank"===t.target,r.href=t.href,r.new_tab||e.preventDefault()},X.prototype.after_track_handler=function(e,t){t.new_tab||setTimeout((function(){window.location=t.href}),0)};var Y=function(){this.override_event="submit"};A.inherit(Y,Q),Y.prototype.event_handler=function(e,t,r){r.element=t,e.preventDefault()},Y.prototype.after_track_handler=function(e,t){setTimeout((function(){t.element.submit()}),0)};var J=j("lock"),G=function(e,t){t=t||{},this.storageKey=e,this.storage=t.storage||window.localStorage,this.pollIntervalMS=t.pollIntervalMS||100,this.timeoutMS=t.timeoutMS||2e3};G.prototype.withLock=function(e,t,r){r||"function"==typeof t||(r=t,t=null);var n=r||(new Date).getTime()+"|"+Math.random(),i=(new Date).getTime(),o=this.storageKey,s=this.pollIntervalMS,a=this.timeoutMS,u=this.storage,c=o+":X",l=o+":Y",h=o+":Z",f=function(e){t&&t(e)},d=function(e){if((new Date).getTime()-i>a)return J.error("Timeout waiting for mutex on "+o+"; clearing lock. ["+n+"]"),u.removeItem(h),u.removeItem(l),void _();setTimeout((function(){try{e()}catch(e){f(e)}}),s*(Math.random()+.1))},p=function(e,t){e()?t():d((function(){p(e,t)}))},g=function(){var e=u.getItem(l);if(e&&e!==n)return!1;if(u.setItem(l,n),u.getItem(l)===n)return!0;if(!$(u,!0))throw new Error("localStorage support dropped while acquiring lock");return!1},_=function(){u.setItem(c,n),p(g,(function(){u.getItem(c)!==n?d((function(){u.getItem(l)===n?p((function(){return!u.getItem(h)}),y):_()})):y()}))},y=function(){u.setItem(h,"1");try{e()}finally{u.removeItem(h),u.getItem(l)===n&&u.removeItem(l),u.getItem(c)===n&&u.removeItem(c)}};try{if(!$(u,!0))throw new Error("localStorage support check failed");_()}catch(e){f(e)}};var K=j("batch"),Z=function(e,t){t=t||{},this.storageKey=e,this.storage=t.storage||window.localStorage,this.reportError=t.errorReporter||A.bind(K.error,K),this.lock=new G(e,{storage:this.storage}),this.pid=t.pid||null,this.memQueue=[]};Z.prototype.enqueue=function(e,t,r){var n={id:N(),flushAfter:(new Date).getTime()+2*t,payload:e};this.lock.withLock(A.bind((function(){var t;try{var i=this.readFromStorage();i.push(n),(t=this.saveToStorage(i))&&this.memQueue.push(n)}catch(r){this.reportError("Error enqueueing item",e),t=!1}r&&r(t)}),this),A.bind((function(e){this.reportError("Error acquiring storage lock",e),r&&r(!1)}),this),this.pid)},Z.prototype.fillBatch=function(e){var t=this.memQueue.slice(0,e);if(t.length<e){var r=this.readFromStorage();if(r.length){var n={};A.each(t,(function(e){n[e.id]=!0}));for(var i=0;i<r.length;i++){var o=r[i];if((new Date).getTime()>o.flushAfter&&!n[o.id]&&(o.orphaned=!0,t.push(o),t.length>=e))break}}}return t};var ee=function(e,t){var r=[];return A.each(e,(function(e){e.id&&!t[e.id]&&r.push(e)})),r};Z.prototype.removeItemsByID=function(e,t){var r={};A.each(e,(function(e){r[e]=!0})),this.memQueue=ee(this.memQueue,r);var n=A.bind((function(){var t;try{var n=this.readFromStorage();if(n=ee(n,r),t=this.saveToStorage(n)){n=this.readFromStorage();for(var i=0;i<n.length;i++){var o=n[i];if(o.id&&r[o.id])return this.reportError("Item not removed from storage"),!1}}}catch(r){this.reportError("Error removing items",e),t=!1}return t}),this);this.lock.withLock((function(){var e=n();t&&t(e)}),A.bind((function(e){var r=!1;if(this.reportError("Error acquiring storage lock",e),!$(this.storage,!0)&&!(r=n()))try{this.storage.removeItem(this.storageKey)}catch(e){this.reportError("Error clearing queue",e)}t&&t(r)}),this),this.pid)};var te=function(e,t){var r=[];return A.each(e,(function(e){var n=e.id;if(n in t){var i=t[n];null!==i&&(e.payload=i,r.push(e))}else r.push(e)})),r};Z.prototype.updatePayloads=function(e,t){this.memQueue=te(this.memQueue,e),this.lock.withLock(A.bind((function(){var r;try{var n=this.readFromStorage();n=te(n,e),r=this.saveToStorage(n)}catch(t){this.reportError("Error updating items",e),r=!1}t&&t(r)}),this),A.bind((function(e){this.reportError("Error acquiring storage lock",e),t&&t(!1)}),this),this.pid)},Z.prototype.readFromStorage=function(){var e;try{(e=this.storage.getItem(this.storageKey))&&(e=V(e),A.isArray(e)||(this.reportError("Invalid storage entry:",e),e=null))}catch(t){this.reportError("Error retrieving queue",t),e=null}return e||[]},Z.prototype.saveToStorage=function(e){try{return this.storage.setItem(this.storageKey,H(e)),!0}catch(e){return this.reportError("Error saving queue",e),!1}},Z.prototype.clear=function(){this.memQueue=[],this.storage.removeItem(this.storageKey)};var re=j("batch"),ne=function(e,t){this.errorReporter=t.errorReporter,this.queue=new Z(e,{errorReporter:A.bind(this.reportError,this),storage:t.storage}),this.libConfig=t.libConfig,this.sendRequest=t.sendRequestFunc,this.beforeSendHook=t.beforeSendHook,this.stopAllBatching=t.stopAllBatchingFunc,this.batchSize=this.libConfig.batch_size,this.flushInterval=this.libConfig.batch_flush_interval_ms,this.stopped=!this.libConfig.batch_autostart,this.consecutiveRemovalFailures=0};ne.prototype.enqueue=function(e,t){this.queue.enqueue(e,this.flushInterval,t)},ne.prototype.start=function(){this.stopped=!1,this.consecutiveRemovalFailures=0,this.flush()},ne.prototype.stop=function(){this.stopped=!0,this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=null)},ne.prototype.clear=function(){this.queue.clear()},ne.prototype.resetBatchSize=function(){this.batchSize=this.libConfig.batch_size},ne.prototype.resetFlush=function(){this.scheduleFlush(this.libConfig.batch_flush_interval_ms)},ne.prototype.scheduleFlush=function(e){this.flushInterval=e,this.stopped||(this.timeoutID=setTimeout(A.bind(this.flush,this),this.flushInterval))},ne.prototype.flush=function(e){try{if(this.requestInProgress)return void re.log("Flush: Request already in progress");e=e||{};var t=this.libConfig.batch_request_timeout_ms,r=(new Date).getTime(),n=this.batchSize,i=this.queue.fillBatch(n),o=[],s={};if(A.each(i,(function(e){var t=e.payload;this.beforeSendHook&&!e.orphaned&&(t=this.beforeSendHook(t)),t&&o.push(t),s[e.id]=t}),this),o.length<1)return void this.resetFlush();this.requestInProgress=!0;var a=A.bind((function(o){this.requestInProgress=!1;try{var a=!1;if(e.unloading)this.queue.updatePayloads(s);else if(A.isObject(o)&&"timeout"===o.error&&(new Date).getTime()-r>=t)this.reportError("Network timeout; retrying"),this.flush();else if(A.isObject(o)&&o.xhr_req&&(o.xhr_req.status>=500||429===o.xhr_req.status||"timeout"===o.error)){var u=2*this.flushInterval,c=o.xhr_req.responseHeaders;if(c){var l=c["Retry-After"];l&&(u=1e3*parseInt(l,10)||u)}u=Math.min(6e5,u),this.reportError("Error; retry in "+u+" ms"),this.scheduleFlush(u)}else if(A.isObject(o)&&o.xhr_req&&413===o.xhr_req.status)if(i.length>1){var h=Math.max(1,Math.floor(n/2));this.batchSize=Math.min(this.batchSize,h,i.length-1),this.reportError("413 response; reducing batch size to "+this.batchSize),this.resetFlush()}else this.reportError("Single-event request too large; dropping",i),this.resetBatchSize(),a=!0;else a=!0;a&&this.queue.removeItemsByID(A.map(i,(function(e){return e.id})),A.bind((function(e){e?(this.consecutiveRemovalFailures=0,this.flush()):(this.reportError("Failed to remove items from queue"),++this.consecutiveRemovalFailures>5?(this.reportError("Too many queue failures; disabling batching system."),this.stopAllBatching()):this.resetFlush())}),this))}catch(e){this.reportError("Error handling API response",e),this.resetFlush()}}),this),u={method:"POST",verbose:!0,ignore_json_errors:!0,timeout_ms:t};e.unloading&&(u.transport="sendBeacon"),re.log("MIXPANEL REQUEST:",o),this.sendRequest(o,u,a)}catch(e){this.reportError("Error flushing request queue",e),this.resetFlush()}},ne.prototype.reportError=function(e,t){if(re.error.apply(re.error,arguments),this.errorReporter)try{t instanceof Error||(t=new Error(e)),this.errorReporter(e,t)}catch(t){re.error(t)}};function ie(e,t){ge(!0,e,t)}function oe(e,t){ge(!1,e,t)}function se(e,t){return"1"===pe(e,t)}function ae(e,r){if(function(e){if(e&&e.ignoreDnt)return!1;var r=e&&e.window||t,n=r.navigator||{},i=!1;return A.each([n.doNotTrack,n.msDoNotTrack,r.doNotTrack],(function(e){A.includes([!0,1,"1","yes"],e)&&(i=!0)})),i}(r))return R.warn('This browser has "Do Not Track" enabled. This will prevent the Mixpanel SDK from sending any data. To ignore the "Do Not Track" browser setting, initialize the Mixpanel instance with the config "ignore_dnt: true"'),!0;var n="0"===pe(e,r);return n&&R.warn("You are opted out of Mixpanel tracking. This will prevent the Mixpanel SDK from sending any data."),n}function ue(e){return _e(e,(function(e){return this.get_config(e)}))}function ce(e){return _e(e,(function(e){return this._get_config(e)}))}function le(e){return _e(e,(function(e){return this._get_config(e)}))}function he(e,t){fe(t=t||{}).remove(de(e,t),!!t.crossSubdomainCookie,t.cookieDomain)}function fe(e){return"localStorage"===(e=e||{}).persistenceType?A.localStorage:A.cookie}function de(e,t){return((t=t||{}).persistencePrefix||"__mp_opt_in_out_")+e}function pe(e,t){return fe(t).get(de(e,t))}function ge(e,t,r){A.isString(t)&&t.length?(fe(r=r||{}).set(de(t,r),e?1:0,A.isNumber(r.cookieExpiration)?r.cookieExpiration:null,!!r.crossSubdomainCookie,!!r.secureCookie,!!r.crossSiteCookie,r.cookieDomain),r.track&&e&&r.track(r.trackEventName||"$opt_in",r.trackProperties,{send_immediately:!0})):R.error("gdpr."+(e?"optIn":"optOut")+" called with an invalid token")}function _e(e,t){return function(){var r=!1;try{var n=t.call(this,"token"),i=t.call(this,"ignore_dnt"),o=t.call(this,"opt_out_tracking_persistence_type"),s=t.call(this,"opt_out_tracking_cookie_prefix"),a=t.call(this,"window");n&&(r=ae(n,{ignoreDnt:i,persistenceType:o,persistencePrefix:s,window:a}))}catch(e){R.error("Unexpected error when checking tracking opt-out status: "+e)}if(!r)return e.apply(this,arguments);var u=arguments[arguments.length-1];"function"==typeof u&&u(0)}}var ye="$set",me="$set_once",ve="$unset",be="$add",we="$append",ke="$union",Se="$remove",Ee={set_action:function(e,t){var r={},n={};return A.isObject(e)?A.each(e,(function(e,t){this._is_reserved_property(t)||(n[t]=e)}),this):n[e]=t,r.$set=n,r},unset_action:function(e){var t={},r=[];return A.isArray(e)||(e=[e]),A.each(e,(function(e){this._is_reserved_property(e)||r.push(e)}),this),t.$unset=r,t},set_once_action:function(e,t){var r={},n={};return A.isObject(e)?A.each(e,(function(e,t){this._is_reserved_property(t)||(n[t]=e)}),this):n[e]=t,r.$set_once=n,r},union_action:function(e,t){var r={},n={};return A.isObject(e)?A.each(e,(function(e,t){this._is_reserved_property(t)||(n[t]=A.isArray(e)?e:[e])}),this):n[e]=A.isArray(t)?t:[t],r.$union=n,r},append_action:function(e,t){var r={},n={};return A.isObject(e)?A.each(e,(function(e,t){this._is_reserved_property(t)||(n[t]=e)}),this):n[e]=t,r.$append=n,r},remove_action:function(e,t){var r={},n={};return A.isObject(e)?A.each(e,(function(e,t){this._is_reserved_property(t)||(n[t]=e)}),this):n[e]=t,r.$remove=n,r},delete_action:function(){var e={$delete:""};return e}},Te=function(){};A.extend(Te.prototype,Ee),Te.prototype._init=function(e,t,r){this._mixpanel=e,this._group_key=t,this._group_id=r},Te.prototype.set=le((function(e,t,r){var n=this.set_action(e,t);return A.isObject(e)&&(r=t),this._send_request(n,r)})),Te.prototype.set_once=le((function(e,t,r){var n=this.set_once_action(e,t);return A.isObject(e)&&(r=t),this._send_request(n,r)})),Te.prototype.unset=le((function(e,t){var r=this.unset_action(e);return this._send_request(r,t)})),Te.prototype.union=le((function(e,t,r){A.isObject(e)&&(r=t);var n=this.union_action(e,t);return this._send_request(n,r)})),Te.prototype.delete=le((function(e){var t=this.delete_action();return this._send_request(t,e)})),Te.prototype.remove=le((function(e,t,r){var n=this.remove_action(e,t);return this._send_request(n,r)})),Te.prototype._send_request=function(e,t){e.$group_key=this._group_key,e.$group_id=this._group_id,e.$token=this._get_config("token");var r=A.encodeDates(e);return this._mixpanel._track_or_batch({type:"groups",data:r,endpoint:this._get_config("api_host")+"/groups/",batcher:this._mixpanel.request_batchers.groups},t)},Te.prototype._is_reserved_property=function(e){return"$group_key"===e||"$group_id"===e},Te.prototype._get_config=function(e){return this._mixpanel.get_config(e)},Te.prototype.toString=function(){return this._mixpanel.toString()+".group."+this._group_key+"."+this._group_id},Te.prototype.remove=Te.prototype.remove,Te.prototype.set=Te.prototype.set,Te.prototype.set_once=Te.prototype.set_once,Te.prototype.union=Te.prototype.union,Te.prototype.unset=Te.prototype.unset,Te.prototype.toString=Te.prototype.toString;var Oe=function(){};A.extend(Oe.prototype,Ee),Oe.prototype._init=function(e){this._mixpanel=e},Oe.prototype.set=ce((function(e,t,r){var n=this.set_action(e,t);return A.isObject(e)&&(r=t),this._get_config("save_referrer")&&this._mixpanel.persistence.update_referrer_info(document.referrer),n.$set=A.extend({},A.info.people_properties(),this._mixpanel.persistence.get_referrer_info(),n.$set),this._send_request(n,r)})),Oe.prototype.set_once=ce((function(e,t,r){var n=this.set_once_action(e,t);return A.isObject(e)&&(r=t),this._send_request(n,r)})),Oe.prototype.unset=ce((function(e,t){var r=this.unset_action(e);return this._send_request(r,t)})),Oe.prototype.increment=ce((function(e,t,r){var n={},i={};return A.isObject(e)?(A.each(e,(function(e,t){if(!this._is_reserved_property(t)){if(isNaN(parseFloat(e)))return void R.error("Invalid increment value passed to mixpanel.people.increment - must be a number");i[t]=e}}),this),r=t):(A.isUndefined(t)&&(t=1),i[e]=t),n.$add=i,this._send_request(n,r)})),Oe.prototype.append=ce((function(e,t,r){A.isObject(e)&&(r=t);var n=this.append_action(e,t);return this._send_request(n,r)})),Oe.prototype.remove=ce((function(e,t,r){A.isObject(e)&&(r=t);var n=this.remove_action(e,t);return this._send_request(n,r)})),Oe.prototype.union=ce((function(e,t,r){A.isObject(e)&&(r=t);var n=this.union_action(e,t);return this._send_request(n,r)})),Oe.prototype.track_charge=ce((function(e,t,r){if(A.isNumber(e)||(e=parseFloat(e),!isNaN(e)))return this.append("$transactions",A.extend({$amount:e},t),r);R.error("Invalid value passed to mixpanel.people.track_charge - must be a number")})),Oe.prototype.clear_charges=function(e){return this.set("$transactions",[],e)},Oe.prototype.delete_user=function(){if(this._identify_called()){var e={$delete:this._mixpanel.get_distinct_id()};return this._send_request(e)}R.error("mixpanel.people.delete_user() requires you to call identify() first")},Oe.prototype.toString=function(){return this._mixpanel.toString()+".people"},Oe.prototype._send_request=function(e,t){e.$token=this._get_config("token"),e.$distinct_id=this._mixpanel.get_distinct_id();var r=this._mixpanel.get_property("$device_id"),n=this._mixpanel.get_property("$user_id"),i=this._mixpanel.get_property("$had_persisted_distinct_id");r&&(e.$device_id=r),n&&(e.$user_id=n),i&&(e.$had_persisted_distinct_id=i);var o=A.encodeDates(e);return this._identify_called()?this._mixpanel._track_or_batch({type:"people",data:o,endpoint:this._get_config("api_host")+"/engage/",batcher:this._mixpanel.request_batchers.people},t):(this._enqueue(e),A.isUndefined(t)||(this._get_config("verbose")?t({status:-1,error:null}):t(-1)),A.truncate(o,255))},Oe.prototype._get_config=function(e){return this._mixpanel.get_config(e)},Oe.prototype._identify_called=function(){return!0===this._mixpanel._flags.identify_called},Oe.prototype._enqueue=function(e){ye in e?this._mixpanel.persistence._add_to_people_queue(ye,e):me in e?this._mixpanel.persistence._add_to_people_queue(me,e):ve in e?this._mixpanel.persistence._add_to_people_queue(ve,e):be in e?this._mixpanel.persistence._add_to_people_queue(be,e):we in e?this._mixpanel.persistence._add_to_people_queue(we,e):Se in e?this._mixpanel.persistence._add_to_people_queue(Se,e):ke in e?this._mixpanel.persistence._add_to_people_queue(ke,e):R.error("Invalid call to _enqueue():",e)},Oe.prototype._flush_one_queue=function(e,t,r,n){var i=this,o=A.extend({},this._mixpanel.persistence._get_queue(e)),s=o;A.isUndefined(o)||!A.isObject(o)||A.isEmptyObject(o)||(i._mixpanel.persistence._pop_from_people_queue(e,o),n&&(s=n(o)),t.call(i,s,(function(t,n){0===t&&i._mixpanel.persistence._add_to_people_queue(e,o),A.isUndefined(r)||r(t,n)})))},Oe.prototype._flush=function(e,t,r,n,i,o,s){var a=this,u=this._mixpanel.persistence._get_queue(we),c=this._mixpanel.persistence._get_queue(Se);if(this._flush_one_queue(ye,this.set,e),this._flush_one_queue(me,this.set_once,n),this._flush_one_queue(ve,this.unset,o,(function(e){return A.keys(e)})),this._flush_one_queue(be,this.increment,t),this._flush_one_queue(ke,this.union,i),!A.isUndefined(u)&&A.isArray(u)&&u.length){for(var l,h=function(e,t){0===e&&a._mixpanel.persistence._add_to_people_queue(we,l),A.isUndefined(r)||r(e,t)},f=u.length-1;f>=0;f--)l=u.pop(),A.isEmptyObject(l)||a.append(l,h);a._mixpanel.persistence.save()}if(!A.isUndefined(c)&&A.isArray(c)&&c.length){for(var d,p=function(e,t){0===e&&a._mixpanel.persistence._add_to_people_queue(Se,d),A.isUndefined(s)||s(e,t)},g=c.length-1;g>=0;g--)d=c.pop(),A.isEmptyObject(d)||a.remove(d,p);a._mixpanel.persistence.save()}},Oe.prototype._is_reserved_property=function(e){return"$distinct_id"===e||"$token"===e||"$device_id"===e||"$user_id"===e||"$had_persisted_distinct_id"===e},Oe.prototype.set=Oe.prototype.set,Oe.prototype.set_once=Oe.prototype.set_once,Oe.prototype.unset=Oe.prototype.unset,Oe.prototype.increment=Oe.prototype.increment,Oe.prototype.append=Oe.prototype.append,Oe.prototype.remove=Oe.prototype.remove,Oe.prototype.union=Oe.prototype.union,Oe.prototype.track_charge=Oe.prototype.track_charge,Oe.prototype.clear_charges=Oe.prototype.clear_charges,Oe.prototype.delete_user=Oe.prototype.delete_user,Oe.prototype.toString=Oe.prototype.toString;var xe,Ce,Be="__mps",Me="__mpso",Ie="__mpus",Pe="__mpa",Ae="__mpap",Re="__mpr",Le="__mpu",je="$people_distinct_id",De="__alias",Ue="__timers",$e=[Be,Me,Ie,Pe,Ae,Re,Le,je,De,Ue],qe=function(e){this.props={},this.campaign_params_saved=!1,e.persistence_name?this.name="mp_"+e.persistence_name:this.name="mp_"+e.token+"_mixpanel";var t=e.persistence;"cookie"!==t&&"localStorage"!==t&&(R.critical("Unknown persistence type "+t+"; falling back to cookie"),t=e.persistence="cookie"),"localStorage"===t&&A.localStorage.is_supported()?this.storage=A.localStorage:this.storage=A.cookie,this.load(),this.update_config(e),this.upgrade(e),this.save()};qe.prototype.properties=function(){var e={};return A.each(this.props,(function(t,r){A.include($e,r)||(e[r]=t)})),e},qe.prototype.load=function(){if(!this.disabled){var e=this.storage.parse(this.name);e&&(this.props=A.extend({},e))}},qe.prototype.upgrade=function(e){var t,r,n=e.upgrade;n&&(t="mp_super_properties","string"==typeof n&&(t=n),r=this.storage.parse(t),this.storage.remove(t),this.storage.remove(t,!0),r&&(this.props=A.extend(this.props,r.all,r.events))),e.cookie_name||"mixpanel"===e.name||(t="mp_"+e.token+"_"+e.name,(r=this.storage.parse(t))&&(this.storage.remove(t),this.storage.remove(t,!0),this.register_once(r))),this.storage===A.localStorage&&(r=A.cookie.parse(this.name),A.cookie.remove(this.name),A.cookie.remove(this.name,!0),r&&this.register_once(r))},qe.prototype.save=function(){this.disabled||this.storage.set(this.name,A.JSONEncode(this.props),this.expire_days,this.cross_subdomain,this.secure,this.cross_site,this.cookie_domain)},qe.prototype.remove=function(){this.storage.remove(this.name,!1,this.cookie_domain),this.storage.remove(this.name,!0,this.cookie_domain)},qe.prototype.clear=function(){this.remove(),this.props={}},qe.prototype.register_once=function(e,t,r){return!!A.isObject(e)&&(void 0===t&&(t="None"),this.expire_days=void 0===r?this.default_expiry:r,A.each(e,(function(e,r){this.props.hasOwnProperty(r)&&this.props[r]!==t||(this.props[r]=e)}),this),this.save(),!0)},qe.prototype.register=function(e,t){return!!A.isObject(e)&&(this.expire_days=void 0===t?this.default_expiry:t,A.extend(this.props,e),this.save(),!0)},qe.prototype.unregister=function(e){e in this.props&&(delete this.props[e],this.save())},qe.prototype.update_campaign_params=function(){this.campaign_params_saved||(this.register_once(A.info.campaignParams()),this.campaign_params_saved=!0)},qe.prototype.update_search_keyword=function(e){this.register(A.info.searchInfo(e))},qe.prototype.update_referrer_info=function(e){this.register_once({$initial_referrer:e||"$direct",$initial_referring_domain:A.info.referringDomain(e)||"$direct"},"")},qe.prototype.get_referrer_info=function(){return A.strip_empty_properties({$initial_referrer:this.props.$initial_referrer,$initial_referring_domain:this.props.$initial_referring_domain})},qe.prototype.safe_merge=function(e){return A.each(this.props,(function(t,r){r in e||(e[r]=t)})),e},qe.prototype.update_config=function(e){this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cookie_domain(e.cookie_domain),this.set_cross_site(e.cross_site_cookie),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie)},qe.prototype.set_disabled=function(e){this.disabled=e,this.disabled?this.remove():this.save()},qe.prototype.set_cookie_domain=function(e){e!==this.cookie_domain&&(this.remove(),this.cookie_domain=e,this.save())},qe.prototype.set_cross_site=function(e){e!==this.cross_site&&(this.cross_site=e,this.remove(),this.save())},qe.prototype.set_cross_subdomain=function(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())},qe.prototype.get_cross_subdomain=function(){return this.cross_subdomain},qe.prototype.set_secure=function(e){e!==this.secure&&(this.secure=!!e,this.remove(),this.save())},qe.prototype._add_to_people_queue=function(e,t){var r=this._get_queue_key(e),n=t[e],i=this._get_or_create_queue(ye),o=this._get_or_create_queue(me),s=this._get_or_create_queue(ve),a=this._get_or_create_queue(be),u=this._get_or_create_queue(ke),c=this._get_or_create_queue(Se,[]),l=this._get_or_create_queue(we,[]);r===Be?(A.extend(i,n),this._pop_from_people_queue(be,n),this._pop_from_people_queue(ke,n),this._pop_from_people_queue(ve,n)):r===Me?(A.each(n,(function(e,t){t in o||(o[t]=e)})),this._pop_from_people_queue(ve,n)):r===Ie?A.each(n,(function(e){A.each([i,o,a,u],(function(t){e in t&&delete t[e]})),A.each(l,(function(t){e in t&&delete t[e]})),s[e]=!0})):r===Pe?(A.each(n,(function(e,t){t in i?i[t]+=e:(t in a||(a[t]=0),a[t]+=e)}),this),this._pop_from_people_queue(ve,n)):r===Le?(A.each(n,(function(e,t){A.isArray(e)&&(t in u||(u[t]=[]),u[t]=u[t].concat(e))})),this._pop_from_people_queue(ve,n)):r===Re?(c.push(n),this._pop_from_people_queue(we,n)):r===Ae&&(l.push(n),this._pop_from_people_queue(ve,n)),R.log("MIXPANEL PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):"),R.log(t),this.save()},qe.prototype._pop_from_people_queue=function(e,t){var r=this._get_queue(e);A.isUndefined(r)||(A.each(t,(function(t,n){e===we||e===Se?A.each(r,(function(e){e[n]===t&&delete e[n]})):delete r[n]}),this),this.save())},qe.prototype._get_queue_key=function(e){return e===ye?Be:e===me?Me:e===ve?Ie:e===be?Pe:e===we?Ae:e===Se?Re:e===ke?Le:void R.error("Invalid queue:",e)},qe.prototype._get_queue=function(e){return this.props[this._get_queue_key(e)]},qe.prototype._get_or_create_queue=function(e,t){var r=this._get_queue_key(e);return t=A.isUndefined(t)?{}:t,this.props[r]||(this.props[r]=t)},qe.prototype.set_event_timer=function(e,t){var r=this.props.__timers||{};r[e]=t,this.props.__timers=r,this.save()},qe.prototype.remove_event_timer=function(e){var t=(this.props.__timers||{})[e];return A.isUndefined(t)||(delete this.props.__timers[e],this.save()),t};var Ne=function(e){return e},Fe=function(){},ze="mixpanel",We="base64",He=t.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,Ve=!He&&-1===O.indexOf("MSIE")&&-1===O.indexOf("Mozilla"),Qe=null;k.sendBeacon&&(Qe=function(){return k.sendBeacon.apply(k,arguments)});var Xe={api_host:"https://api-js.mixpanel.com",api_method:"POST",api_transport:"XHR",api_payload_format:We,app_host:"https://mixpanel.com",cdn:"https://cdn.mxpnl.com",cross_site_cookie:!1,cross_subdomain_cookie:!0,error_reporter:Fe,persistence:"cookie",persistence_name:"",cookie_domain:"",cookie_name:"",loaded:Fe,store_google:!0,save_referrer:!0,test:!1,verbose:!1,img:!1,debug:!1,track_links_timeout:300,cookie_expiration:365,upgrade:!1,disable_persistence:!1,disable_cookie:!1,secure_cookie:!1,ip:!0,opt_out_tracking_by_default:!1,opt_out_persistence_by_default:!1,opt_out_tracking_persistence_type:"localStorage",opt_out_tracking_cookie_prefix:null,property_blacklist:[],xhr_headers:{},ignore_dnt:!1,batch_requests:!0,batch_size:50,batch_flush_interval_ms:5e3,batch_request_timeout_ms:9e4,batch_autostart:!0,hooks:{}},Ye=!1,Je=function(){},Ge=function(e,t,n){var i,o=n===ze?Ce:Ce[n];if(o&&0===xe)i=o;else{if(o&&!A.isArray(o))return void R.error("You have already initialized "+n);i=new Je}return i._cached_groups={},i._init(e,t,n),i.people=new Oe,i.people._init(i),r.DEBUG=r.DEBUG||i.get_config("debug"),!A.isUndefined(o)&&A.isArray(o)&&(i._execute_array.call(i.people,o.people),i._execute_array(o)),i};Je.prototype.init=function(e,t,r){if(A.isUndefined(r))this.report_error("You must name your new library: init(token, config, name)");else{if(r!==ze){var n=Ge(e,t,r);return Ce[r]=n,n._loaded(),n}this.report_error("You must initialize the main mixpanel object right after you include the Mixpanel js snippet")}},Je.prototype._init=function(e,r,n){r=r||{},this.__loaded=!0,this.config={};var i={};"api_payload_format"in r||(r.api_host||Xe.api_host).match(/\.mixpanel\.com$/)&&(i.api_payload_format="json");if(this.set_config(A.extend({},Xe,i,r,{name:n,token:e,callback_fn:(n===ze?n:"mixpanel."+n)+"._jsc"})),this._jsc=Fe,this.__dom_loaded_queue=[],this.__request_queue=[],this.__disabled_events=[],this._flags={disable_all_events:!1,identify_called:!1},this.request_batchers={},this._batch_requests=this.get_config("batch_requests"),this._batch_requests)if(A.localStorage.is_supported(!0)&&He){if(this.init_batchers(),Qe&&t.addEventListener){var o=A.bind((function(){this.request_batchers.events.stopped||this.request_batchers.events.flush({unloading:!0})}),this);t.addEventListener("pagehide",(function(e){e.persisted&&o()})),t.addEventListener("visibilitychange",(function(){"hidden"===S.visibilityState&&o()}))}}else this._batch_requests=!1,R.log("Turning off Mixpanel request-queueing; needs XHR and localStorage support");this.persistence=this.cookie=new qe(this.config),this.unpersisted_superprops={},this._gdpr_init();var s=A.UUID();this.get_distinct_id()||this.register_once({distinct_id:s,$device_id:s},"")},Je.prototype._loaded=function(){this.get_config("loaded")(this),this._set_default_superprops()},Je.prototype._set_default_superprops=function(){this.persistence.update_search_keyword(S.referrer),this.get_config("store_google")&&this.persistence.update_campaign_params(),this.get_config("save_referrer")&&this.persistence.update_referrer_info(S.referrer)},Je.prototype._dom_loaded=function(){A.each(this.__dom_loaded_queue,(function(e){this._track_dom.apply(this,e)}),this),this.has_opted_out_tracking()||A.each(this.__request_queue,(function(e){this._send_request.apply(this,e)}),this),delete this.__dom_loaded_queue,delete this.__request_queue},Je.prototype._track_dom=function(e,t){if(this.get_config("img"))return this.report_error("You can't use DOM tracking functions with img = true."),!1;if(!Ye)return this.__dom_loaded_queue.push([e,t]),!1;var r=(new e).init(this);return r.track.apply(r,t)},Je.prototype._prepare_callback=function(e,t){if(A.isUndefined(e))return null;if(He){return function(r){e(r,t)}}var r=this._jsc,n=""+Math.floor(1e8*Math.random()),i=this.get_config("callback_fn")+"["+n+"]";return r[n]=function(i){delete r[n],e(i,t)},i},Je.prototype._send_request=function(e,t,r,n){var i=!0;if(Ve)return this.__request_queue.push(arguments),i;var o={method:this.get_config("api_method"),transport:this.get_config("api_transport"),verbose:this.get_config("verbose")},s=null;n||!A.isFunction(r)&&"string"!=typeof r||(n=r,r=null),r=A.extend(o,r||{}),He||(r.method="GET");var a="POST"===r.method,u=Qe&&a&&"sendbeacon"===r.transport.toLowerCase(),c=r.verbose;t.verbose&&(c=!0),this.get_config("test")&&(t.test=1),c&&(t.verbose=1),this.get_config("img")&&(t.img=1),He||(n?t.callback=n:(c||this.get_config("test"))&&(t.callback="(function(){})")),t.ip=this.get_config("ip")?1:0,t._=(new Date).getTime().toString(),a&&(s="data="+encodeURIComponent(t.data),delete t.data),e+="?"+A.HTTPBuildQuery(t);var l=this;if("img"in t){var h=S.createElement("img");h.src=e,S.body.appendChild(h)}else if(u){try{i=Qe(e,s)}catch(e){l.report_error(e),i=!1}try{n&&n(i?1:0)}catch(e){l.report_error(e)}}else if(He)try{var f=new XMLHttpRequest;f.open(r.method,e,!0);var d=this.get_config("xhr_headers");if(a&&(d["Content-Type"]="application/x-www-form-urlencoded"),A.each(d,(function(e,t){f.setRequestHeader(t,e)})),r.timeout_ms&&void 0!==f.timeout){f.timeout=r.timeout_ms;var p=(new Date).getTime()}f.withCredentials=!0,f.onreadystatechange=function(){var e;if(4===f.readyState)if(200===f.status){if(n)if(c){var t;try{t=A.JSONDecode(f.responseText)}catch(e){if(l.report_error(e),!r.ignore_json_errors)return;t=f.responseText}n(t)}else n(Number(f.responseText))}else e=f.timeout&&!f.status&&(new Date).getTime()-p>=f.timeout?"timeout":"Bad HTTP status: "+f.status+" "+f.statusText,l.report_error(e),n&&n(c?{status:0,error:e,xhr_req:f}:0)},f.send(s)}catch(e){l.report_error(e),i=!1}else{var g=S.createElement("script");g.type="text/javascript",g.async=!0,g.defer=!0,g.src=e;var _=S.getElementsByTagName("script")[0];_.parentNode.insertBefore(g,_)}return i},Je.prototype._execute_array=function(e){var t,r=[],n=[],i=[];A.each(e,(function(e){e&&(t=e[0],A.isArray(t)?i.push(e):"function"==typeof e?e.call(this):A.isArray(e)&&"alias"===t?r.push(e):A.isArray(e)&&-1!==t.indexOf("track")&&"function"==typeof this[t]?i.push(e):n.push(e))}),this);var o=function(e,t){A.each(e,(function(e){if(A.isArray(e[0])){var r=t;A.each(e,(function(e){r=r[e[0]].apply(r,e.slice(1))}))}else this[e[0]].apply(this,e.slice(1))}),t)};o(r,this),o(n,this),o(i,this)},Je.prototype.are_batchers_initialized=function(){return!!this.request_batchers.events},Je.prototype.init_batchers=function(){var e=this.get_config("token");if(!this.are_batchers_initialized()){var t=A.bind((function(t){return new ne("__mpq_"+e+t.queue_suffix,{libConfig:this.config,sendRequestFunc:A.bind((function(e,r,n){this._send_request(this.get_config("api_host")+t.endpoint,this._encode_data_for_request(e),r,this._prepare_callback(n,e))}),this),beforeSendHook:A.bind((function(e){return this._run_hook("before_send_"+t.type,e)}),this),errorReporter:this.get_config("error_reporter"),stopAllBatchingFunc:A.bind(this.stop_batch_senders,this)})}),this);this.request_batchers={events:t({type:"events",endpoint:"/track/",queue_suffix:"_ev"}),people:t({type:"people",endpoint:"/engage/",queue_suffix:"_pp"}),groups:t({type:"groups",endpoint:"/groups/",queue_suffix:"_gr"})}}this.get_config("batch_autostart")&&this.start_batch_senders()},Je.prototype.start_batch_senders=function(){this.are_batchers_initialized()&&(this._batch_requests=!0,A.each(this.request_batchers,(function(e){e.start()})))},Je.prototype.stop_batch_senders=function(){this._batch_requests=!1,A.each(this.request_batchers,(function(e){e.stop(),e.clear()}))},Je.prototype.push=function(e){this._execute_array([e])},Je.prototype.disable=function(e){void 0===e?this._flags.disable_all_events=!0:this.__disabled_events=this.__disabled_events.concat(e)},Je.prototype._encode_data_for_request=function(e){var t=A.JSONEncode(e);return this.get_config("api_payload_format")===We&&(t=A.base64Encode(t)),{data:t}},Je.prototype._track_or_batch=function(e,t){var r=A.truncate(e.data,255),n=e.endpoint,i=e.batcher,o=e.should_send_immediately,s=e.send_request_options||{};t=t||Fe;var a=!0,u=A.bind((function(){return s.skip_hooks||(r=this._run_hook("before_send_"+e.type,r)),r?(R.log("MIXPANEL REQUEST:"),R.log(r),this._send_request(n,this._encode_data_for_request(r),s,this._prepare_callback(t,r))):null}),this);return this._batch_requests&&!o?i.enqueue(r,(function(e){e?t(1,r):u()})):a=u(),a&&r},Je.prototype.track=ue((function(e,t,r,n){n||"function"!=typeof r||(n=r,r=null);var i=(r=r||{}).transport;i&&(r.transport=i);var o=r.send_immediately;if("function"!=typeof n&&(n=Fe),A.isUndefined(e))this.report_error("No event name provided to mixpanel.track");else{if(!this._event_is_disabled(e)){(t=t||{}).token=this.get_config("token");var s=this.persistence.remove_event_timer(e);if(!A.isUndefined(s)){var a=(new Date).getTime()-s;t.$duration=parseFloat((a/1e3).toFixed(3))}this._set_default_superprops(),t=A.extend({},A.info.properties(),this.persistence.properties(),this.unpersisted_superprops,t);var u=this.get_config("property_blacklist");A.isArray(u)?A.each(u,(function(e){delete t[e]})):this.report_error("Invalid value for property_blacklist config: "+u);var c={event:e,properties:t};return this._track_or_batch({type:"events",data:c,endpoint:this.get_config("api_host")+"/track/",batcher:this.request_batchers.events,should_send_immediately:o,send_request_options:r},n)}n(0)}})),Je.prototype.set_group=ue((function(e,t,r){A.isArray(t)||(t=[t]);var n={};return n[e]=t,this.register(n),this.people.set(e,t,r)})),Je.prototype.add_group=ue((function(e,t,r){var n=this.get_property(e);if(void 0===n){var i={};i[e]=[t],this.register(i)}else-1===n.indexOf(t)&&(n.push(t),this.register(i));return this.people.union(e,t,r)})),Je.prototype.remove_group=ue((function(e,t,r){var n=this.get_property(e);if(void 0!==n){var i=n.indexOf(t);i>-1&&(n.splice(i,1),this.register({group_key:n})),0===n.length&&this.unregister(e)}return this.people.remove(e,t,r)})),Je.prototype.track_with_groups=ue((function(e,t,r,n){var i=A.extend({},t||{});return A.each(r,(function(e,t){null!=e&&(i[t]=e)})),this.track(e,i,n)})),Je.prototype._create_map_key=function(e,t){return e+"_"+JSON.stringify(t)},Je.prototype._remove_group_from_cache=function(e,t){delete this._cached_groups[this._create_map_key(e,t)]},Je.prototype.get_group=function(e,t){var r=this._create_map_key(e,t),n=this._cached_groups[r];return void 0!==n&&n._group_key===e&&n._group_id===t||((n=new Te)._init(this,e,t),this._cached_groups[r]=n),n},Je.prototype.track_pageview=function(e){A.isUndefined(e)&&(e=S.location.href),this.track("mp_page_view",A.info.pageviewInfo(e))},Je.prototype.track_links=function(){return this._track_dom.call(this,X,arguments)},Je.prototype.track_forms=function(){return this._track_dom.call(this,Y,arguments)},Je.prototype.time_event=function(e){A.isUndefined(e)?this.report_error("No event name provided to mixpanel.time_event"):this._event_is_disabled(e)||this.persistence.set_event_timer(e,(new Date).getTime())};var Ke={persistent:!0},Ze=function(e){var t;return t=A.isObject(e)?e:A.isUndefined(e)?{}:{days:e},A.extend({},Ke,t)};Je.prototype.register=function(e,t){var r=Ze(t);r.persistent?this.persistence.register(e,r.days):A.extend(this.unpersisted_superprops,e)},Je.prototype.register_once=function(e,t,r){var n=Ze(r);n.persistent?this.persistence.register_once(e,t,n.days):(void 0===t&&(t="None"),A.each(e,(function(e,r){this.unpersisted_superprops.hasOwnProperty(r)&&this.unpersisted_superprops[r]!==t||(this.unpersisted_superprops[r]=e)}),this))},Je.prototype.unregister=function(e,t){(t=Ze(t)).persistent?this.persistence.unregister(e):delete this.unpersisted_superprops[e]},Je.prototype._register_single=function(e,t){var r={};r[e]=t,this.register(r)},Je.prototype.identify=function(e,t,r,n,i,o,s,a){var u=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var c=u;this.register_once({$had_persisted_distinct_id:!0,$device_id:c},"")}e!==u&&e!==this.get_property(De)&&(this.unregister(De),this.register({distinct_id:e})),this._flags.identify_called=!0,this.people._flush(t,r,n,i,o,s,a),e!==u&&this.track("$identify",{distinct_id:e,$anon_distinct_id:u},{skip_hooks:!0})},Je.prototype.reset=function(){this.persistence.clear(),this._flags.identify_called=!1;var e=A.UUID();this.register_once({distinct_id:e,$device_id:e},"")},Je.prototype.get_distinct_id=function(){return this.get_property("distinct_id")},Je.prototype.alias=function(e,t){if(e===this.get_property(je))return this.report_error("Attempting to create alias for existing People user - aborting."),-2;var r=this;return A.isUndefined(t)&&(t=this.get_distinct_id()),e!==t?(this._register_single(De,e),this.track("$create_alias",{alias:e,distinct_id:t},{skip_hooks:!0},(function(){r.identify(e)}))):(this.report_error("alias matches current distinct_id - skipping api call."),this.identify(e),-1)},Je.prototype.name_tag=function(e){this._register_single("mp_name_tag",e)},Je.prototype.set_config=function(e){A.isObject(e)&&(A.extend(this.config,e),e.batch_size&&A.each(this.request_batchers,(function(e){e.resetBatchSize()})),this.get_config("persistence_name")||(this.config.persistence_name=this.config.cookie_name),this.get_config("disable_persistence")||(this.config.disable_persistence=this.config.disable_cookie),this.persistence&&this.persistence.update_config(this.config),r.DEBUG=r.DEBUG||this.get_config("debug"))},Je.prototype.get_config=function(e){return this.config[e]},Je.prototype._run_hook=function(e){var t=(this.config.hooks[e]||Ne).apply(this,m.call(arguments,1));return void 0===t&&(this.report_error(e+" hook did not return a value"),t=null),t},Je.prototype.get_property=function(e){return this.persistence.props[e]},Je.prototype.toString=function(){var e=this.get_config("name");return e!==ze&&(e="mixpanel."+e),e},Je.prototype._event_is_disabled=function(e){return A.isBlockedUA(O)||this._flags.disable_all_events||A.include(this.__disabled_events,e)},Je.prototype._gdpr_init=function(){"localStorage"===this.get_config("opt_out_tracking_persistence_type")&&A.localStorage.is_supported()&&(!this.has_opted_in_tracking()&&this.has_opted_in_tracking({persistence_type:"cookie"})&&this.opt_in_tracking({enable_persistence:!1}),!this.has_opted_out_tracking()&&this.has_opted_out_tracking({persistence_type:"cookie"})&&this.opt_out_tracking({clear_persistence:!1}),this.clear_opt_in_out_tracking({persistence_type:"cookie",enable_persistence:!1})),this.has_opted_out_tracking()?this._gdpr_update_persistence({clear_persistence:!0}):this.has_opted_in_tracking()||!this.get_config("opt_out_tracking_by_default")&&!A.cookie.get("mp_optout")||(A.cookie.remove("mp_optout"),this.opt_out_tracking({clear_persistence:this.get_config("opt_out_persistence_by_default")}))},Je.prototype._gdpr_update_persistence=function(e){var t;if(e&&e.clear_persistence)t=!0;else{if(!e||!e.enable_persistence)return;t=!1}this.get_config("disable_persistence")||this.persistence.disabled===t||this.persistence.set_disabled(t),t&&A.each(this.request_batchers,(function(e){e.clear()}))},Je.prototype._gdpr_call_func=function(e,t){return t=A.extend({track:A.bind(this.track,this),persistence_type:this.get_config("opt_out_tracking_persistence_type"),cookie_prefix:this.get_config("opt_out_tracking_cookie_prefix"),cookie_expiration:this.get_config("cookie_expiration"),cross_site_cookie:this.get_config("cross_site_cookie"),cross_subdomain_cookie:this.get_config("cross_subdomain_cookie"),cookie_domain:this.get_config("cookie_domain"),secure_cookie:this.get_config("secure_cookie"),ignore_dnt:this.get_config("ignore_dnt")},t),A.localStorage.is_supported()||(t.persistence_type="cookie"),e(this.get_config("token"),{track:t.track,trackEventName:t.track_event_name,trackProperties:t.track_properties,persistenceType:t.persistence_type,persistencePrefix:t.cookie_prefix,cookieDomain:t.cookie_domain,cookieExpiration:t.cookie_expiration,crossSiteCookie:t.cross_site_cookie,crossSubdomainCookie:t.cross_subdomain_cookie,secureCookie:t.secure_cookie,ignoreDnt:t.ignore_dnt})},Je.prototype.opt_in_tracking=function(e){e=A.extend({enable_persistence:!0},e),this._gdpr_call_func(ie,e),this._gdpr_update_persistence(e)},Je.prototype.opt_out_tracking=function(e){(e=A.extend({clear_persistence:!0,delete_user:!0},e)).delete_user&&this.people&&this.people._identify_called()&&(this.people.delete_user(),this.people.clear_charges()),this._gdpr_call_func(oe,e),this._gdpr_update_persistence(e)},Je.prototype.has_opted_in_tracking=function(e){return this._gdpr_call_func(se,e)},Je.prototype.has_opted_out_tracking=function(e){return this._gdpr_call_func(ae,e)},Je.prototype.clear_opt_in_out_tracking=function(e){e=A.extend({enable_persistence:!0},e),this._gdpr_call_func(he,e),this._gdpr_update_persistence(e)},Je.prototype.report_error=function(e,t){R.error.apply(R.error,arguments);try{t||e instanceof Error||(e=new Error(e)),this.get_config("error_reporter")(e,t)}catch(t){R.error(t)}},Je.prototype.init=Je.prototype.init,Je.prototype.reset=Je.prototype.reset,Je.prototype.disable=Je.prototype.disable,Je.prototype.time_event=Je.prototype.time_event,Je.prototype.track=Je.prototype.track,Je.prototype.track_links=Je.prototype.track_links,Je.prototype.track_forms=Je.prototype.track_forms,Je.prototype.track_pageview=Je.prototype.track_pageview,Je.prototype.register=Je.prototype.register,Je.prototype.register_once=Je.prototype.register_once,Je.prototype.unregister=Je.prototype.unregister,Je.prototype.identify=Je.prototype.identify,Je.prototype.alias=Je.prototype.alias,Je.prototype.name_tag=Je.prototype.name_tag,Je.prototype.set_config=Je.prototype.set_config,Je.prototype.get_config=Je.prototype.get_config,Je.prototype.get_property=Je.prototype.get_property,Je.prototype.get_distinct_id=Je.prototype.get_distinct_id,Je.prototype.toString=Je.prototype.toString,Je.prototype.opt_out_tracking=Je.prototype.opt_out_tracking,Je.prototype.opt_in_tracking=Je.prototype.opt_in_tracking,Je.prototype.has_opted_out_tracking=Je.prototype.has_opted_out_tracking,Je.prototype.has_opted_in_tracking=Je.prototype.has_opted_in_tracking,Je.prototype.clear_opt_in_out_tracking=Je.prototype.clear_opt_in_out_tracking,Je.prototype.get_group=Je.prototype.get_group,Je.prototype.set_group=Je.prototype.set_group,Je.prototype.add_group=Je.prototype.add_group,Je.prototype.remove_group=Je.prototype.remove_group,Je.prototype.track_with_groups=Je.prototype.track_with_groups,Je.prototype.start_batch_senders=Je.prototype.start_batch_senders,Je.prototype.stop_batch_senders=Je.prototype.stop_batch_senders,qe.prototype.properties=qe.prototype.properties,qe.prototype.update_search_keyword=qe.prototype.update_search_keyword,qe.prototype.update_referrer_info=qe.prototype.update_referrer_info,qe.prototype.get_cross_subdomain=qe.prototype.get_cross_subdomain,qe.prototype.clear=qe.prototype.clear;var et={},tt=function(){Ce.init=function(e,r,n){if(n)return Ce[n]||(Ce[n]=et[n]=Ge(e,r,n),Ce[n]._loaded()),Ce[n];var i=Ce;et.mixpanel?i=et.mixpanel:e&&((i=Ge(e,r,ze))._loaded(),et.mixpanel=i),Ce=i,1===xe&&(t.mixpanel=Ce),A.each(et,(function(e,t){t!==ze&&(Ce[t]=e)})),Ce._=A}};var rt=(xe=0,Ce=new Je,tt(),Ce.init(),function(){function e(){e.done||(e.done=!0,Ye=!0,Ve=!1,A.each(et,(function(e){e._dom_loaded()})))}if(S.addEventListener)"complete"===S.readyState?e():S.addEventListener("DOMContentLoaded",e,!1);else if(S.attachEvent){S.attachEvent("onreadystatechange",e);var r=!1;try{r=null===t.frameElement}catch(e){}S.documentElement.doScroll&&r&&function t(){try{S.documentElement.doScroll("left")}catch(e){return void setTimeout(t,1)}e()}()}A.register_event(t,"load",e,!0)}(),Ce);e.exports=rt},365:function(e,t,r){"use strict";var n=r(764).Buffer,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.fetch=t.parse=t.injection=t.isIntercept=t.checkRequestHeader=t.isInterceptSite=t.formatM3u8=t.parseM3u8=void 0;const u=a(r(248));u.default.mode="";const c=r(278),l=s(r(903));t.parse=l.default;const h=a(r(814)),f=s(r(905)),d=a(r(619)),p=a(r(40));let g;const _=new c.Torrent;async function y(e,t){return g?new Promise((r=>{null==g||g.request("ivideos.parse",{url:e,m3u8:t},(({urls:e})=>{r(e||[])}))})):l.default.parse(e,t)}function m(){return!/\.(youtube|google|facebook|twitter|jd|qq|iqiy|youku|bilibili)\.com/i.test(location.hostname)}function v(e,t){let r=n.alloc(0);if(t instanceof ArrayBuffer){let e=new DataView(t),i=[];for(let t=0;t<e.byteLength;t++)i.push(e.getUint8(t));r=n.from(i)}else r=n.from(t);_.seed(e,r)}(async()=>{const e=`https://cdn.jsdelivr.net/npm/ivideos@${p.default.version}/dist/ivideos.worker.js?v=${p.default.version}`;let t=await(0,h.default)(e).then((e=>e.text())).catch((e=>""));if((!t||t.length<1024)&&(t=await(0,h.default)(`https://a.ivideos.one/go?url=${encodeURIComponent(e)}`).then((e=>e.text())).catch((e=>""))),!t||t.length<1024)return console.warn("fetch worker error");let r=new Blob([t],{type:"text/javascript"}),n=URL.createObjectURL(r),i=new Worker(n);g=new d.default(i)})(),t.parseM3u8=y,t.formatM3u8=async function(e,t){return g?new Promise((r=>{null==g||g.request("ivideos.formatM3u8",{url:e,m3u8:t},(({m3u8:e})=>{r(e||"")}))})):l.default.formatM3u8(e,t)},t.isInterceptSite=m;let b=h.default,w=XMLHttpRequest.prototype.open,k=XMLHttpRequest.prototype.send,S=new Set;function E(e){return!e.range&&("function"!=typeof e.get||!e.get("range"))}function T(e,t,r){try{if(!m())return!1;t=(null==t?void 0:t.trim())||"";let n=e;n instanceof globalThis.Request&&(e=n.url),e=/^\/\//.test(e)?location.protocol+e:e;let i=f.suffix(e),o=S.has(e);if(o=o||u.default.videoChunkSuffix.includes(i),S.size>0&&!S.has(e)&&u.default.videoChunkSuffix.includes(i)&&S.clear(),o)return!0;let s=new URL(e);if(!/^GET$/i.test(t))return!1;if(/(googleapis|googlevideo|)\.com/i.test(s.hostname))return!1;if(r)return/(video|image|octet-stream)/i.test(r);if(/\/api\//i.test(e))return!1;if(S.size<1)return["png","jpg","jpeg"].includes(i)}catch(t){console.warn("isIntercept",t,e)}return!1}async function O(e,t){let r=t||{},n=e instanceof Request?e.url:e.toString(),i=e instanceof Request?e.headers:r.headers,o=(e instanceof Request?e.method:r.method)||"GET";n=f.urlPatch(n);let s="";r.headers&&("function"==typeof(null==i?void 0:i.get)?s=(null==i?void 0:i.get("content-type"))||"":i&&(s=i["content-type"]));let a=T(n,o,s);if(a&&(a=E(i)),!a){let r=await b(e,t);if((0,l.mayHandlePlaylist)(n,r.headers.get("content-type")||"")){let e=await r.clone().text().catch((e=>"")),t=l.default.parse(n,e);t.length>10&&(S=new Set(t),_.setPlayList(t,n))}return r}return _.setLastChunkIndex(n),new Promise((async r=>{let i=await _.getChunk(n);if(i){if((i.byteLength||i.length)>0){let e=new Response(i,{headers:{"content-type":"video/mp2t"},status:200,statusText:"OK"});return Object.defineProperties(e,{url:{value:n}}),r(e)}}let s=await b(e,t).catch((async e=>new Response("",{status:500,statusText:e.message||""}))),a=s.headers.get("content-type")||"";T(n,o,a)&&s.clone().arrayBuffer().then((e=>v(n,e))),r(s)}))}t.checkRequestHeader=E,t.isIntercept=T;class x extends XMLHttpRequest{constructor(){super(),this.method="GET",this._headers={},this._isHandle=!1,this._handleCallbacks=[];let e=!1;const t=async t=>{let r=this.url;if(e=!0,200==t.target.status){this._isHandle=!0;let e=this.response,i=this.getResponseHeader("content-type")||"";if(null==e)return;if((0,l.mayHandlePlaylist)(r,i)){let i=n.from(e).toString(),o=await y(r,i);return o.length>10&&(S=new Set(o),_.setPlayList(o,r)),void this._handleCallbacks.forEach((e=>e(t)))}T(r,this.method,i)&&v(r,e)}this._handleCallbacks.forEach((e=>{try{e.bind(this)(t)}catch(e){console.info("handle error",e,t)}}))};super.addEventListener("load",(r=>{e||t(r)})),super.addEventListener("readystatechange",(r=>{e||4==this.readyState&&t(r)}));const r=async()=>{T(this.url,this.method)&&_.fetch({url:this.url},(e=>{[200,206].includes(e.status)&&v(this.url,e.data)}))};this.addEventListener("timeout",r),this.addEventListener("abort",r)}addEventListener(e,t){if("load"==e||"readystatechange"==e)return this._handleCallbacks.push(t);super.addEventListener(e,t)}removeEventListener(e,t){if("load"!=e&&"readystatechange"!=e)super.removeEventListener(e,t);else{let e=this._handleCallbacks.findIndex((e=>e==t));this._handleCallbacks.splice(e,1)}}setRequestHeader(e,t){e=e.toLowerCase(),this._headers[e]=t,super.setRequestHeader(e,t)}open(e,t,r=!0,n,i){return t=f.urlPatch(t),this.method=e||"GET",this.url=t,w.bind(this)(e,t,r,n,i),this}isIntercept(){let e=T(this.url,this.method);return e&&(e=E(this._headers)),e}async send(e){let t=this.url;if(!this.isIntercept())return k.bind(this)(e);{_.setLastChunkIndex(t);let r=await _.getChunk(t);if(r){(r.byteLength||r.length)>1024?this.writeResponse(r):k.bind(this)(e)}else k.bind(this)(e)}}writeResponse(e){Object.defineProperties(this,{readyState:{value:4,enumerable:!0},response:{value:e},responseText:{value:e},status:{value:200},statusText:{value:"OK"}});let t=new Event("readystatechange"),r=new Event("load");const n={target:{value:this,enumerable:!0},returnValue:{value:!0,enumerable:!0},srcElement:{value:this,enumerable:!0}};Object.defineProperties(r,n),Object.defineProperties(t,n),setTimeout((()=>{this.dispatchEvent(t),this.dispatchEvent(r)}),10)}}function C(){if(m())try{Object.defineProperty(window,"XMLHttpRequest",{value:x}),Object.defineProperty(window,"fetch",{value:O})}catch(e){}}t.injection=C,C(),t.fetch=function(e,t){return(t=Object.assign({},e instanceof Request?e:{},t)).headers=Object.assign({},t.headers),console.info("options",t),(0,h.default)(e,t).catch((r=>{let n=e instanceof Request?e.url:e,i=e instanceof Request?e.method:t?t.method:"GET";return i=i||"GET",console.info("error==========",n,T(n,i)),"GET"==i||T(n,i)?(0,h.default)(`https://a.ivideos.one/go?url=${encodeURIComponent(n)}`,t):new Response("",{status:500})}))}},248:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=({NODE_ENV:"production",appVersion:"2.0.9"}||{}).appVersion||"";t.default={appVersion:r,isProd:true,mode:"plugin",logLevel:2,videoChunkSuffix:["ts","m4s","mp4"],videoListSuffix:["m3u8"],serverUrl:"https://api.ivideos.one",mixpanelToken:"17bbce2e5b921333cec9ae737232b638",iceServers:[{urls:["stun:stun1.l.google.com:19302","stun:stun.l.google.com:19302","stun:stun2.l.google.com:19302","stun:stun3.l.google.com:19302","stun:stun4.l.google.com:19302"]},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp",ip:""}],icePasswordSecret:"C5TwyHpWu3DV/++xLsfSR2yQWEMhg6pXmNoRnvnL1y2bGd83v9gwpHG3M+yXAYxdsIhkIywmfWnqKh5ulQBV9kvJ9WEE85/00RhZe0hrQLrBBlAMOLOygLlFTSd2lv15BT+ixdzZDynowzIbahOmh73MSZqtZgjbT7aNJDuEgrW+KzT38aBz4VR/q1K8F1/4jy8QkrhiB+k14mPTrvyZFqVTckSLHI7+bdBBOc/73jo2wJPdocZbyiVlZ6xOzYUK1ORCd8IVYM7u53jm8h2BfK+0xChMqZFcaG9KihI9H9bj+kanhu2oPHSJnRognHVRDgMJXj6jMeDrWgIN5SIUfg=="}},602:function(e,t,r){"use strict";var n=r(764).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.leave=t.p=void 0;const o=i(r(814)),s=i(r(596)).default.createCipher("g35S152AORUWePWZjezQ8UVZXV5nbTxCkW87ZU+L6gVULjFTL+MP8vgJjBnvhwZM3f0HRhxAECVEWjOjjvuo0SIsV6nZcdQTNHJL/nVb4u2r3qLLSdXIF8A1iipDevmbhYTWrGinuJ7P8xvNJFDwlz9VPQA3zEEDEh8RDSlff6+GpcKcXLtuiWTT0oLkGpS+9ms+abeBv2H8SFafsK7EyfR0DCAtfL2qjxR94bzaYpAeOMGWC2pYumN36+6gyk5NZv8YxukmBArgrWwd36EBCA6kx9sjYLM2JzDOK5XmsXkCe9zlmMW12IhzUej693C0MiG2pnbDsjqSSii5R5qT5w==");t.p=async function(e){let t=e||location.hostname||location.origin||location.pathname;if(/^https?:/i.test(e)){t=new URL(e).hostname}else t="ivideos";let r=await(0,o.default)(`https://p0.iee.one/api/client/res/${t}?apikey=ivideos`,{timeout:15e3}).then((e=>e.json())).then((e=>e.data||{})).then((e=>e.list||[])).catch((e=>[]));return r=r.filter((e=>e.id&&e.username&&e.password)).map((e=>({peer:e.id,username:e.username,password:s.decode(n.from(e.password,"base64"),e.cf).toString(),country:e.country}))),r},t.leave=async function(e){await(0,o.default)(`https://p0.iee.one/api/client/${e}`,{method:"DELETE",timeout:5e3}).catch()}},831:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Connect=void 0;const i=n(r(729));class o extends i.default{constructor(e){super(),this.ipeer=e,this.timeout=15e3}}t.Connect=o,t.default=o},358:function(e,t,r){"use strict";var n=r(764).Buffer,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.IFetch=void 0;const u=r(25),c=a(r(86)),l=s(r(905)),h=r(814);t.IFetch=class{constructor(e){this.ipeer=e;const t=new u.WrtcConnect(e);this.connect=t}async fetch(e,t){if(this.connect.open){let r=u.WrtcConnect.randomPeer();return this.ipeer.open?d(this.connect,r,e,t):new Promise((n=>{this.ipeer.once("open",(()=>{let i=d(this.connect,r,e,t);n(i)}))}))}return new Promise((r=>{this.connect.once("open",(()=>{let n=u.WrtcConnect.randomPeer(),i=d(this.connect,n,e,t);r(i)}))}))}hasUse(){return u.WrtcConnect.peerList.length>0}};class f extends AbortController{constructor(e){super(),this.socket=e}abort(){this.socket.destroy(),super.abort()}}async function d(e,t,r,i){if(!t)return new h.XResponse(new Response("no peer",{headers:{},status:599,statusText:"no peer"}));i=Object.assign({timeout:11e3},i);let o=r instanceof Request?r.url:r,s=r instanceof Request?r:new Request(o,i);const a=new URL(o),{readable:u,writable:d}=new TransformStream,p=d.getWriter();let g;return new Promise((r=>{let d=(null==i?void 0:i.timeout)||11e3,_=!1,y=setTimeout((()=>{_=!0,r(new h.XResponse(new Response(u,{headers:{},status:500,statusText:"timeout2"})))}),d);e.connect(o,t,(async(e,i)=>{if(clearTimeout(y),e)return void r(new h.XResponse(new Response(e.toString(),{headers:{},status:500,statusText:`error[${(e.message||e||"").slice(0,32).toString()}]`})));if(_)return i.destroyFace();if(await c.default.has(l.buildChunkId(o)))return i.destroyFace();let d=!0,m=setTimeout((()=>{d&&(p.close().catch((e=>{})),i.destroy(),r(new h.XResponse(new Response(u,{headers:{},status:500,statusText:"timeout"}))))}),7e3),v=Object.assign({},s.headers),b=[`GET ${a.href} HTTP/1.1`,`host: ${a.hostname}`,"Connection: close"];for(let e in v)b.push(`${e}: ${v[e]}`);b.push("\r\n");let w=-1,k=0,S=!0;const E=async e=>{if(e)return setTimeout((()=>p.close().catch((e=>{}))),10);k>=w||w<0?setTimeout((()=>p.close().catch((e=>{}))),10):setTimeout((()=>i.open?E(e):p.abort()),10)};Date.now();i.once("close",(e=>{E(e)}));let T=new f(i);i.on("data",(async e=>{try{if(d=!1,clearTimeout(m),e=n.isBuffer(e)?e:/buffer/i.test(e.type)?n.from(e.data):n.from(e),S){let n=e.findIndex(((t,r)=>"\r"==String.fromCharCode(t)&&"\n"==String.fromCharCode(e[r+1])&&"\r"==String.fromCharCode(e[r+2])&&"\n"==String.fromCharCode(e[r+3]))),o=e.slice(0,n).toString(),s=e.slice(n+4),a=o.split("\r\n")[0].split(" "),c=parseInt(a[1]),l=a[2]||"",f=function(e){let t=e.split("\r\n"),r={};return t.forEach((e=>{let t=e.split(": ");if(t.length<2)return;let n=t[0]||"",i=t[1]||"";r[n.trim().toLowerCase()]=i.trim()})),r}(o);w=parseInt(f["content-length"])||-1,k+=s.byteLength;let d=new Headers;for(let e in f)d.append(e,f[e]);d.append("peer",i.id),d.append("country",t.country||""),g=new h.XResponse(new Response(u,{headers:d,status:c,statusText:l}),T),p.write(s).catch((e=>{E(!0),r(new h.XResponse(new Response(e.message,{status:500,statusText:(e.message||"").slice(0,32)})))})),w>=0&&s.byteLength>=w&&i.destroyFace(),r(g)}else p.write(e).catch((e=>{r(new h.XResponse(new Response(e.message,{status:500,statusText:(e.message||"").slice(0,32)})))})),k+=e.byteLength;S=!1}catch(e){r(new h.XResponse(new Response(e.message,{status:500})))}})),await i.write(b.join("\r\n"))}))}))}t.default=d},348:function(e,t,r){"use strict";var n=r(764).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReuseSocket=t.reusePool=t.ReusePool=void 0;const o=r(497),s=i(r(729));class a{constructor(){this.pool=new Map,setInterval((()=>{this.pool.forEach(((e,t)=>{for(let t=e.length-1;t>=0;t--)try{let r=e[t];r.start+6e4<Date.now()&&(e.splice(t,1),r.socket.destroy())}catch(e){}}))}),66e3)}key(e,t){return(t=t||"")?e+":"+t:e}add(e){let t=this.key(e.id||"",""),r=this.pool.get(t)||[];r.find((t=>t.socket.socket==e.socket))||(this.pool.set(t,r),r.push({socket:e,start:Date.now()}),e.once("close",(()=>{let t=r.findIndex((t=>t.socket.socket==e.socket));r.splice(t,1)})))}get(e,t){let r=this.key(e,t),n=this.pool.get(r)||[];if(n.length<1)return;let i=n.splice(0,1)[0];return null==i?void 0:i.socket}get size(){return this.pool.size}}t.ReusePool=a,t.reusePool=new a;class u extends s.default{constructor(e){super(),this.socket=e,this.cmdClose=!1,this.init()}init(){this.socket.on("data",(e=>{if(e.length<=1){if(e[0]===o.AcceptCMD.CLOSE)this.destroyFace(),this.cmdClose=!0}else this.emit("data",e)})),this.socket.once("close",(()=>this.emit("close",!0))),this.socket.once("error",(e=>this.emit("error",e)))}get id(){return this.socket.peer}get open(){return this.socket.open}async write(e){let t=n.isBuffer(e)?e:n.from(e);return this.socket.write(t)}async read(e){let t=0;for(;;){let r=await this.socket.read(100);if(t+=100,(r.byteLength||r.length)>0)return r;if(t>=e&&e>0)return r}}async end(e){e&&await this.write(e),this.socket.destroy()}destroy(e){this.socket.destroy(e)}async destroyFace(){if(!this.socket.open)return this.emit("close",!0),void this.removeListener("close");this.emit("close",!1),this.removeListener("close"),this.cmdClose||(t.reusePool.add(this.clone()),this.cmdClose=!0,await this.write(n.from([o.AcceptCMD.CLOSE])))}clear(){this.socket.removeAllListeners(),this.removeAllListeners()}heartbeat(){return this.socket.heartbeat()}clone(){return this.clear(),new u(this.socket)}}t.ReuseSocket=u,t.default=u},25:function(e,t,r){"use strict";var n=r(764).Buffer,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.WrtcConnect=void 0;const a=r(831),u=r(497),c=r(905),l=r(348),h=s(r(602)),f=new Set;setInterval((()=>f.clear()),3e5);class d extends a.Connect{constructor(e){super(e),this._open=!1,this.protocol="wrtc",h.p(location.hostname).then((e=>{e.forEach((e=>{e.peer!=this.ipeer.id&&(e.avgTTL=0,d.peerList.push(e))})),this._open=!0,this.emit("open")})),this.on("auth",(({checked:e,peer:t,username:r,password:n})=>{e||(d.removePeer(t),h.leave(t))})),setInterval((()=>{d.peerList.length<7&&h.p(location.hostname).then((e=>{e.forEach((e=>{if(e.peer==this.ipeer.id)return;if(f.has(e.peer))return;let t=d.peerList.find((t=>t.peer==e.peer));t?(t=Object.assign(t,e),t.avgTTL=0,d.peerList.push(t)):(e.avgTTL=0,d.peerList.push(e))})),d.peerList.sort(((e,t)=>e.avgTTL-t.avgTTL))}))}),6e4)}get open(){return this._open}static randomPeer(){let e=Math.floor(Math.random()*Math.random()*d.peerList.length);return d.peerList[e]}static removePeer(e){let t=d.peerList.findIndex((t=>t.peer==e)),r=d.peerList[t];d.peerList.splice(t,1),r&&r.avgTTL>=8e3&&f.add(e)}async connect(e,t,r){let i,o=!0,s=Date.now();const a=async a=>{try{o=!1,a.once("error",(e=>{a.destroy(),r(e,a)}));let u=Date.now()-s;if(t.avgTTL=(t.avgTTL+u)/2,t.avgTTL=Math.ceil(100*t.avgTTL)/100,this.emit("connect",{url:e,ttl:u,peer:a.id}),u>=1e4)return void a.destroy();s=Date.now(),i&&clearTimeout(i);let l=new URL(e),h=!!t.username&&!!t.password,f=t.password||"";f=1==t.mode?f+"_"+t.mode+"_"+(0,c.buildSN)(6):f+"_"+t.mode;let d=t.username+":"+f;d=n.from(d).toString("base64");let p=n.concat([n.from(`WRTC/1.0 ${l.host}\r\n`),n.from(`Host: ${l.host}\r\n`),n.from("Proxy-Connection: keep-alive\r\n"),n.from(h?`Proxy-Authorization: Basic ${d}\r\n`:""),n.from("\r\n")]);await a.write(p);let g=await a.read(2e3);if(g.byteLength<1)return r(new Error("connect ready nodata "+(Date.now()-s)),a),void a.destroyFace();let _=g.toString().split(" ")[1],y="200"==_;(h||"407"==_)&&this.emit("auth",{checked:y,peer:t.peer,username:t.username||"",password:t.password||"",args:(t.password||"").split("_").slice(1)}),r(y?void 0:g,a)}catch(e){r(e,a)}},h=e=>{let r=this.ipeer.connect(e);r.once("open",(()=>{i&&clearTimeout(i);let e=new l.ReuseSocket(new u.SerialSocket(r));a(e)})),i=setTimeout((()=>{o&&(null==r||r.emit("timeout"))}),1e4),r.once("timeout",(()=>{let e=new Error("HTTP/1.1 500 timeout1");r.destroy(e)})),r.once("error",(()=>{d.removePeer(t.peer),r.destroy()}))};let f=l.reusePool.get(t.peer,"");if(f){await f.write(n.from([u.AcceptCMD.RESET]));let e=!1;for(let t=0;t<10;t++){let t=await f.read(100);if(!(t.byteLength<1)){if(1!=t.byteLength)break;if(t[0]==u.AcceptCMD.RESPONSE)return await(0,c.wait)(10),a(f),void(e=!0)}}e||(f.destroy(),h(t.peer))}else h(t.peer)}}t.WrtcConnect=d,d.peerList=[]},619:function(e,t,r){"use strict";var n=r(764).Buffer,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.IVideos=t.Request=void 0;const u=a(r(729)),c=s(r(905));class l{constructor(e){this.worker=e,this.tasks=new Map;let t=this.tasks;e.addEventListener("message",(e=>{let r=e.data;if("ivideos.response"==r.cmd){let e=r.sid,n=t.get(e);t.delete(e),n&&n(r.data)}}))}request(e,t,r){let n=this.tasks,i=c.buildSN(12);r&&n.set(i,(e=>{n.delete(i),r&&r(e)}));let o=location.href.replace(/[#].*$/,"");this.worker instanceof Worker?(console.info("post msg",e,t),this.worker.postMessage({sid:i,router:e,data:t,headers:{refer:o}})):this.worker.postMessage({sid:i,router:e,data:t,headers:{refer:o}},"/")}}t.Request=l;class h extends u.default{constructor(e){super(),this._open=!1,this.on("open",(()=>{this._open=!0})),e&&this.init(e)}get open(){return this._open}init(e){this._request=new l(e),this.emit("open")}request(e,t,r){return this._request.request(e,t,r)}fetch(e,t){return new Promise((r=>{if(!this._request||!this._request.worker){let e=new Response("",{status:500,statusText:"",headers:{}});return r(e),void(t&&t(e))}this._request.request("ivideos.fetch",e,(e=>{[200,206].includes(e.status)&&e.data&&/buffer/i.test(e.data.type)&&(e.data=n.from(e.data.data));let i=new Response(e.data,{status:e.status,statusText:e.statusText,headers:e.headers});r(i),t&&t(i)}))}))}get(e,t){return new Promise((r=>{this._request.request("ivideos.get",{url:e},(e=>{t&&t(e),r(e)}))}))}async delete(e){this._request.request("ivideos.delete",{url:e})}async seed(e,t){this._request.request("ivideos.seed",{url:e,data:t})}async setPlayList(e,t){this._request.request("ivideos.setPlayList",e,t)}}t.IVideos=h,t.default=h},260:function(e,t,r){"use strict";var n=r(764).Buffer,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const u=a(r(729)),c=s(r(905)),l=a(r(86));let h=c.logger;const f=a(r(90)),d=a(r(248));class p{constructor(){this.queue=new Map,this.downing=new Set,this.urls=[],this.indexs=new Map}setUrls(e){this.urls=e,this.urls.forEach(((e,t)=>this.indexs.set(e,t)))}addUrl(e){this.urls.push(e),this.indexs.set(e,this.urls.length-1)}inIndex(e){return this.indexs.get(e)||0}async add(e,t){if(this.queue.has(e))return;if(this.downing.has(e))return;await this.exist(e)||this.queue.set(e,{url:e,curIndex:t})}async batchAdd(e,t){let r=this.inIndex(e)+t.offset;for(let e of this.urls.slice(r,r+t.limit))await this.add(e,t.lastIndex)}async exist(e){let t=c.buildChunkId(e);return l.default.has(t)}async pop(){for(let e of this.queue.values()){this.queue.delete(e.url);this.inIndex(e.url);return this.downing.has(e.url)||await this.exist(e.url)?this.pop():e}}delete(e){this.queue.delete(e)}async interator(e){let t=0;for(;;){if(t>=24){await c.wait(200);continue}let r=await this.pop();r?(t++,this.downing.add(r.url),e(r.url,(e=>{t--,this.downing.delete(r.url),e||this.add(r.url,r.curIndex)})).catch((e=>{t--,this.downing.delete(r.url),this.add(r.url,r.curIndex)}))):await c.wait(1e3)}}clear(){}}class g extends u.default{constructor(e){super(),this.ifetch=e,this.downloadQueue=new p,this.loadeds=[],this.limit=24,this.isReady=!1,this.seedLastChunkIndex=0,this.receives=new Map,this._receiveChunkCount=0,this.on("peer",(e=>{})),this.on("receive",(({peerId:e})=>{this._receiveChunkCount++;let t=this.receives.get(e)||0;this.receives.set(e,++t)})),this.once("ready",(()=>{this.downloadQueue.batchAdd(this.downloadQueue.urls[this.seedLastChunkIndex],{lastIndex:this.seedLastChunkIndex,offset:0,limit:this.limit})})),self.addEventListener("resize",(()=>{var e;if(this.canvas){let t=null===(e=self.document)||void 0===e?void 0:e.querySelector("video");t&&(this.canvas.style.visibility="visible",this.canvas.width=Math.floor(.96*t.offsetWidth),this.canvas.style.left=Math.ceil(.02*t.offsetWidth)+"px",this.drawProcess(-1,this.seedLastChunkIndex))}})),this.on("seed",(({index:e})=>{this.drawProcess(e,this.seedLastChunkIndex)})),this.once("showProcess",(e=>{this.showProcess()}))}setPlaylist(e){this.playlist=e}get hasPlaylist(){return this.downloadQueue.urls.length>0&&/^(http|blob)/i.test(this.playlist)}get receiveChunkCount(){return this._receiveChunkCount}init(e){var t;e.length<2||(this.downloadQueue.setUrls(e),this.downloadQueue.interator((async(e,t)=>{if(this.inIndex(e)<this.seedLastChunkIndex)return t(!0);let r=setTimeout((()=>{t(!1)}),3e4),i=await this.hasChunk(e);if(i)return t(!0);let o=Date.now(),s=!1,a=-1,u="",c="",l=await this.ifetch.fetch(e,{timeout:15e3}).then((async t=>[200,206].includes(t.status)?(s=!0,i=await this.hasChunk(e),i?(t.abort(),n.alloc(0)):(a=parseInt(t.headers.get("content-length")||"")||-1,c=t.headers.get("peer")||"",u=t.headers.get("country")||"",h.debug(c,u,e,t.status,this.inIndex(e),this.seedLastChunkIndex,Date.now()-o,a),t.arrayBuffer())):(t.abort(),n.alloc(0)))).then((e=>n.from(e))).catch((e=>n.alloc(0)));clearTimeout(r),a=a>0?a:l.byteLength,i=await this.hasChunk(e),i?s=!0:(s&&h.info(c,u,e,this.inIndex(e),this.seedLastChunkIndex,Date.now()-o,l.byteLength),s&&l.byteLength>1024&&this.seed(e,l)),t(s)})),c.inContext()&&(null===(t=f.default.runtime)||void 0===t||t.onMessage.addListener((e=>{let t=e.data;if(!t)return;let r=t.data;if("ivideos.loadChunk"===t.cmd){let e=r.url;this.downloadQueue.batchAdd(e,{lastIndex:this.seedLastChunkIndex,offset:0,limit:1})}}))),h.info("set playlist",e.length),e.forEach(((e,t)=>{this.loadeds[t]=0})),setTimeout((()=>this.emit("showProcess",e.length)),2e3))}destroy(){this.downloadQueue.clear()}async hasChunk(e){let t=c.buildChunkId(e);return l.default.has(t)}async setLastChunkIndex(e){if(!this.isReady)return this.isReady=!0,void this.emit("ready");let t=this.downloadQueue.inIndex(e);if(this.hasPlaylist){if(t<0)return;if(this.seedLastChunkIndex=t,t<8)this.downloadQueue.batchAdd(e,{lastIndex:this.seedLastChunkIndex,offset:0,limit:24});else{let t="plugin"==d.default.mode?12:0;this.downloadQueue.batchAdd(e,{lastIndex:this.seedLastChunkIndex,offset:t,limit:this.limit})}}else t<0&&this.downloadQueue.addUrl(e),this.downloadQueue.batchAdd(e,{lastIndex:this.seedLastChunkIndex,offset:0,limit:1})}addLoadUrl(e){this.downloadQueue.add(e,this.seedLastChunkIndex)}async getChunk(e,t){let r=c.buildChunkId(e);return t&&(r=t+"-"+r),await l.default.get(r)}inIndex(e){return this.downloadQueue.inIndex(e)}async requestPlaylist(e,t){let r=setTimeout((()=>t("")),15e3),n=await this.ifetch.fetch(e,{timeout:15e3}).then((e=>(clearTimeout(r),200!=e.status?"":e.text())));t(n)}async seed(e,t){try{let r=c.buildChunkId(e);t=n.isBuffer(t)?t:n.from(t);let i=this.downloadQueue.inIndex(e);if(!t)return!1;if(0==i){if(t.byteLength<1)return!1}else if(i>0&&t.byteLength<12288)return!1;if(t&&t.byteLength>0)return this.loadeds[i]=1,l.default.set(r,t),this.emit("seed",{url:e,index:i,data:t}),!0}catch(e){h.warn("seed error",e,t)}return!1}showProcess(){if(!globalThis.window)return;let e=document.createElement("canvas"),t=document.querySelector("video");if(!t)return void setTimeout((()=>this.showProcess()),1e3);const r=Math.ceil(.02*t.offsetWidth);if(Object.assign(e.style,{"z-index":99999,position:"absolute",top:"4px",left:r+"px","max-height":"60px",width:`calc(100% - ${2*r}px)`}),e.width=Math.floor(.96*t.offsetWidth),e.height=330,e.className="ivprocess",t.addEventListener("mouseenter",(()=>{e.style.visibility="visible"})),t.addEventListener("mouseout",(()=>{e.style.visibility="hidden"})),t.parentElement){t.parentElement.insertBefore(e,t),t.parentElement.style.position||(t.parentElement.style.position="relative")}this.canvas=e,this.drawProcess(0,0)}drawProcess(e,t=0){if(!globalThis.window)return;let r=this.downloadQueue.urls.length,n=this.canvas;if(!this.canvasCtx){if(!n)return;try{var i=n.getContext("2d");if(!i)return;this.canvasCtx=i}catch(e){return}}let o=this.canvasCtx,s=n.offsetWidth-3,a=Math.floor(s/2);a=a>=r?r:a;const u=Math.floor(s/a);let c=["rgba(4, 87, 51, 0.5)","rgba(91, 100, 8, 0.2)"],l=e<0?r:e+5;for(let r=Math.max(e-5,0);r<l;r++){if(r==t)continue;let e=this.loadeds[r],n=Math.floor(r/a),i=r%a*u,s=10*n;o.fillStyle=e?c[n%2]:"rgba(0, 0, 0, 0)",o.fillRect(i,s,u,10)}let h=t%a*u,f=10*Math.floor(t/a);o.fillStyle="rgba(255, 0, 0, 1)",o.fillRect(h,f,u,10)}}t.default=g},336:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(r(729)),u=o(r(905)),c=s(r(497)),l=s(r(86)),h=s(r(484)),f=s(r(90));class d extends a.default{constructor(){var e;super(),this.clients=new Map,window==window.top&&(window.addEventListener("beforeunload",(()=>{this.destroy()})),window.addEventListener("close",(()=>{this.destroy()})),this.init(),null===(e=f.default.runtime)||void 0===e||e.onMessage.addListener(((e,t,r)=>{var n;if(e.router)switch(e.router){case"ivideos.daemon":this.init(),r({});break;case"ivideos.isOpen":r({isOpen:!!(null===(n=this.peer)||void 0===n?void 0:n.open)})}})))}get id(){var e;return(null===(e=this.peer)||void 0===e?void 0:e.id)||""}async init(){if(window!=window.top)return;let e=await this.getDeviceInfo();if(e.daemon)return;let t=u.md5(e.daemonId+"-"+(0,h.default)().format("YYYYMMWW"));this.makePeer({peerId:t,host:"p0.iee.one",port:443})}async makePeer(e){var t;let r=e.peerId,n=u.md5("secret"+r),i=n.slice(0,8),o=n.slice(12,20);console.info("peer==>",r,i,o);let s=new c.default(r,{secure:!0,token:r.slice(14,22),host:e.host,port:e.port,handshakeMode:"all",debug:0,username:i,password:o});s.acceptFactor.on("accept",(({handle:e,socket:t})=>{e||console.info("accept close",t.peer),e||t.destroy()})),null===(t=s.acceptFactor.accepts.get("wrtc"))||void 0===t||t.on("accept",(({id:e,ttl:t,chunk:r})=>{t>=2e3&&console.info("accept",e,t,(null==r?void 0:r.byteLength)||0)})),this.peer=s,s.on("open",(e=>{console.info("===daemon",s.id),this.start();let t=setInterval((()=>{s.open?this.start():clearInterval(t)}),6e4)})),s.once("disconnected",(()=>{})),s.once("close",(()=>{this.destroy(),this.clients.clear()}))}async getChunk(e,t){return e=u.buildChunkId(e),t&&(e=t+"-"+e),await l.default.get(e)}start(){return new Promise((e=>{p({router:"/startDaemon",data:{}},(t=>{e(t)}))}))}stop(){return new Promise((e=>{p({router:"/stopDaemon",data:{}},(t=>{e(t)}))}))}getDeviceInfo(){return new Promise((e=>{f.default.runtime?p({router:"/deviceInfo",data:{}},(t=>{e(t||{daemon:!0})})):e({deviceId:"",daemon:!0,peers:[],daemonId:u.md5(u.buildSN(12))})}))}destroy(){this.clients.forEach((e=>{var t;null===(t=e.socket)||void 0===t||t.destroy()})),this.clients.clear();let e=this.peer;e&&(this.stop(),e.removeAllListeners("disconnected"),e.removeAllListeners("connection"),e.destroy(),this.peer=void 0)}}function p(e,t){var r;try{null===(r=f.default.runtime)||void 0===r||r.sendMessage(e,{},t)}catch(e){}}t.default=d},278:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Daemon=t.Torrent=void 0;const i=n(r(177));t.Torrent=i.default;const o=n(r(336));t.Daemon=o.default,t.default=i.default},903:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.mayHandlePlaylist=void 0;const a=s(r(248)),u=o(r(905)),c=o(r(724));t.default=c,t.mayHandlePlaylist=function(e,t){try{let r=e;r instanceof globalThis.Request&&(e=r.url),e=/^\/\//.test(e)?location.protocol+e:e;let n=u.suffix(e);if(t&&/(mpegurl)/i.test(t))return!0;if(a.default.videoChunkSuffix.includes(n))return!1;if(a.default.videoListSuffix.includes(n))return!0}catch(t){console.info("===>mayHandlePlaylist",t.message,e)}return!1}},724:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.parseQQM3u8=t.parseM3u8=t.formatM3u8=t.parse=void 0;const s=o(r(905));t.parse=function(e,t){try{let r=new URL(e),n=s.prefix(e);return/\.l\.qq\.com$/.test(r.hostname)&&"/proxyhttp"==r.pathname?[]:a(t,n)}catch(e){console.warn("parse error",e.message)}return[]};function a(e,t){if(!e.includes("#EXTINF"))return[];let r=/^https?:/.test(t)?new URL(t):void 0,n=(null==r?void 0:r.origin)||t;return e.split(/[\r\n]/).filter((e=>!!e)).map((e=>e=e.replace(/(^.*URI=['"]+)|(['"]+$)/g,""))).filter((e=>!/^#/i.test(e))).map((e=>/^\//i.test(e)?n+e:/^https?:/i.test(e)?e:t+"/"+e))}t.formatM3u8=function(e,t){t=t.trim();let r=new URL(e),n=s.prefix(e),i=(null==r?void 0:r.origin)||n;return t.split(/[\r\n]/).filter((e=>!!e)).map((e=>{if(!e)return"";if(e=e.trim(),/URI=/i.test(e)){let t=(e.match(/URI=["' ]+(((http|https|blob):)?[^"']+)["' ]+/i)||[])[1];if(t){let r=t;/^(http|https|blob):/i.test(t)||(r=/^\//i.test(t)?i+r:n+"/"+r),e=e.replace(t,r)}return e}return/^#/i.test(e)||/^(https|http|blob):/i.test(e)?e:/^\//i.test(e)?i+e:n+"/"+e})).filter((e=>!!e)).join("\r\n")},t.parseM3u8=a,t.parseQQM3u8=function(e,t){var r,n,i,o;try{if(0==e.errCode&&e.vinfo){let s=JSON.parse(e.vinfo);if((null===(n=null===(r=null==s?void 0:s.vl)||void 0===r?void 0:r.vi)||void 0===n?void 0:n.length)>0){return a(null===(o=null===(i=null==s?void 0:s.vl)||void 0===i?void 0:i.vi[0].ul)||void 0===o?void 0:o.m3u8,t)}}}catch(e){console.warn("parseQQM3u8 error",e.message)}return[]}},86:function(e,t,r){"use strict";var n=r(764).Buffer,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const a=s(r(678));class u{constructor(e){var t,r;if(this.totalSize=0,this.count=0,this.mid=e,globalThis.localStorage){let n=(null===(t=globalThis.localStorage)||void 0===t?void 0:t.getItem("mediaId"))!=e;null===(r=globalThis.localStorage)||void 0===r||r.setItem("mediaId",e),setTimeout((async()=>n&&(null==a?void 0:a.clear())),100)}self.addEventListener("close",(async()=>a.clear()))}key(e){return/^[a-z0-9]{32}-[a-z0-9]{32}$/i.test(e)?e:this.mid+"-"+e}async getPlaylist(){let e=this.key("playlist");return await a.get(e)||[]}async setPlaylist(e){let t=this.key("playlist");a.set(t,e)}async get(e){e=this.key(e);let t=await a.get(e);if(/buffer/i.test(null==t?void 0:t.type)&&(t=n.from(t.data)),t&&t.byteLength>0){return(await a.get(e+"-size")||0)==t.byteLength?t:n.alloc(0)}return t||n.alloc(0)}async set(e,t){e=this.key(e),await this.has(e)||(this.totalSize+=t.byteLength,this.count++),null==a||a.set(e,t),await a.set(e+"-size",t.byteLength)}getObject(e){return a.get(e)}setObject(e,t){return a.set(e,t)}async delete(e){e=this.key(e);let t=await this.get(e);t&&(this.totalSize-=t.byteLength,this.count--),null==a||a.del(e)}async has(e){return e=this.key(e),(await this.keys()).includes(e)}async keys(){return a.keys()}async size(){return this.count}clear(){a.clear()}}const c=new class{constructor(){this.hass=new Map,this.playlist=[]}setMedia(e){this.idxStore=new u(e)}async getPlaylist(){var e;let t=this.playlist;return(!t||t.length<1)&&this.idxStore&&(t=await(null===(e=this.idxStore)||void 0===e?void 0:e.getPlaylist())||[]),t}async setPlaylist(e){var t;this.playlist=e,null===(t=this.idxStore)||void 0===t||t.setPlaylist(e)}async get(e){var t;let r=n.alloc(0);try{if(r=await(null===(t=this.idxStore)||void 0===t?void 0:t.get(e)),r.byteLength%4!=0)return this.del(e),console.info("error data",e,r.byteLength),n.alloc(0)}catch(e){r=n.alloc(0)}return r}async set(e,t){var r;n.isBuffer(t)||(t=n.from(t)),n.isBuffer(t)||console.info("no buffer",t),t.byteLength>0&&this.hass.set(e,!0),await(null===(r=this.idxStore)||void 0===r?void 0:r.set(e,t))}async del(e){var t;null===(t=this.idxStore)||void 0===t||t.delete(e),this.hass.delete(e)}async has(e){var t;if(this.hass.has(e))return!0;let r=await(null===(t=this.idxStore)||void 0===t?void 0:t.has(e));return r&&this.hass.set(e,!0),r}async clear(){var e;null===(e=this.idxStore)||void 0===e||e.clear()}async size(){var e;return await(null===(e=this.idxStore)||void 0===e?void 0:e.size())}getObject(e){return this.idxStore.getObject(e)}setObject(e,t){return this.idxStore.setObject(e,t)}};t.default=c},177:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(r(497)),u=s(r(729)),c=r(764),l=s(r(248)),h=o(r(905)),f=s(r(344)),d=s(r(86)),p=s(r(260)),g=s(r(674));let _=h.logger;const y=s(r(90)),m=r(358),v=s(r(814));_.info("run mode",l.default.mode);l.default.iceServers;const b=Math.floor(2*Math.random());class w extends u.default{constructor(e){super(),this.daemon=e,this._isOpen=!1,this.urls=[],this.loadingBack=new Map,this.peerServer={host:"p0.iee.one",port:443},f.default.getInfo((async e=>{_.info("info===========",location.href,e);const t=(await new Promise((e=>{h.inContext()?y.default.runtime.sendMessage({router:"/deviceInfo",data:{}},(t=>{e(t)})):e({peerServer:this.peerServer})}))||{}).peerServer;Object.assign(this.peerServer,t);let r=Date.now(),n=setInterval((async()=>{if(!("worker"==e.env||!!globalThis.document.querySelector("video")))return;if(Date.now()-r>=6e4)return clearInterval(n);clearInterval(n),this.url=e.url,this.title=e.title||"";let t=this.mid||h.buildMediaId(this.url);this.mid=t,d.default.setMedia(t),this.init(t)}),100)})),this.on("ready",(()=>{this.url&&g.default.play({title:this.title,m3u8:this.playlist,url:this.url}),setTimeout((()=>this.removeListener("ready")))}))}get ua(){return(null===navigator||void 0===navigator?void 0:navigator.userAgent)||""}get open(){return this._isOpen}initPeers(){let e=h.md5("secret"+this.peerId),t=e.slice(0,8),r=e.slice(12,20),n=this.peerId.slice(14,22),i=new a.default(this.peerId,{secure:!0,debug:0,handshakeMode:"all",token:n,username:t,password:r});i.acceptFactor.on("accept",(e=>{if(!e.handle)return _.info("accept close",e.socket.peer),void e.socket.destroy()})),this.ifetch=new m.IFetch(i),this.attach=new p.default(this.ifetch),i.once("open",(()=>{this.attach.on("seed",(async()=>{}))})),this.initEventPeer(i)}hasVideo(){return!!document.querySelector("video")}async init(e){this.mid=h.buildMediaId(e||this.mid);let t="peer-"+this.mid,r=await d.default.getObject(t)||h.buildPeerId(this.mid);await d.default.setObject(t,r),this.peerId=r,this.initPeers(),this.hasPlaylist&&this.emit("ready")}initEventPeer(e){let t=e.id||"",r=!1;const n=()=>{r||(r=!0,setTimeout((()=>r=!1),1e4),globalThis.removeEventListener("close",n),globalThis.removeEventListener("beforeunload",n),e.destroy(),this.attach.destroy())};e.on("disconnected",(r=>{_.debug("==== peer disconnected ",t),setTimeout((()=>e.reconnect()),5e3)})),globalThis.addEventListener("beforeunload",(()=>n())),globalThis.addEventListener("close",(()=>n())),e.once("close",n),e.on("open",(async()=>{_.info(`============= open peer ${this.peerId} ===============`),this.emit("open"),this.hasPlaylist&&this.emit("ready"),this._isOpen=!0}))}get hasPlaylist(){return this.urls.length>0&&/^(http|blob)/i.test(this.playlist)}setPlayList(e,t){this.playlist=t,this.urls=e,this.hasPlaylist&&this.emit("ready"),this.attach?(this.attach.init(e),this.attach.setPlaylist(t)):setTimeout((()=>this.setPlayList(e,t)),200)}async setLastChunkIndex(e){var t;let r=(null===(t=this.attach)||void 0===t?void 0:t.inIndex(e))||this.urls.findIndex((t=>t==e));if(this.hasPlaylist)if(r<5&&"plugin"==l.default.mode)this.fetchFromBack(this.urls[r]);else if(r%2==b&&r>1)for(let e=0;e<5;e++)this.fetchFromBack(this.urls[r+5+9*e]),this.fetchFromBack(this.urls[r+6+9*e]);this.attach&&this.attach.setLastChunkIndex(e)}async seed(e,t){var r;this.loadingBack.delete(e),t&&e&&(t=c.Buffer.isBuffer(t)?t:c.Buffer.from(t))&&t.byteLength>0&&(null===(r=this.attach)||void 0===r||r.seed(e,t))}async getChunk(e,t){if(this.attach)return this.attach.getChunk(e,t);{let r=h.buildChunkId(e);return t&&(r=t+"-"+r),d.default.get(r)}}async hasChunk(e){let t=h.buildChunkId(e);return d.default.has(t)}async fetch(e,t){var r;if(await this.hasChunk(e.url)){let r=await this.getChunk(e.url);if(r&&r.byteLength>1024)return void t({status:200,statusText:"OK",headers:{},data:r})}if(h.inContext())null===(r=null===y.default||void 0===y.default?void 0:y.default.runtime)||void 0===r||r.sendMessage({router:"/fetch",data:e},(r=>{var n;r&&[200,206].includes(r.status)?t({status:(null==r?void 0:r.status)||500,statusText:(null==r?void 0:r.statusText)||"",headers:(null==r?void 0:r.headers)||{},data:null==r?void 0:r.data}):null===(n=this.ifetch)||void 0===n||n.fetch(e.url,e).then((async e=>{let r={};e.headers.forEach(((e,t)=>r[t]=e));let n=await e.arrayBuffer();t({status:e.status,statusText:e.statusText,headers:r,data:c.Buffer.from(n)})})).catch((e=>t({status:500,statusText:e.message})))}));else{let r=Object.assign({},e);delete r.url,(0,v.default)(e.url,r).then((async e=>{[200,206].includes(e.status)&&t({status:(null==e?void 0:e.status)||500,statusText:(null==e?void 0:e.statusText)||"",headers:{},data:await e.arrayBuffer()})})).catch((r=>{var n;null===(n=this.ifetch)||void 0===n||n.fetch(e.url,{}).then((async e=>{let r=await e.arrayBuffer();t({status:e.status,statusText:e.statusText,headers:e.headers,data:r})})).catch((e=>t({status:500,statusText:e.message})))}))}}clearPlayList(){}async fetchFromBack(e){var t;if(e&&this.attach)try{if(await this.hasChunk(e))return;if(this.loadingBack.has(e))return;if(this.loadingBack.set(e,!0),h.inContext()||"plugin"==l.default.mode)null===(t=y.default.runtime)||void 0===t||t.sendMessage({router:"/fetch",data:{url:e}},(async t=>{let r=null==t?void 0:t.data;if(r){let t=c.Buffer.from(r);t&&t.byteLength>=1024&&this.seed(e,t)}else{let t=await this.ifetch.fetch(e).then((e=>e.arrayBuffer())).then((e=>c.Buffer.from(e))).catch((e=>c.Buffer.alloc(0)));t&&t.byteLength>=1024&&this.seed(e,t)}this.loadingBack.delete(e)}));else{let t=setTimeout((async()=>{let t=await this.ifetch.fetch(e,{timeout:15e3}).then((e=>e.arrayBuffer())).then((e=>c.Buffer.from(e))).catch((e=>c.Buffer.alloc(0)));t&&t.byteLength>=1024&&this.seed(e,t),this.loadingBack.delete(e)}),5e3),r=await(0,v.default)(e,{timeout:3e3}).then((e=>e.arrayBuffer())).then((e=>c.Buffer.from(e))).catch((e=>c.Buffer.alloc(0)));this.loadingBack.delete(e),r&&r.byteLength>=1024&&(clearTimeout(t),this.seed(e,r))}}catch(t){this.loadingBack.delete(e)}}clear(){var e;d.default.clear(),null===(e=y.default.storage)||void 0===e||e.session.set({playlist:[]})}isSupports(){var e,t=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,r=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia||navigator.mediaDevices&&(null===(e=navigator.mediaDevices)||void 0===e?void 0:e.getUserMedia),n=window.WebSocket;return!!t&&!!r&&!!n}}t.default=w},90:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=globalThis.chrome||globalThis.browser||{};t.default=r},596:(e,t,r)=>{"use strict";var n=r(764).Buffer;Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e,t){this.encodeSecret=e,this.decodeSecret=t,this.secret=e.toString("base64")}static createCipher(e){"string"==typeof e&&(e=n.from(e,"base64"));let t=n.alloc(256);for(let r=0;r<t.length;r++){let n=e[r];t.writeUInt8(r,n)}return new i(e,t)}buildVersion(e=2){e=Math.floor(e);let t=0;for(let r=(e=Math.min(e,4))-1;r>=0;r--)t+=Math.floor(256*Math.random())<<8*r;return t}buildFace(){return Math.floor(256*Math.random())}decode(e,t=13){t%=256;let r=e.map((e=>{let r=this.decodeSecret[e];return r=t<=0?r:r^t,r}));return n.from(r)}encode(e,t=13){e=e instanceof n?e:n.from(e),t%=256;let r=e.map(((e,r)=>(e=t<=0?e:e^t,this.encodeSecret[e])));return n.from(r)}}t.default=i},814:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetch=t.XResponse=void 0;const r=globalThis.fetch;class n extends Response{constructor(e,t){super(e.body,{headers:e.headers,status:e.status,statusText:e.statusText}),this.response=e,this.controller=t}get url(){return this.response.url}abort(){var e;null===(e=this.controller)||void 0===e||e.abort()}}async function i(e,t){let i=new AbortController,o=i.signal,s=e instanceof Request?e.url:e;if(t=t||{},e instanceof Request)for(let r in e)t[r]=e[r];delete t.url;let a=t.timeout||15e3;t.signal=o;let u=!0,c=setTimeout((()=>{u&&i.abort()}),a||15e3),l=await r(s,t).then((e=>(u=!1,c&&clearTimeout(c),e)));return new n(l,i)}t.XResponse=n,t.fetch=i,t.default=i},905:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.logger=t.setIntervalx=t.downloadClick=t.prefix=t.suffix=t.formatTTL=t.formatSize=t.md5=t.wait=t.urlPatch=t.racePromise=t.inContext=t.buildMediaId=t.buildChunkId=t.buildPeerId=t.buildSN=void 0;const i=n(r(568)),o=n(r(90)),s=r(296),a=n(r(495));t.logger=a.default;const u=(0,s.customAlphabet)("abcdefghijklmnopqrstwuvxyz0123456789ABCDEFGHIJKLMNOPQRSTWUVXYZ",32);function c(e){try{if(e=(e=e||"").trim(),/^[a-f0-9]{32}$/i.test(e))return e;{let t=new URL(e);if(/.*\.v\.smtcdns\.com$/i.test(t.hostname)){let r=["index","start","end"].map((e=>e+"="+(t.searchParams.get(e)||""))).join("&");e="https://xxxxxxx.v.smtcdns.com"+t.pathname.replace(/.*\//,"")+"?"+r}else if(/.*\.ott\.cibntv\.net$/.test(t.hostname))e="https://xxxxxxx.ott.cibntv.net"+t.pathname;else{/.*\.inter\.71edge\.com$/.test(t.hostname);{let r=["start","end"].map((e=>e+"="+(t.searchParams.get(e)||""))).join("&");e="https://xxxxxxx.iqiyi.com"+t.pathname+"?"+r}}}return h(e)}catch(t){console.warn("build chunkId error",t.message,e)}return""}function l(e){if(e=(e=e||"").trim(),/^[a-f0-9]{32}$/i.test(e))return e;try{if(/^https?:/i.test(e)){let t=new URL(e);e=/\.youtube\.com$/i.test(t.hostname)?"https://www.youtube.com/watch/"+t.searchParams.get("v")+".html":e.replace(/(\?|#).*/g,"")}else e=location.href}catch(t){e=location.href}return h((e=e.trim())+":IVIDEOS-SAVCX")}function h(e){return(0,i.default)(e).toLowerCase()}t.buildSN=function(e=12){return u(e)},t.buildPeerId=function(e){return h((e=e||"")+"-peer-"+u(32))},t.buildChunkId=c,t.buildMediaId=l,t.inContext=function(){return!!(null===o.default||void 0===o.default?void 0:o.default.runtime)&&!!(null===o.default||void 0===o.default?void 0:o.default.storage)},t.racePromise=function(e){return new Promise(((t,r)=>{let n=!1,i=setTimeout((()=>{n=!0,t(void 0)}),18e4);e.forEach((async e=>{let r=await e.then((e=>e)).catch((e=>{}));n||null!=r&&null!=r&&(n=!0,clearTimeout(i),t(r))}))}))},t.urlPatch=function(e){try{if(/^\/\//i.test(e))return location.protocol+e;if(/^\/[a-z0-9_-]/.test(e))return location.origin+e}catch(e){}return e},t.wait=async function(e=1){return new Promise((t=>setTimeout((()=>t()),e)))},t.md5=h,t.formatSize=function(e){return e>1073741824?Math.ceil(e/1024/1024/1024*100)/100+"G":e>1048576?Math.ceil(e/1024/1024*100)/100+"M":e>1024?Math.ceil(e/1024*100)/100+"K":e+"B"},t.formatTTL=function(e){if(e<1e3)return e+"ms";e=Math.ceil(e/1e3);let t=Math.floor(e/86400),r=Math.floor(e%86400/3600),n=Math.floor(e%3600/60),i=e%60;return t>0?`${t}D:${r}H:${n}m:${i}s`:r>0?`${r}H:${n}m:${i}s`:n>0?`${n}m:${i}s`:`${i}s`},t.suffix=function(e){try{if("string"!=typeof e)return"";let t=new URL(e).pathname.replace(/[\?#].*$/,"").replace(/^.*\//g,"").toLowerCase();return t=t.includes(".")?t.replace(/^.*\./g,""):"",/^[a-z0-9]+$/i.test(t)?t:""}catch(e){}return""},t.prefix=function(e){if("string"!=typeof e)return"";let t=e.replace(/\?.*$/,"").replace(/\/[^\/\?]+\.[a-z0-9]+$/,"");return t=t.replace(/[\/]+$/,""),t},t.downloadClick=function(e){if(e&&!(e.length<1)){var t=new Blob(e.map((e=>e.buffer)),{type:"video/mp4"});console.info("download",t);var r=document.createElement("a"),n=URL.createObjectURL(t),i=`${document.title}.mp4`;r.href=n,r.download=i,r.click(),setTimeout((()=>URL.revokeObjectURL(n)),1e3),console.info("click download",n)}};class f{constructor(){this.isClose=!1}handle(e,t){return this.pid=setTimeout((async()=>{if(!this.isClose){try{if("AsyncFunction"===e.constructor.name){let t=e();t.catch&&t.catch((e=>console.error(e)))}else e()}catch(e){console.error(e)}this.handle(e,t)}}),t),this}close(){this.isClose=!0,clearTimeout(this.pid)}}t.setIntervalx=function(e,t){let r=new f;return r.handle(e,t),r};const d={buildChunkId:c,buildMediaId:l,md5:h};t.default=d},495:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(484)),o=n(r(248)),s="YYYY-MM-DD HH:mm:ss";const a=new class{info(...e){o.default.logLevel>=2&&console.info((0,i.default)().format(s),...e)}debug(...e){o.default.logLevel>=4&&console.debug((0,i.default)().format(s),...e)}log(...e){o.default.logLevel>=3&&console.log((0,i.default)().format(s),...e)}warn(...e){o.default.logLevel>=1&&console.warn((0,i.default)().format(s),...e)}error(...e){console.error((0,i.default)().format(s),...e)}};t.default=a},344:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.sendToPage=void 0;const a=o(r(905)),u=s(r(90)),c=s(r(248)),l=!/^https?:\/\//i.test(location.href);const h=new class{constructor(){var e;this.tasks=new Map;let t=this.tasks;null===(e=globalThis.window)||void 0===e||e.addEventListener("message",(e=>{let r=e.data;if("ivideos.response"==r.cmd){let e=r.sid,n=t.get(e);t.delete(e),n&&n(r.data)}}))}request(e,t,r,n="/"){var i;if(l&&u.default.tabs)null===(i=null===u.default||void 0===u.default?void 0:u.default.tabs)||void 0===i||i.getCurrent((n=>{n&&n.id&&u.default.tabs.sendMessage(n.id,{router:e,data:t,headers:{}},(e=>{r&&r(e)}))}));else{let i=this.tasks,o=a.buildSN(12);r&&i.set(o,(e=>{i.delete(o),r&&r(e)}));let s=location.href.replace(/[#].*$/,"");postMessage({sid:o,router:e,data:t,headers:{refer:s}},n),window!=window.parent&&(setTimeout((()=>window.parent.postMessage({sid:o,router:e,data:t,headers:{refer:s}},n)),100),window.parent!=window.top&&setTimeout((()=>{var r;return null===(r=window.top)||void 0===r?void 0:r.postMessage({sid:o,router:e,data:t,headers:{refer:s}},n)}),200))}}};function f(e,t,r,n){h.request(e,t,r,n)}t.sendToPage=f;const d={getInfo(e){"plugin"==c.default.mode?f("ivideos.info",{},e,"*"):e({title:document.title,url:location.href,env:"worker"})},getDeviceInfo(e){f("ivideos.deviceInfo",{},(t=>{t&&t.deviceId?e&&e(t):setTimeout((()=>{d.getDeviceInfo(e)}),200)}),"/")}};t.default=d},674:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.buildSN=void 0;const a=s(r(891)),u=r(296),c=s(r(729)),l=o(r(905)),h=s(r(90)),f=(0,u.customAlphabet)("abcdefghijklmnopqrstwuvxyz0123456789ABCDEFGHIJKLMNOPQRSTWUVXYZ",32);t.buildSN=function(e=12){return f(e)},a.default.init("17bbce2e5b921333cec9ae737232b638",{debug:!1,ip:!0,ignore_dnt:!0});const d={NODE_ENV:"production",appVersion:"2.0.9"}||{};class p extends c.default{constructor(){var e;super(),this.appVersion=d.appVersion||"";let t=this;try{l.inContext()?null===(e=null===h.default||void 0===h.default?void 0:h.default.runtime)||void 0===e||e.sendMessage({router:"/deviceInfo",data:{}},(e=>{e&&e.deviceId&&(t.deviceId=e.deviceId,t.ip=e.ip,t.emit("ready",e))})):globalThis.addEventListener("load",(()=>{t.emit("ready",{deviceId:""})}))}catch(e){}this.once("ready",(e=>{this.isTop&&a.default.identify(e.deviceId)}))}set ip(e){var t;try{this._ip=e,null===(t=globalThis.localStorage)||void 0===t||t.setItem("ip",e)}catch(e){}}get ip(){return this._ip}get isTop(){return globalThis.window===globalThis.top}setAppVersion(e){this.appVersion=e}register(e){e&&this.isTop&&(this.deviceId=e,this.emit("ready",{deviceId:e}))}play(e){let t=new URL(e.url);e.host=t.host,this.track("play",e)}open(e){this.isTop&&(e=Object.assign({},e),this.track("open",Object.assign({url:location.href,host:location.hostname,title:document.title,source:"plugin"},e)))}install(e){this.deviceId?this.track("install",Object.assign(Object.assign({},e),{appVersion:this.appVersion})):this.once("ready",(()=>this.track("install",Object.assign(Object.assign({},e),{appVersion:this.appVersion}))))}installSW(){this.track("installSW",{appVersion:this.appVersion})}startup(){this.deviceId?this.track("startup",{appVersion:this.appVersion}):this.once("ready",(()=>this.track("startup",{appVersion:this.appVersion})))}track(e,t){a.default.track(e,Object.assign(Object.assign({},t),{appVersion:this.appVersion,t:Date.now(),language:navigator.language,clientXp:this.ip,$user_id:this.deviceId,distinct_id:this.deviceId}))}}const g=new p;t.default=g},678:(e,t,r)=>{"use strict";function n(e){return new Promise(((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)}))}function i(e,t){const r=indexedDB.open(e);r.onupgradeneeded=()=>r.result.createObjectStore(t);const i=n(r);return(e,r)=>i.then((n=>r(n.transaction(t,e).objectStore(t))))}let o;function s(){return o||(o=i("keyval-store","keyval")),o}function a(e,t=s()){return t("readonly",(t=>n(t.get(e))))}function u(e,t,r=s()){return r("readwrite",(r=>(r.put(t,e),n(r.transaction))))}function c(e,t=s()){return t("readwrite",(t=>(e.forEach((e=>t.put(e[1],e[0]))),n(t.transaction))))}function l(e,t=s()){return t("readonly",(t=>Promise.all(e.map((e=>n(t.get(e)))))))}function h(e,t,r=s()){return r("readwrite",(r=>new Promise(((i,o)=>{r.get(e).onsuccess=function(){try{r.put(t(this.result),e),i(n(r.transaction))}catch(e){o(e)}}}))))}function f(e,t=s()){return t("readwrite",(t=>(t.delete(e),n(t.transaction))))}function d(e,t=s()){return t("readwrite",(t=>(e.forEach((e=>t.delete(e))),n(t.transaction))))}function p(e=s()){return e("readwrite",(e=>(e.clear(),n(e.transaction))))}function g(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},n(e.transaction)}function _(e=s()){return e("readonly",(e=>{if(e.getAllKeys)return n(e.getAllKeys());const t=[];return g(e,(e=>t.push(e.key))).then((()=>t))}))}function y(e=s()){return e("readonly",(e=>{if(e.getAll)return n(e.getAll());const t=[];return g(e,(e=>t.push(e.value))).then((()=>t))}))}function m(e=s()){return e("readonly",(t=>{if(t.getAll&&t.getAllKeys)return Promise.all([n(t.getAllKeys()),n(t.getAll())]).then((([e,t])=>e.map(((e,r)=>[e,t[r]]))));const r=[];return e("readonly",(e=>g(e,(e=>r.push([e.key,e.value]))).then((()=>r))))}))}r.r(t),r.d(t,{clear:()=>p,createStore:()=>i,del:()=>f,delMany:()=>d,entries:()=>m,get:()=>a,getMany:()=>l,keys:()=>_,promisifyRequest:()=>n,set:()=>u,setMany:()=>c,update:()=>h,values:()=>y})},296:(e,t,r)=>{"use strict";r.r(t),r.d(t,{customAlphabet:()=>s,customRandom:()=>o,nanoid:()=>a,random:()=>i,urlAlphabet:()=>n});let n="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",i=e=>crypto.getRandomValues(new Uint8Array(e)),o=(e,t,r)=>{let n=(2<<Math.log(e.length-1)/Math.LN2)-1,i=-~(1.6*n*t/e.length);return(o=t)=>{let s="";for(;;){let t=r(i),a=i;for(;a--;)if(s+=e[t[a]&n]||"",s.length===o)return s}}},s=(e,t=21)=>o(e,t,i),a=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),"")},40:e=>{"use strict";e.exports=JSON.parse('{"name":"ivideos","version":"2.0.9","main":"dist/ivideos.js","browser":"dist/ivideos.js","license":"MIT","bin":{},"types":"dist/index.d.ts","scripts":{},"engines":{"node":">=10.0.0"},"keywords":[],"repository":"","dependencies":{},"devDependencies":{},"description":"ivideos - 视频加速器, ivideos - Video Accelerator","files":["dist","package.json","README.md"]}')}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n=r(365);ivideos=n})();