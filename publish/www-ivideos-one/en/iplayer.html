<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv='content-language' content='en'>
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
        <title>IVIDEOS - Video Accelerator
        </title>
        <meta property="og:title" content="IVIDEOS - Video Accelerator"/>
        <meta name="keywords" content=""/>
        <meta
        name="description" content="The page you are looking for might have been removed had its name changed or is temporarily unavailable."/> <!-- Favicon -->
        <link
        rel="icon" type="image/png" href="../assets/logos/icon.png"/>
        <!-- jQuery Min JS -->
        <script src="../assets/js/jquery.min.js"></script>
        <!-- Bootstrap Min JS -->
        <script src="../assets/js/bootstrap.js"></script>
        <script src="../assets/js/ivideos.js?2"></script>
        
        <!-- Favicon -->
        <!-- Bootstrap Min CSS --> <link rel="stylesheet" href="../assets/css/bootstrap.css"/>
        <link rel="stylesheet" href="../assets/css/plyr.css"/>
        <style>
            body {
                background-color: #000;
                overflow: hidden;
            }
            .wrap {
                min-height: 300px;
                height: 600px;
            }
            .mds {
                padding: 0;
                list-style: none;
                background-color: #000;
                overflow: hidden;
            }
            .mds li {
                max-height: 150px;
                overflow: hidden;
                padding: 0 2px;
                margin-bottom: 5px;
            }
            .mds li img {
                width: 100%;
            }
            .video {
                min-height: 300px;
                height: 600px;
                margin: 0 auto;
                width: 100%;
            }
            .d-table {
                width: 100%;
            }
            .container {
                padding: 0;
                width: 100%;
            }
        </style>
    </head>
    <body>
        <div class="d-table">
            <div class="d-table-cell">
                <div class="row wrap">
                    <div class="col-lg-10 col-md-10 col-sm-12 v-wrap" style="padding-right: 0;">
                        <video
                            id="player"
                            class="video"
                            controls="controls"
                            crossorigin="crossorigin"
                            playsinline="playsinline"
                            poster="../assets/img//video-bg.png"></video>
                    </div>
                    <div class="col-lg-2 col-md-2 hidden-sm hedden-sx" style="padding-left: 0;">
                        <ul class="mds">
                            <li>
                                <a href="./docs/abx.html" target="_top">
                                    <img src="../assets/img/blog-details/1.jpg"/>
                                </a>
                            </li>
                            <li>
                                <a href="./docs/abx.html" target="_top">
                                    <img src="../assets/img/blog-details/2.jpg"/>
                                </a>
                            </li>
                            <li>
                                <a href="./docs/abx.html" target="_top">
                                    <img src="../assets/img/blog-details/3.jpg"/>
                                </a>
                            </li>
                            <li>
                                <a href="./docs/abx.html" target="_top">
                                    <img src="../assets/img/blog/blog-6.jpg"/>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <script src="../assets/js/plyr.js"></script>
        <script src="../assets/js/hls.js"></script>
        <script>
            function getQuery() {
                let search = location
                    .search
                    .replace(/^\?/, "")
                    .split("&");
                let query = {};
                for (let line of search) {
                    let kv = line.split("=");
                    query[kv[0]] = kv[1];
                }
                return query;
            }
            function isMobile() {
                return "onorientationchange" in window;
            }
            function setHeight() {
                let ua = navigator.userAgent;
                let isMobile = /iphone|android/i.test(ua);
                let eleVideo = document.querySelector("video");
                let eldMds = document.querySelector(".mds");
                let eleWrap = document.querySelector(".wrap");
                let dif = 150;
                let height = window.outerHeight - dif;
                let bi = window.outerWidth / window.outerHeight; 
                eleVideo.style.height = height + "px";
                eleWrap.style.height = height + "px";
                eldMds.style.height = height + "px";
                eldMds.style.display = "inline-block";
                if(window.orientation != undefined){
                    console.info("orientation", window.orientation);
                    if (window.orientation == 180 || window.orientation == 0) { // alert("竖屏状态！")
                        eldMds.style.height = "150px";
                    }
                    if (window.orientation == 90 || window.orientation == -90) { // alert("横屏状态！")
                        height = window.outerHeight ;
                        //eldMds.style.display = "none";
                        eleVideo.style.height = height + "px";
                        eldMds.style.height = height + "px";
                    }
                }else{
                    console.info("bi=", bi);
                    if(bi >= 1){
                        //eleVideo.style.height = height + "px";
                        //eleWrap.style.height = height + "px";
                        //
                    }else{
                        //eleVideo.style.height = height + "px";
                        //eleWrap.style.height = height + "px";
                        eldMds.style.height = "150px";
                    }
                }
            }
            window.addEventListener("load", setHeight, false)
            window.addEventListener("orientationchange", setHeight, false);
            jQuery(($) => {
                setHeight();
                function play(url) {
                    if (!/^https?:/i.test(url)) 
                        return;
                    
                    if (window.playerx) {
                        window.playerx.destroy();
                    }
                    let video = document.querySelector("video");
                    // video.style.width = "100%";
                    console.info("play url", url, Hls.version);
                    // https://iqiyi.sd-play.com/20220423/BtSE5SYf/1200kb/hls/index.m3u8
                    const source = url; // "https://bitdash-a.akamaihd.net/content/sintel/hls/video/250kbit.m3u8";
                    const player = new Plyr(video, {
                        autoplay: true,
                        seekTime: 5,
                        // duration: 120,
                        invertTime: false,
                        /* ads: {
    enabled: true, publisherId: '', tagUrl: ''
   }, */
                        captions: {
                            active: true,
                            update: true,
                            language: "en"
                        }
                    });
                    if (!Hls.isSupported()) {
                        video.src = source;
                    } else { // For more Hls.js options, see https://github.com/dailymotion/hls.js
                        const hls = new Hls();
                        hls.loadSource(source);
                        hls.attachMedia(video);
                        hls.on(Hls.Events.MANIFEST_PARSED, () => {});
                        // Handle changing captions
                        player.on("languagechange", () => { // Caption support is still flaky. See: https://github.com/sampotts/plyr/issues/994
                            setTimeout(() => (hls.subtitleTrack = player.currentTrack), 50);
                        });
                        player.on("ready", () => {
                            console.info("=========ready");
                            player.play().catch((err) => console.info("play error", err));
                        });
                    }
                    window.playerx = player;
                    return player;
                }
                let query = getQuery()
                let id = decodeURIComponent(query.id);
                // "https://v.gsuus.com/play/NbWqmN4e/index.m3u8"
                id && play(id);
            });
            setHeight();
        </script>
    </body>
</html>